{"version":2,"initialFileContents":[["file:///home/truonglangquan/.config/quickshell/ii/modules/ii/bar/Workspaces.qml","f03c02f"]],"timeline":{"checkpoints":[{"checkpointId":"d452e4b0-2017-4e14-9e02-fe786df01ed2","epoch":0,"label":"Initial State","description":"Starting point before any edits"},{"checkpointId":"008928b8-172e-4ff1-84ea-e8b2af996bf9","requestId":"request_f95c2604-2ff5-4eb2-9a2d-79ff9731bf0a","epoch":1,"label":"Request request_f95c2604-2ff5-4eb2-9a2d-79ff9731bf0a"},{"checkpointId":"f01dacc2-5143-452e-8926-fd9401b710d4","requestId":"request_25ef19fe-1f6b-40e7-ab33-fcb7208e7df7","epoch":2,"label":"Request request_25ef19fe-1f6b-40e7-ab33-fcb7208e7df7"},{"checkpointId":"d3710e7b-4d94-4508-8e50-988ed6d89430","requestId":"request_25ef19fe-1f6b-40e7-ab33-fcb7208e7df7","undoStopId":"fbb5bed4-bbd0-43b0-aebd-4782e49b7244","epoch":3,"label":"Request request_25ef19fe-1f6b-40e7-ab33-fcb7208e7df7 - Stop fbb5bed4-bbd0-43b0-aebd-4782e49b7244"},{"checkpointId":"67276b91-4098-441d-94ac-7f36e15cb8cb","requestId":"request_bb82dfcb-9669-4f6f-a808-5be3d710c4e0","epoch":6,"label":"Request request_bb82dfcb-9669-4f6f-a808-5be3d710c4e0"},{"checkpointId":"e8983445-f6f4-49c6-b93c-9db261507549","requestId":"request_bb82dfcb-9669-4f6f-a808-5be3d710c4e0","undoStopId":"e30a0647-6901-4f1c-b04f-75f7e128dcd6","epoch":7,"label":"Request request_bb82dfcb-9669-4f6f-a808-5be3d710c4e0 - Stop e30a0647-6901-4f1c-b04f-75f7e128dcd6"}],"currentEpoch":10,"fileBaselines":[["file:///home/truonglangquan/.config/quickshell/ii/modules/ii/bar/Workspaces.qml::request_25ef19fe-1f6b-40e7-ab33-fcb7208e7df7",{"uri":{"$mid":1,"fsPath":"/home/truonglangquan/.config/quickshell/ii/modules/ii/bar/Workspaces.qml","external":"file:///home/truonglangquan/.config/quickshell/ii/modules/ii/bar/Workspaces.qml","path":"/home/truonglangquan/.config/quickshell/ii/modules/ii/bar/Workspaces.qml","scheme":"file"},"requestId":"request_25ef19fe-1f6b-40e7-ab33-fcb7208e7df7","content":"import qs\nimport qs.services\nimport qs.modules.common\nimport qs.modules.common.models\nimport qs.modules.common.widgets\nimport qs.modules.common.functions\nimport QtQuick\nimport QtQuick.Controls\nimport Quickshell\nimport Quickshell.Wayland\nimport Quickshell.Hyprland\nimport Quickshell.Widgets\nimport Qt5Compat.GraphicalEffects\n\nItem {\n    id: root\n    property bool vertical: false\n    property bool borderless: Config.options.bar.borderless\n    readonly property HyprlandMonitor monitor: Hyprland.monitorFor(root.QsWindow.window?.screen)\n    readonly property Toplevel activeWindow: ToplevelManager.activeToplevel\n    \n    readonly property int workspacesShown: Config.options.bar.workspaces.shown\n    readonly property int workspaceGroup: Math.floor((monitor?.activeWorkspace?.id - 1) / root.workspacesShown)\n    property list<bool> workspaceOccupied: []\n    property int widgetPadding: 4\n    property int workspaceButtonWidth: 26\n    property real activeWorkspaceMargin: 2\n    property real workspaceIconSize: workspaceButtonWidth * 0.69\n    property real workspaceIconSizeShrinked: workspaceButtonWidth * 0.55\n    property real workspaceIconOpacityShrinked: 1\n    property real workspaceIconMarginShrinked: -4\n    property int workspaceIndexInGroup: (monitor?.activeWorkspace?.id - 1) % root.workspacesShown\n\n    property bool showNumbers: false\n    Timer {\n        id: showNumbersTimer\n        interval: (Config?.options.bar.autoHide.showWhenPressingSuper.delay ?? 100)\n        repeat: false\n        onTriggered: {\n            root.showNumbers = true\n        }\n    }\n    Connections {\n        target: GlobalStates\n        function onSuperDownChanged() {\n            if (!Config?.options.bar.autoHide.showWhenPressingSuper.enable) return;\n            if (GlobalStates.superDown) showNumbersTimer.restart();\n            else {\n                showNumbersTimer.stop();\n                root.showNumbers = false;\n            }\n        }\n        function onSuperReleaseMightTriggerChanged() { \n            showNumbersTimer.stop()\n        }\n    }\n\n    // Function to update workspaceOccupied\n    function updateWorkspaceOccupied() {\n        workspaceOccupied = Array.from({ length: root.workspacesShown }, (_, i) => {\n            return Hyprland.workspaces.values.some(ws => ws.id === workspaceGroup * root.workspacesShown + i + 1);\n        })\n    }\n\n    // Occupied workspace updates\n    Component.onCompleted: updateWorkspaceOccupied()\n    Connections {\n        target: Hyprland.workspaces\n        function onValuesChanged() {\n            updateWorkspaceOccupied();\n        }\n    }\n    Connections {\n        target: Hyprland\n        function onFocusedWorkspaceChanged() {\n            updateWorkspaceOccupied();\n        }\n    }\n    onWorkspaceGroupChanged: {\n        updateWorkspaceOccupied();\n    }\n\n    implicitWidth: root.vertical ? Appearance.sizes.verticalBarWidth : (root.workspaceButtonWidth * root.workspacesShown)\n    implicitHeight: root.vertical ? (root.workspaceButtonWidth * root.workspacesShown) : Appearance.sizes.barHeight\n\n    // Scroll to switch workspaces\n    WheelHandler {\n        onWheel: (event) => {\n            if (event.angleDelta.y < 0)\n                Hyprland.dispatch(`workspace r+1`);\n            else if (event.angleDelta.y > 0)\n                Hyprland.dispatch(`workspace r-1`);\n        }\n        acceptedDevices: PointerDevice.Mouse | PointerDevice.TouchPad\n    }\n\n    MouseArea {\n        anchors.fill: parent\n        acceptedButtons: Qt.BackButton\n        onPressed: (event) => {\n            if (event.button === Qt.BackButton) {\n                Hyprland.dispatch(`togglespecialworkspace`);\n            } \n        }\n    }\n\n    // Workspaces - background\n    Grid {\n        z: 1\n        anchors.centerIn: parent\n\n        rowSpacing: 0\n        columnSpacing: 0\n        columns: root.vertical ? 1 : root.workspacesShown\n        rows: root.vertical ? root.workspacesShown : 1\n\n        Repeater {\n            model: root.workspacesShown\n\n            Rectangle {\n                z: 1\n                implicitWidth: workspaceButtonWidth\n                implicitHeight: workspaceButtonWidth\n                radius: (width / 2)\n                property var previousOccupied: (workspaceOccupied[index-1] && !(!activeWindow?.activated && monitor?.activeWorkspace?.id === index))\n                property var rightOccupied: (workspaceOccupied[index+1] && !(!activeWindow?.activated && monitor?.activeWorkspace?.id === index+2))\n                property var radiusPrev: previousOccupied ? 0 : (width / 2)\n                property var radiusNext: rightOccupied ? 0 : (width / 2)\n\n                topLeftRadius: radiusPrev\n                bottomLeftRadius: root.vertical ? radiusNext : radiusPrev\n                topRightRadius: root.vertical ? radiusPrev : radiusNext\n                bottomRightRadius: radiusNext\n                \n                color: ColorUtils.transparentize(Appearance.m3colors.m3secondaryContainer, 0.4)\n                opacity: (workspaceOccupied[index] && !(!activeWindow?.activated && monitor?.activeWorkspace?.id === index+1)) ? 1 : 0\n\n                Behavior on opacity {\n                    animation: Appearance.animation.elementMove.numberAnimation.createObject(this)\n                }\n                Behavior on radiusPrev {\n                    animation: Appearance.animation.elementMove.numberAnimation.createObject(this)\n                }\n\n                Behavior on radiusNext {\n                    animation: Appearance.animation.elementMove.numberAnimation.createObject(this)\n                }\n\n            }\n\n        }\n\n    }\n\n    // Active workspace\n    Rectangle {\n        z: 2\n        // Make active ws indicator, which has a brighter color, smaller to look like it is of the same size as ws occupied highlight\n        radius: Appearance.rounding.full\n        color: Appearance.colors.colPrimary\n\n        anchors {\n            verticalCenter: vertical ? undefined : parent.verticalCenter\n            horizontalCenter: vertical ? parent.horizontalCenter : undefined\n        }\n\n        AnimatedTabIndexPair {\n            id: idxPair\n            index: root.workspaceIndexInGroup\n        }\n        property real indicatorPosition: Math.min(idxPair.idx1, idxPair.idx2) * workspaceButtonWidth + root.activeWorkspaceMargin\n        property real indicatorLength: Math.abs(idxPair.idx1 - idxPair.idx2) * workspaceButtonWidth + workspaceButtonWidth - root.activeWorkspaceMargin * 2\n        property real indicatorThickness: workspaceButtonWidth - root.activeWorkspaceMargin * 2\n\n        x: root.vertical ? null : indicatorPosition\n        implicitWidth: root.vertical ? indicatorThickness : indicatorLength\n        y: root.vertical ? indicatorPosition : null\n        implicitHeight: root.vertical ? indicatorLength : indicatorThickness\n\n    }\n\n    // Workspaces - numbers\n    Grid {\n        z: 3\n\n        columns: root.vertical ? 1 : root.workspacesShown\n        rows: root.vertical ? root.workspacesShown : 1\n        columnSpacing: 0\n        rowSpacing: 0\n\n        anchors.fill: parent\n\n        Repeater {\n            model: root.workspacesShown\n\n            Button {\n                id: button\n                property int workspaceValue: workspaceGroup * root.workspacesShown + index + 1\n                implicitHeight: vertical ? Appearance.sizes.verticalBarWidth : Appearance.sizes.barHeight\n                implicitWidth: vertical ? Appearance.sizes.verticalBarWidth : Appearance.sizes.verticalBarWidth\n                onPressed: Hyprland.dispatch(`workspace ${workspaceValue}`)\n                width: vertical ? undefined : workspaceButtonWidth\n                height: vertical ? workspaceButtonWidth : undefined\n\n                background: Item {\n                    id: workspaceButtonBackground\n                    implicitWidth: workspaceButtonWidth\n                    implicitHeight: workspaceButtonWidth\n                    property var biggestWindow: HyprlandData.biggestWindowForWorkspace(button.workspaceValue)\n                    property var mainAppIconSource: Quickshell.iconPath(AppSearch.guessIcon(biggestWindow?.class), \"image-missing\")\n\n                    StyledText { // Workspace number text\n                        opacity: root.showNumbers\n                            || ((Config.options?.bar.workspaces.alwaysShowNumbers && (!Config.options?.bar.workspaces.showAppIcons || !workspaceButtonBackground.biggestWindow || root.showNumbers))\n                            || (root.showNumbers && !Config.options?.bar.workspaces.showAppIcons)\n                            )  ? 1 : 0\n                        z: 3\n\n                        anchors.centerIn: parent\n                        horizontalAlignment: Text.AlignHCenter\n                        verticalAlignment: Text.AlignVCenter\n                        font {\n                            pixelSize: Appearance.font.pixelSize.small - ((text.length - 1) * (text !== \"10\") * 2)\n                            family: Config.options?.bar.workspaces.useNerdFont ? Appearance.font.family.iconNerd : defaultFont\n                        }\n                        text: Config.options?.bar.workspaces.numberMap[button.workspaceValue - 1] || button.workspaceValue\n                        elide: Text.ElideRight\n                        color: (monitor?.activeWorkspace?.id == button.workspaceValue) ? \n                            Appearance.m3colors.m3onPrimary : \n                            (workspaceOccupied[index] ? Appearance.m3colors.m3onSecondaryContainer : \n                                Appearance.colors.colOnLayer1Inactive)\n\n                        Behavior on opacity {\n                            animation: Appearance.animation.elementMoveFast.numberAnimation.createObject(this)\n                        }\n                    }\n                    Rectangle { // Dot instead of ws number\n                        id: wsDot\n                        opacity: (Config.options?.bar.workspaces.alwaysShowNumbers\n                            || root.showNumbers\n                            || (Config.options?.bar.workspaces.showAppIcons && workspaceButtonBackground.biggestWindow)\n                            ) ? 0 : 1\n                        visible: opacity > 0\n                        anchors.centerIn: parent\n                        width: workspaceButtonWidth * 0.18\n                        height: width\n                        radius: width / 2\n                        color: (monitor?.activeWorkspace?.id == button.workspaceValue) ? \n                            Appearance.m3colors.m3onPrimary : \n                            (workspaceOccupied[index] ? Appearance.m3colors.m3onSecondaryContainer : \n                                Appearance.colors.colOnLayer1Inactive)\n\n                        Behavior on opacity {\n                            animation: Appearance.animation.elementMoveFast.numberAnimation.createObject(this)\n                        }\n                    }\n                    Item { // Main app icon\n                        anchors.centerIn: parent\n                        width: workspaceButtonWidth\n                        height: workspaceButtonWidth\n                        opacity: !Config.options?.bar.workspaces.showAppIcons ? 0 :\n                            (workspaceButtonBackground.biggestWindow && !root.showNumbers && Config.options?.bar.workspaces.showAppIcons) ? \n                            1 : workspaceButtonBackground.biggestWindow ? workspaceIconOpacityShrinked : 0\n                            visible: opacity > 0\n                        IconImage {\n                            id: mainAppIcon\n                            anchors.bottom: parent.bottom\n                            anchors.right: parent.right\n                            anchors.bottomMargin: (!root.showNumbers && Config.options?.bar.workspaces.showAppIcons) ? \n                                (workspaceButtonWidth - workspaceIconSize) / 2 : workspaceIconMarginShrinked\n                            anchors.rightMargin: (!root.showNumbers && Config.options?.bar.workspaces.showAppIcons) ? \n                                (workspaceButtonWidth - workspaceIconSize) / 2 : workspaceIconMarginShrinked\n\n                            source: workspaceButtonBackground.mainAppIconSource\n                            implicitSize: (!root.showNumbers && Config.options?.bar.workspaces.showAppIcons) ? workspaceIconSize : workspaceIconSizeShrinked\n\n                            Behavior on opacity {\n                                animation: Appearance.animation.elementMoveFast.numberAnimation.createObject(this)\n                            }\n                            Behavior on anchors.bottomMargin {\n                                animation: Appearance.animation.elementMoveFast.numberAnimation.createObject(this)\n                            }\n                            Behavior on anchors.rightMargin {\n                                animation: Appearance.animation.elementMoveFast.numberAnimation.createObject(this)\n                            }\n                            Behavior on implicitSize {\n                                animation: Appearance.animation.elementMoveFast.numberAnimation.createObject(this)\n                            }\n                        }\n\n                        Loader {\n                            active: Config.options.bar.workspaces.monochromeIcons\n                            anchors.fill: mainAppIcon\n                            sourceComponent: Item {\n                                Desaturate {\n                                    id: desaturatedIcon\n                                    visible: false // There's already color overlay\n                                    anchors.fill: parent\n                                    source: mainAppIcon\n                                    desaturation: 0.8\n                                }\n                                ColorOverlay {\n                                    anchors.fill: desaturatedIcon\n                                    source: desaturatedIcon\n                                    color: ColorUtils.transparentize(wsDot.color, 0.9)\n                                }\n                            }\n                        }\n                    }\n                }\n                \n\n            }\n\n        }\n\n    }\n\n}\n","epoch":4,"telemetryInfo":{}}],["file:///home/truonglangquan/.config/quickshell/ii/modules/ii/bar/Workspaces.qml::request_bb82dfcb-9669-4f6f-a808-5be3d710c4e0",{"uri":{"$mid":1,"fsPath":"/home/truonglangquan/.config/quickshell/ii/modules/ii/bar/Workspaces.qml","external":"file:///home/truonglangquan/.config/quickshell/ii/modules/ii/bar/Workspaces.qml","path":"/home/truonglangquan/.config/quickshell/ii/modules/ii/bar/Workspaces.qml","scheme":"file"},"requestId":"request_bb82dfcb-9669-4f6f-a808-5be3d710c4e0","content":"import qs\nimport qs.services\nimport qs.modules.common\nimport qs.modules.common.models\nimport qs.modules.common.widgets\nimport qs.modules.common.functions\nimport QtQuick\nimport QtQuick.Controls\nimport Quickshell\nimport Quickshell.Wayland\nimport Quickshell.Hyprland\nimport Quickshell.Widgets\nimport Qt5Compat.GraphicalEffects\n\nItem {\n    id: root\n    property bool vertical: false\n    property bool borderless: Config.options.bar.borderless\n    readonly property HyprlandMonitor monitor: Hyprland.monitorFor(root.QsWindow.window?.screen)\n    readonly property Toplevel activeWindow: ToplevelManager.activeToplevel\n    \n    readonly property int workspacesShown: Config.options.bar.workspaces.shown\n    readonly property int workspaceGroup: Math.floor((monitor?.activeWorkspace?.id - 1) / root.workspacesShown)\n    property list<bool> workspaceOccupied: []\n    property int widgetPadding: 4\n    property int workspaceButtonWidth: 26\n    property real activeWorkspaceMargin: 2\n    property real workspaceIconSize: workspaceButtonWidth * 0.69\n    property real workspaceIconSizeShrinked: workspaceButtonWidth * 0.55\n    property real workspaceIconOpacityShrinked: 1\n    property real workspaceIconMarginShrinked: -4\n    property int workspaceIndexInGroup: (monitor?.activeWorkspace?.id - 1) % root.workspacesShown\n\n    property bool showNumbers: false\n    Timer {\n        id: showNumbersTimer\n        interval: (Config?.options.bar.autoHide.showWhenPressingSuper.delay ?? 100)\n        repeat: false\n        onTriggered: {\n            root.showNumbers = true\n        }\n    }\n    Connections {\n        target: GlobalStates\n        function onSuperDownChanged() {\n            if (!Config?.options.bar.autoHide.showWhenPressingSuper.enable) return;\n            if (GlobalStates.superDown) showNumbersTimer.restart();\n            else {\n                showNumbersTimer.stop();\n                root.showNumbers = false;\n            }\n        }\n        function onSuperReleaseMightTriggerChanged() { \n            showNumbersTimer.stop()\n        }\n    }\n\n    // Function to update workspaceOccupied\n    function updateWorkspaceOccupied() {\n        workspaceOccupied = Array.from({ length: root.workspacesShown }, (_, i) => {\n            return Hyprland.workspaces.values.some(ws => ws.id === workspaceGroup * root.workspacesShown + i + 1);\n        })\n    }\n\n    // Occupied workspace updates\n    Component.onCompleted: updateWorkspaceOccupied()\n    Connections {\n        target: Hyprland.workspaces\n        function onValuesChanged() {\n            updateWorkspaceOccupied();\n        }\n    }\n    Connections {\n        target: Hyprland\n        function onFocusedWorkspaceChanged() {\n            updateWorkspaceOccupied();\n        }\n    }\n    onWorkspaceGroupChanged: {\n        updateWorkspaceOccupied();\n    }\n\n    implicitWidth: root.vertical ? Appearance.sizes.verticalBarWidth : (root.workspaceButtonWidth * root.workspacesShown)\n    implicitHeight: root.vertical ? (root.workspaceButtonWidth * root.workspacesShown) : Appearance.sizes.barHeight\n\n    // Scroll to switch workspaces\n    WheelHandler {\n        onWheel: (event) => {\n            if (event.angleDelta.y < 0)\n                Hyprland.dispatch(`workspace r+1`);\n            else if (event.angleDelta.y > 0)\n                Hyprland.dispatch(`workspace r-1`);\n        }\n        acceptedDevices: PointerDevice.Mouse | PointerDevice.TouchPad\n    }\n\n    MouseArea {\n        anchors.fill: parent\n        acceptedButtons: Qt.BackButton\n        onPressed: (event) => {\n            if (event.button === Qt.BackButton) {\n                Hyprland.dispatch(`togglespecialworkspace`);\n            } \n        }\n    }\n\n    // Workspaces - background\n    Grid {\n        z: 1\n        anchors.centerIn: parent\n\n        rowSpacing: 0\n        columnSpacing: 0\n        columns: root.vertical ? 1 : root.workspacesShown\n        rows: root.vertical ? root.workspacesShown : 1\n\n        Repeater {\n            model: root.workspacesShown\n\n            Rectangle {\n                z: 1\n                implicitWidth: workspaceButtonWidth\n                implicitHeight: workspaceButtonWidth\n                radius: (width / 2)\n                property var previousOccupied: (workspaceOccupied[index-1] && !(!activeWindow?.activated && monitor?.activeWorkspace?.id === index))\n                property var rightOccupied: (workspaceOccupied[index+1] && !(!activeWindow?.activated && monitor?.activeWorkspace?.id === index+2))\n                property var radiusPrev: previousOccupied ? 0 : (width / 2)\n                property var radiusNext: rightOccupied ? 0 : (width / 2)\n\n                topLeftRadius: radiusPrev\n                bottomLeftRadius: root.vertical ? radiusNext : radiusPrev\n                topRightRadius: root.vertical ? radiusPrev : radiusNext\n                bottomRightRadius: radiusNext\n                \n                color: ColorUtils.transparentize(Appearance.m3colors.m3secondaryContainer, 0.4)\n                opacity: (workspaceOccupied[index] && !(!activeWindow?.activated && monitor?.activeWorkspace?.id === index+1)) ? 1 : 0\n\n                Behavior on opacity {\n                    animation: Appearance.animation.elementMove.numberAnimation.createObject(this)\n                }\n                Behavior on radiusPrev {\n                    animation: Appearance.animation.elementMove.numberAnimation.createObject(this)\n                }\n\n                Behavior on radiusNext {\n                    animation: Appearance.animation.elementMove.numberAnimation.createObject(this)\n                }\n\n            }\n\n        }\n\n    }\n\n    // Active workspace\n    Rectangle {\n        z: 2\n        // Make active ws indicator, which has a brighter color, smaller to look like it is of the same size as ws occupied highlight\n        radius: Appearance.rounding.full\n        color: Appearance.colors.colPrimary\n\n        anchors {\n            verticalCenter: vertical ? undefined : parent.verticalCenter\n            horizontalCenter: vertical ? parent.horizontalCenter : undefined\n        }\n\n        AnimatedTabIndexPair {\n            id: idxPair\n            index: root.workspaceIndexInGroup\n        }\n        property real indicatorPosition: Math.min(idxPair.idx1, idxPair.idx2) * workspaceButtonWidth + root.activeWorkspaceMargin\n        property real indicatorLength: Math.abs(idxPair.idx1 - idxPair.idx2) * workspaceButtonWidth + workspaceButtonWidth - root.activeWorkspaceMargin * 2\n        property real indicatorThickness: workspaceButtonWidth - root.activeWorkspaceMargin * 2\n\n        x: root.vertical ? null : indicatorPosition\n        implicitWidth: root.vertical ? indicatorThickness : indicatorLength\n        y: root.vertical ? indicatorPosition : null\n        implicitHeight: root.vertical ? indicatorLength : indicatorThickness\n\n    }\n\n    // Workspaces - numbers\n    Grid {\n        z: 3\n\n        columns: root.vertical ? 1 : root.workspacesShown\n        rows: root.vertical ? root.workspacesShown : 1\n        columnSpacing: 0\n        rowSpacing: 0\n\n        anchors.fill: parent\n\n        Repeater {\n            model: root.workspacesShown\n\n            Button {\n                id: button\n                property int workspaceValue: workspaceGroup * root.workspacesShown + index + 1\n                implicitHeight: vertical ? Appearance.sizes.verticalBarWidth : Appearance.sizes.barHeight\n                implicitWidth: vertical ? Appearance.sizes.verticalBarWidth : Appearance.sizes.verticalBarWidth\n                onPressed: Hyprland.dispatch(`workspace ${workspaceValue}`)\n                width: vertical ? undefined : workspaceButtonWidth\n                height: vertical ? workspaceButtonWidth : undefined\n\n                background: Item {\n                    id: workspaceButtonBackground\n                    implicitWidth: workspaceButtonWidth\n                    implicitHeight: workspaceButtonWidth\n                    property var biggestWindow: HyprlandData.biggestWindowForWorkspace(button.workspaceValue)\n                    property var mainAppIconSource: Quickshell.iconPath(AppSearch.guessIcon(biggestWindow?.class), \"image-missing\")\n\n                    StyledText { // Workspace number text\n                        opacity: root.showNumbers\n                            || ((Config.options?.bar.workspaces.alwaysShowNumbers && (!Config.options?.bar.workspaces.showAppIcons || !workspaceButtonBackground.biggestWindow || root.showNumbers))\n                            || (root.showNumbers && !Config.options?.bar.workspaces.showAppIcons)\n                            )  ? 1 : 0\n                        z: 3\n\n                        anchors.centerIn: parent\n                        horizontalAlignment: Text.AlignHCenter\n                        verticalAlignment: Text.AlignVCenter\n                        font {\n                            pixelSize: Appearance.font.pixelSize.small - ((text.length - 1) * (text !== \"10\") * 2)\n                            family: Config.options?.bar.workspaces.useNerdFont ? Appearance.font.family.iconNerd : defaultFont\n                        }\n                        text: Config.options?.bar.workspaces.numberMap[button.workspaceValue - 1] || button.workspaceValue\n                        elide: Text.ElideRight\n                        color: (monitor?.activeWorkspace?.id == button.workspaceValue) ? \n                            Appearance.m3colors.m3onPrimary : \n                            (workspaceOccupied[index] ? Appearance.m3colors.m3onSecondaryContainer : \n                                Appearance.colors.colOnLayer1Inactive)\n\n                        Behavior on opacity {\n                            animation: Appearance.animation.elementMoveFast.numberAnimation.createObject(this)\n                        }\n                    }\n                    Rectangle { // Dot instead of ws number\n                        id: wsDot\n                        opacity: (Config.options?.bar.workspaces.alwaysShowNumbers\n                            || root.showNumbers\n                            || (Config.options?.bar.workspaces.showAppIcons && workspaceButtonBackground.biggestWindow)\n                            ) ? 0 : 1\n                        visible: opacity > 0\n                        anchors.centerIn: parent\n                        width: workspaceButtonWidth * 0.18\n                        height: width\n                        radius: width / 2\n                        color: (monitor?.activeWorkspace?.id == button.workspaceValue) ? \n                            Appearance.m3colors.m3onPrimary : \n                            (workspaceOccupied[index] ? Appearance.m3colors.m3onSecondaryContainer : \n                                Appearance.colors.colOnLayer1Inactive)\n\n                        Behavior on opacity {\n                            animation: Appearance.animation.elementMoveFast.numberAnimation.createObject(this)\n                        }\n                    }\n                    Item { // Main app icon\n                        anchors.centerIn: parent\n                        width: workspaceButtonWidth\n                        height: workspaceButtonWidth\n                        opacity: !Config.options?.bar.workspaces.showAppIcons ? 0 :\n                            (workspaceButtonBackground.biggestWindow && !root.showNumbers && Config.options?.bar.workspaces.showAppIcons) ? \n                            1 : workspaceButtonBackground.biggestWindow ? workspaceIconOpacityShrinked : 0\n                            visible: opacity > 0\n                        IconImage {\n                            id: mainAppIcon\n                            anchors.bottom: parent.bottom\n                            anchors.right: parent.right\n                            anchors.bottomMargin: (!root.showNumbers && Config.options?.bar.workspaces.showAppIcons) ? \n                                (workspaceButtonWidth - workspaceIconSize) / 2 : workspaceIconMarginShrinked\n                            anchors.rightMargin: (!root.showNumbers && Config.options?.bar.workspaces.showAppIcons) ? \n                                (workspaceButtonWidth - workspaceIconSize) / 2 : workspaceIconMarginShrinked\n\n                            source: workspaceButtonBackground.mainAppIconSource\n                            implicitSize: (!root.showNumbers && Config.options?.bar.workspaces.showAppIcons) ? workspaceIconSize : workspaceIconSizeShrinked\n\n                            Behavior on opacity {\n                                animation: Appearance.animation.elementMoveFast.numberAnimation.createObject(this)\n                            }\n                            Behavior on anchors.bottomMargin {\n                                animation: Appearance.animation.elementMoveFast.numberAnimation.createObject(this)\n                            }\n                            Behavior on anchors.rightMargin {\n                                animation: Appearance.animation.elementMoveFast.numberAnimation.createObject(this)\n                            }\n                            Behavior on implicitSize {\n                                animation: Appearance.animation.elementMoveFast.numberAnimation.createObject(this)\n                            }\n                        }\n\n                        Loader {\n                            active: Config.options.bar.workspaces.monochromeIcons\n                            anchors.fill: mainAppIcon\n                            sourceComponent: Item {\n                                Desaturate {\n                                    id: desaturatedIcon\n                                    visible: false // There's already color overlay\n                                    anchors.fill: parent\n                                    source: mainAppIcon\n                                    desaturation: 0.8\n                                }\n                                ColorOverlay {\n                                    anchors.fill: desaturatedIcon\n                                    source: desaturatedIcon\n                                    color: ColorUtils.transparentize(wsDot.color, 0.9)\n                                }\n                            }\n                        }\n                    }\n                }\n                \n\n            }\n\n        }\n\n    }\n\n}\n","epoch":8,"telemetryInfo":{}}]],"operations":[{"type":"textEdit","uri":{"$mid":1,"fsPath":"/home/truonglangquan/.config/quickshell/ii/modules/ii/bar/Workspaces.qml","external":"file:///home/truonglangquan/.config/quickshell/ii/modules/ii/bar/Workspaces.qml","path":"/home/truonglangquan/.config/quickshell/ii/modules/ii/bar/Workspaces.qml","scheme":"file"},"requestId":"request_25ef19fe-1f6b-40e7-ab33-fcb7208e7df7","epoch":5,"edits":[{"text":" {\n            left: root.vertical ? undefined : parent.left\n            top: root.vertical ? parent.top : undefined\n            verticalCenter: root.vertical ? undefined : parent.verticalCenter\n            horizontalCenter: root.vertical ? parent.horizontalCenter : undefined\n        }","range":{"startLineNumber":110,"startColumn":16,"endLineNumber":110,"endColumn":33}}]},{"type":"textEdit","uri":{"$mid":1,"fsPath":"/home/truonglangquan/.config/quickshell/ii/modules/ii/bar/Workspaces.qml","external":"file:///home/truonglangquan/.config/quickshell/ii/modules/ii/bar/Workspaces.qml","path":"/home/truonglangquan/.config/quickshell/ii/modules/ii/bar/Workspaces.qml","scheme":"file"},"requestId":"request_bb82dfcb-9669-4f6f-a808-5be3d710c4e0","epoch":9,"edits":[{"text":"left: root.vertical ? undefined : parent.left\n            top: root.vertical ? parent.top","range":{"startLineNumber":163,"startColumn":13,"endLineNumber":164,"endColumn":65}}]}],"epochCounter":10},"recentSnapshot":{"entries":[{"resource":"file:///home/truonglangquan/.config/quickshell/ii/modules/ii/bar/Workspaces.qml","languageId":"qml","originalHash":"25be8e5","currentHash":"25be8e5","state":2,"snapshotUri":"chat-editing-snapshot-text-model:/home/truonglangquan/.config/quickshell/ii/modules/ii/bar/Workspaces.qml?%7B%22session%22%3A%7B%22%24mid%22%3A1%2C%22external%22%3A%22vscode-chat-session%3A%2F%2Flocal%2FMDUwYzExN2MtYzU4OS00MDBkLTg0NTktNzZjNjljOGE1ZDk3%22%2C%22path%22%3A%22%2FMDUwYzExN2MtYzU4OS00MDBkLTg0NTktNzZjNjljOGE1ZDk3%22%2C%22scheme%22%3A%22vscode-chat-session%22%2C%22authority%22%3A%22local%22%7D%2C%22requestId%22%3A%22%22%2C%22undoStop%22%3A%22%22%7D","telemetryInfo":{"requestId":"request_bb82dfcb-9669-4f6f-a808-5be3d710c4e0","agentId":"github.copilot.editsAgent","modelId":"copilot/auto","modeId":"agent"}}]}}