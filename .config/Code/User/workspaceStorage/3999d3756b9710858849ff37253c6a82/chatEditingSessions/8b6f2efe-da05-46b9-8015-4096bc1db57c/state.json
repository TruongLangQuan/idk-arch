{"version":2,"initialFileContents":[["file:///home/truonglangquan/.config/quickshell/ii/modules/ii/background/widgets/visualizer/VisualizerWidget.qml","1674803"],["file:///home/truonglangquan/.config/quickshell/ii/modules/ii/background/Background.qml","153db81"],["file:///home/truonglangquan/.config/quickshell/ii/modules/common/Appearance.qml","a34792a"]],"timeline":{"checkpoints":[{"checkpointId":"6a53d8f3-d7b3-4349-bac7-9285435391d0","epoch":0,"label":"Initial State","description":"Starting point before any edits"},{"checkpointId":"3862d51c-39bf-42ac-ba26-31c5825ac3be","requestId":"request_396989ed-b04e-4b4c-9293-fb945c442003","epoch":3,"label":"Request request_396989ed-b04e-4b4c-9293-fb945c442003"},{"checkpointId":"5e3dceff-c3a5-4ae2-936c-7bb448e36a03","requestId":"request_22aa09d8-6006-4406-b1fd-706b30850bf4","epoch":4,"label":"Request request_22aa09d8-6006-4406-b1fd-706b30850bf4"},{"checkpointId":"00ea2704-6272-4e02-b1fa-35b3a6355924","requestId":"request_36652861-fd15-443a-acb2-c77bf9c609e4","epoch":5,"label":"Request request_36652861-fd15-443a-acb2-c77bf9c609e4"},{"checkpointId":"478fed5b-cf9c-42a7-a768-ea0ee416dff4","requestId":"request_36652861-fd15-443a-acb2-c77bf9c609e4","undoStopId":"3a58202e-e8b7-450e-a279-19a305fafd51","epoch":6,"label":"Request request_36652861-fd15-443a-acb2-c77bf9c609e4 - Stop 3a58202e-e8b7-450e-a279-19a305fafd51"},{"checkpointId":"300e1260-cb8c-4b20-a5fe-be27cc78be54","requestId":"request_36652861-fd15-443a-acb2-c77bf9c609e4","undoStopId":"695b7fce-10df-4470-b562-b79e2c1a194c","epoch":9,"label":"Request request_36652861-fd15-443a-acb2-c77bf9c609e4 - Stop 695b7fce-10df-4470-b562-b79e2c1a194c"},{"checkpointId":"4fb36a91-8306-4d08-abbe-07592e18d854","requestId":"request_cb2be037-f9b8-4207-97ab-431ca9a30b46","epoch":12,"label":"Request request_cb2be037-f9b8-4207-97ab-431ca9a30b46"},{"checkpointId":"a6a6d761-ffed-44a2-abb0-898ae560d40a","requestId":"request_cb2be037-f9b8-4207-97ab-431ca9a30b46","undoStopId":"06cd340e-73ae-4838-a4fc-5a1454d2c2e1","epoch":13,"label":"Request request_cb2be037-f9b8-4207-97ab-431ca9a30b46 - Stop 06cd340e-73ae-4838-a4fc-5a1454d2c2e1"},{"checkpointId":"8b4ad9fa-1bfa-4419-be29-8257b429ea88","requestId":"request_12acbd17-10e4-4453-b311-7bf9fa6fcc09","epoch":16,"label":"Request request_12acbd17-10e4-4453-b311-7bf9fa6fcc09"},{"checkpointId":"07dc8eac-5f6c-4836-aea0-d592d60ce7c1","requestId":"request_12acbd17-10e4-4453-b311-7bf9fa6fcc09","undoStopId":"5922a1eb-c97f-44f3-960e-5ced60e7e572","epoch":17,"label":"Request request_12acbd17-10e4-4453-b311-7bf9fa6fcc09 - Stop 5922a1eb-c97f-44f3-960e-5ced60e7e572"},{"checkpointId":"39f6ed6c-9501-4c13-8495-7e989f9e4694","requestId":"request_2e7ef009-6f26-4986-a4c9-562bf3b5ca6e","epoch":20,"label":"Request request_2e7ef009-6f26-4986-a4c9-562bf3b5ca6e"},{"checkpointId":"34e850bd-ef56-4621-beb8-3497313ba4a5","requestId":"request_2e7ef009-6f26-4986-a4c9-562bf3b5ca6e","undoStopId":"6c7004bf-a328-4706-9cc3-e6d84cb93200","epoch":21,"label":"Request request_2e7ef009-6f26-4986-a4c9-562bf3b5ca6e - Stop 6c7004bf-a328-4706-9cc3-e6d84cb93200"},{"checkpointId":"1ae6ca6b-1c63-4914-a44a-e2e8e6c6f05f","requestId":"request_cb7a93be-25df-4726-8402-ccd1f79bce94","epoch":24,"label":"Request request_cb7a93be-25df-4726-8402-ccd1f79bce94"},{"checkpointId":"e5b33c97-ea80-49ba-b9c6-a6d35c06a23f","requestId":"request_cb7a93be-25df-4726-8402-ccd1f79bce94","undoStopId":"09584d0d-f306-45c9-9433-4605331a55d2","epoch":25,"label":"Request request_cb7a93be-25df-4726-8402-ccd1f79bce94 - Stop 09584d0d-f306-45c9-9433-4605331a55d2"},{"checkpointId":"3f5df4e2-8bdc-4138-9b77-670ac3165d35","requestId":"request_c4e9b9e4-4790-4a9b-a584-a0746d3f8185","epoch":28,"label":"Request request_c4e9b9e4-4790-4a9b-a584-a0746d3f8185"},{"checkpointId":"ba2bd0a8-aaa2-4f9a-b943-00b9e870d75d","requestId":"request_c4e9b9e4-4790-4a9b-a584-a0746d3f8185","undoStopId":"ba073b37-bb38-4584-ba2b-697a9e45b454","epoch":29,"label":"Request request_c4e9b9e4-4790-4a9b-a584-a0746d3f8185 - Stop ba073b37-bb38-4584-ba2b-697a9e45b454"},{"checkpointId":"5f64f95f-c500-45a5-a19f-28081f3d6029","requestId":"request_6d3e858d-dd3c-4187-a2fd-5891ea8904c9","epoch":32,"label":"Request request_6d3e858d-dd3c-4187-a2fd-5891ea8904c9"},{"checkpointId":"48b42bb3-dd06-45e0-849f-08e6c41cd9da","requestId":"request_6d3e858d-dd3c-4187-a2fd-5891ea8904c9","undoStopId":"c4d9b5ab-eda9-46f7-84ad-030b17a482a7","epoch":33,"label":"Request request_6d3e858d-dd3c-4187-a2fd-5891ea8904c9 - Stop c4d9b5ab-eda9-46f7-84ad-030b17a482a7"}],"currentEpoch":36,"fileBaselines":[["file:///home/truonglangquan/.config/quickshell/ii/modules/ii/background/widgets/visualizer/VisualizerWidget.qml::request_36652861-fd15-443a-acb2-c77bf9c609e4",{"uri":{"$mid":1,"fsPath":"/home/truonglangquan/.config/quickshell/ii/modules/ii/background/widgets/visualizer/VisualizerWidget.qml","external":"file:///home/truonglangquan/.config/quickshell/ii/modules/ii/background/widgets/visualizer/VisualizerWidget.qml","path":"/home/truonglangquan/.config/quickshell/ii/modules/ii/background/widgets/visualizer/VisualizerWidget.qml","scheme":"file"},"requestId":"request_36652861-fd15-443a-acb2-c77bf9c609e4","content":"import qs.services\nimport qs.modules.common\nimport qs.modules.common.widgets\nimport QtQuick\nimport QtQuick.Effects\n\nCanvas { // Visualizer\n    id: root\n    property list<var> points\n    property list<var> smoothPoints\n    property real maxVisualizerValue: 1000\n    property int smoothing: 2\n    property bool live: true\n    property color color: Appearance.m3colors.m3primary\n\n    onPointsChanged: () => {\n        root.requestPaint()\n    }\n\n    anchors.fill: parent\n    onPaint: {\n        var ctx = getContext(\"2d\");\n        ctx.clearRect(0, 0, width, height);\n\n        var points = root.points;\n        var maxVal = root.maxVisualizerValue || 1;\n        var h = height;\n        var w = width;\n        var n = points.length;\n        if (n < 2) return;\n\n        // Smoothing: simple moving average (optional)\n        var smoothWindow = root.smoothing; // adjust for more/less smoothing\n        root.smoothPoints = [];\n        for (var i = 0; i < n; ++i) {\n            var sum = 0, count = 0;\n            for (var j = -smoothWindow; j <= smoothWindow; ++j) {\n                var idx = Math.max(0, Math.min(n - 1, i + j));\n                sum += points[idx];\n                count++;\n            }\n            root.smoothPoints.push(sum / count);\n        }\n        if (!root.live) root.smoothPoints.fill(0); // If not playing, show no points\n\n        ctx.beginPath();\n        ctx.moveTo(0, h);\n        for (var i = 0; i < n; ++i) {\n            var x = i * w / (n - 1);\n            var y = h - (root.smoothPoints[i] / maxVal) * h;\n            ctx.lineTo(x, y);\n        }\n        ctx.lineTo(w, h);\n        ctx.closePath();\n\n        ctx.fillStyle = Qt.rgba(\n            root.color.r,\n            root.color.g,\n            root.color.b,\n            0.15\n        );\n        ctx.fill();\n    }\n\n    layer.enabled: true\n    layer.effect: MultiEffect { // Blur a bit to obscure away the points\n        source: root\n        saturation: 0.2\n        blurEnabled: true\n        blurMax: 7\n        blur: 1\n    }\n}","epoch":7,"telemetryInfo":{}}],["file:///home/truonglangquan/.config/quickshell/ii/modules/ii/background/Background.qml::request_36652861-fd15-443a-acb2-c77bf9c609e4",{"uri":{"$mid":1,"fsPath":"/home/truonglangquan/.config/quickshell/ii/modules/ii/background/Background.qml","external":"file:///home/truonglangquan/.config/quickshell/ii/modules/ii/background/Background.qml","path":"/home/truonglangquan/.config/quickshell/ii/modules/ii/background/Background.qml","scheme":"file"},"requestId":"request_36652861-fd15-443a-acb2-c77bf9c609e4","content":"pragma ComponentBehavior: Bound\n\nimport qs\nimport qs.services\nimport qs.modules.common\nimport qs.modules.common.widgets\nimport qs.modules.common.widgets.widgetCanvas\nimport qs.modules.common.functions as CF\nimport QtQuick\nimport QtQuick.Layouts\nimport Qt5Compat.GraphicalEffects\nimport Quickshell\nimport Quickshell.Io\nimport Quickshell.Wayland\nimport Quickshell.Hyprland\n\nimport qs.modules.ii.background.widgets\nimport qs.modules.ii.background.widgets.clock\nimport qs.modules.ii.background.widgets.weather\nimport qs.modules.ii.background.widgets.visualizer\n\nVariants {\n    id: root\n    model: Quickshell.screens\n\n    PanelWindow {\n        id: bgRoot\n\n        required property var modelData\n\n        // Hide when fullscreen\n        property list<HyprlandWorkspace> workspacesForMonitor: Hyprland.workspaces.values.filter(workspace => workspace.monitor && workspace.monitor.name == monitor.name)\n        property var activeWorkspaceWithFullscreen: workspacesForMonitor.filter(workspace => ((workspace.toplevels.values.filter(window => window.wayland?.fullscreen)[0] != undefined) && workspace.active))[0]\n        visible: GlobalStates.screenLocked || (!(activeWorkspaceWithFullscreen != undefined)) || !Config?.options.background.hideWhenFullscreen\n\n        // Workspaces\n        property HyprlandMonitor monitor: Hyprland.monitorFor(modelData)\n        property list<var> relevantWindows: HyprlandData.windowList.filter(win => win.monitor == monitor?.id && win.workspace.id >= 0).sort((a, b) => a.workspace.id - b.workspace.id)\n        property int firstWorkspaceId: relevantWindows[0]?.workspace.id || 1\n        property int lastWorkspaceId: relevantWindows[relevantWindows.length - 1]?.workspace.id || 10\n        // Wallpaper\n        property bool wallpaperIsVideo: Config.options.background.wallpaperPath.endsWith(\".mp4\") || Config.options.background.wallpaperPath.endsWith(\".webm\") || Config.options.background.wallpaperPath.endsWith(\".mkv\") || Config.options.background.wallpaperPath.endsWith(\".avi\") || Config.options.background.wallpaperPath.endsWith(\".mov\")\n        property string wallpaperPath: wallpaperIsVideo ? Config.options.background.thumbnailPath : Config.options.background.wallpaperPath\n        property bool wallpaperSafetyTriggered: {\n            const enabled = Config.options.workSafety.enable.wallpaper;\n            const sensitiveWallpaper = (CF.StringUtils.stringListContainsSubstring(wallpaperPath.toLowerCase(), Config.options.workSafety.triggerCondition.fileKeywords));\n            const sensitiveNetwork = (CF.StringUtils.stringListContainsSubstring(Network.networkName.toLowerCase(), Config.options.workSafety.triggerCondition.networkNameKeywords));\n            return enabled && sensitiveWallpaper && sensitiveNetwork;\n        }\n        property real wallpaperToScreenRatio: Math.min(wallpaperWidth / screen.width, wallpaperHeight / screen.height)\n        property real preferredWallpaperScale: Config.options.background.parallax.workspaceZoom\n        property real effectiveWallpaperScale: 1 // Some reasonable init value, to be updated\n        property int wallpaperWidth: modelData.width // Some reasonable init value, to be updated\n        property int wallpaperHeight: modelData.height // Some reasonable init value, to be updated\n        property real movableXSpace: ((wallpaperWidth / wallpaperToScreenRatio * effectiveWallpaperScale) - screen.width) / 2\n        property real movableYSpace: ((wallpaperHeight / wallpaperToScreenRatio * effectiveWallpaperScale) - screen.height) / 2\n        readonly property bool verticalParallax: (Config.options.background.parallax.autoVertical && wallpaperHeight > wallpaperWidth) || Config.options.background.parallax.vertical\n        // Colors\n        property bool shouldBlur: (GlobalStates.screenLocked && Config.options.lock.blur.enable)\n        property color dominantColor: Appearance.colors.colPrimary // Default, to be changed\n        property bool dominantColorIsDark: dominantColor.hslLightness < 0.5\n        property color colText: {\n            if (wallpaperSafetyTriggered)\n                return CF.ColorUtils.mix(Appearance.colors.colOnLayer0, Appearance.colors.colPrimary, 0.75);\n            return (GlobalStates.screenLocked && shouldBlur) ? Appearance.colors.colOnLayer0 : CF.ColorUtils.colorWithLightness(Appearance.colors.colPrimary, (dominantColorIsDark ? 0.8 : 0.12));\n        }\n        Behavior on colText {\n            animation: Appearance.animation.elementMoveFast.colorAnimation.createObject(this)\n        }\n\n        // Layer props\n        screen: modelData\n        exclusionMode: ExclusionMode.Ignore\n        WlrLayershell.layer: (GlobalStates.screenLocked && !scaleAnim.running) ? WlrLayer.Overlay : WlrLayer.Bottom\n        // WlrLayershell.layer: WlrLayer.Bottom\n        WlrLayershell.namespace: \"quickshell:background\"\n        anchors {\n            top: true\n            bottom: true\n            left: true\n            right: true\n        }\n        color: {\n            if (!bgRoot.wallpaperSafetyTriggered || bgRoot.wallpaperIsVideo)\n                return \"transparent\";\n            return CF.ColorUtils.mix(Appearance.colors.colLayer0, Appearance.colors.colPrimary, 0.75);\n        }\n        Behavior on color {\n            animation: Appearance.animation.elementMoveFast.colorAnimation.createObject(this)\n        }\n\n        onWallpaperPathChanged: {\n            bgRoot.updateZoomScale();\n            // Clock position gets updated after zoom scale is updated\n        }\n\n        // Wallpaper zoom scale\n        function updateZoomScale() {\n            getWallpaperSizeProc.path = bgRoot.wallpaperPath;\n            getWallpaperSizeProc.running = true;\n        }\n        Process {\n            id: getWallpaperSizeProc\n            property string path: bgRoot.wallpaperPath\n            command: [\"magick\", \"identify\", \"-format\", \"%w %h\", path]\n            stdout: StdioCollector {\n                id: wallpaperSizeOutputCollector\n                onStreamFinished: {\n                    const output = wallpaperSizeOutputCollector.text;\n                    const [width, height] = output.split(\" \").map(Number);\n                    const [screenWidth, screenHeight] = [bgRoot.screen.width, bgRoot.screen.height];\n                    bgRoot.wallpaperWidth = width;\n                    bgRoot.wallpaperHeight = height;\n\n                    if (width <= screenWidth || height <= screenHeight) {\n                        // Undersized/perfectly sized wallpapers\n                        bgRoot.effectiveWallpaperScale = Math.max(screenWidth / width, screenHeight / height);\n                    } else {\n                        // Oversized = can be zoomed for parallax, yay\n                        bgRoot.effectiveWallpaperScale = Math.min(bgRoot.preferredWallpaperScale, width / screenWidth, height / screenHeight);\n                    }\n                }\n            }\n        }\n\n        Item {\n            anchors.fill: parent\n            clip: true\n\n            // Wallpaper\n            StyledImage {\n                id: wallpaper\n                visible: opacity > 0 && !blurLoader.active\n                opacity: (status === Image.Ready && !bgRoot.wallpaperIsVideo) ? 1 : 0\n                cache: false\n                smooth: false\n                // Range = groups that workspaces span on\n                property int chunkSize: Config?.options.bar.workspaces.shown ?? 10\n                property int lower: Math.floor(bgRoot.firstWorkspaceId / chunkSize) * chunkSize\n                property int upper: Math.ceil(bgRoot.lastWorkspaceId / chunkSize) * chunkSize\n                property int range: upper - lower\n                property real valueX: {\n                    let result = 0.5;\n                    if (Config.options.background.parallax.enableWorkspace && !bgRoot.verticalParallax) {\n                        result = ((bgRoot.monitor.activeWorkspace?.id - lower) / range);\n                    }\n                    if (Config.options.background.parallax.enableSidebar) {\n                        result += (0.15 * GlobalStates.sidebarRightOpen - 0.15 * GlobalStates.sidebarLeftOpen);\n                    }\n                    return result;\n                }\n                property real valueY: {\n                    let result = 0.5;\n                    if (Config.options.background.parallax.enableWorkspace && bgRoot.verticalParallax) {\n                        result = ((bgRoot.monitor.activeWorkspace?.id - lower) / range);\n                    }\n                    return result;\n                }\n                property real effectiveValueX: Math.max(0, Math.min(1, valueX))\n                property real effectiveValueY: Math.max(0, Math.min(1, valueY))\n                x: -(bgRoot.movableXSpace) - (effectiveValueX - 0.5) * 2 * bgRoot.movableXSpace\n                y: -(bgRoot.movableYSpace) - (effectiveValueY - 0.5) * 2 * bgRoot.movableYSpace\n                source: bgRoot.wallpaperSafetyTriggered ? \"\" : bgRoot.wallpaperPath\n                fillMode: Image.PreserveAspectCrop\n                Behavior on x {\n                    NumberAnimation {\n                        duration: 600\n                        easing.type: Easing.OutCubic\n                    }\n                }\n                Behavior on y {\n                    NumberAnimation {\n                        duration: 600\n                        easing.type: Easing.OutCubic\n                    }\n                }\n                sourceSize {\n                    width: bgRoot.screen.width * bgRoot.effectiveWallpaperScale * bgRoot.monitor.scale\n                    height: bgRoot.screen.height * bgRoot.effectiveWallpaperScale * bgRoot.monitor.scale\n                }\n                width: bgRoot.wallpaperWidth / bgRoot.wallpaperToScreenRatio * bgRoot.effectiveWallpaperScale\n                height: bgRoot.wallpaperHeight / bgRoot.wallpaperToScreenRatio * bgRoot.effectiveWallpaperScale\n            }\n\n            Loader {\n                id: blurLoader\n                active: Config.options.lock.blur.enable && (GlobalStates.screenLocked || scaleAnim.running)\n                anchors.fill: wallpaper\n                scale: GlobalStates.screenLocked ? Config.options.lock.blur.extraZoom : 1\n                Behavior on scale {\n                    NumberAnimation {\n                        id: scaleAnim\n                        duration: 400\n                        easing.type: Easing.BezierSpline\n                        easing.bezierCurve: Appearance.animationCurves.expressiveDefaultSpatial\n                    }\n                }\n                sourceComponent: GaussianBlur {\n                    source: wallpaper\n                    radius: GlobalStates.screenLocked ? Config.options.lock.blur.radius : 0\n                    samples: radius * 2 + 1\n\n                    Rectangle {\n                        opacity: GlobalStates.screenLocked ? 1 : 0\n                        anchors.fill: parent\n                        color: CF.ColorUtils.transparentize(Appearance.colors.colLayer0, 0.7)\n                    }\n                }\n            }\n\n            WidgetCanvas {\n                id: widgetCanvas\n                anchors {\n                    left: wallpaper.left\n                    right: wallpaper.right\n                    top: wallpaper.top\n                    bottom: wallpaper.bottom\n                    horizontalCenter: undefined\n                    verticalCenter: undefined\n                    readonly property real parallaxFactor: Config.options.background.parallax.widgetsFactor\n                    leftMargin: {\n                        const xOnWallpaper = bgRoot.movableXSpace;\n                        const extraMove = (wallpaper.effectiveValueX * 2 * bgRoot.movableXSpace) * (parallaxFactor - 1);\n                        return xOnWallpaper - extraMove;\n                    }\n                    topMargin: {\n                        const yOnWallpaper = bgRoot.movableYSpace;\n                        const extraMove = (wallpaper.effectiveValueY * 2 * bgRoot.movableYSpace) * (parallaxFactor - 1);\n                        return yOnWallpaper - extraMove;\n                    }\n                    Behavior on leftMargin {\n                        animation: Appearance.animation.elementMove.numberAnimation.createObject(this)\n                    }\n                    Behavior on topMargin {\n                        animation: Appearance.animation.elementMove.numberAnimation.createObject(this)\n                    }\n                }\n                width: wallpaper.width\n                height: wallpaper.height\n                states: State {\n                    name: \"centered\"\n                    when: GlobalStates.screenLocked || bgRoot.wallpaperSafetyTriggered\n                    PropertyChanges {\n                        target: widgetCanvas\n                        width: parent.width\n                        height: parent.height\n                    }\n                    AnchorChanges {\n                        target: widgetCanvas\n                        anchors {\n                            left: undefined\n                            right: undefined\n                            top: undefined\n                            bottom: undefined\n                            horizontalCenter: parent.horizontalCenter\n                            verticalCenter: parent.verticalCenter\n                        }\n                    }\n                }\n                transitions: Transition {\n                    PropertyAnimation {\n                        properties: \"width,height\"\n                        duration: Appearance.animation.elementMove.duration\n                        easing.type: Appearance.animation.elementMove.type\n                        easing.bezierCurve: Appearance.animation.elementMove.bezierCurve\n                    }\n                    AnchorAnimation {\n                        duration: Appearance.animation.elementMove.duration\n                        easing.type: Appearance.animation.elementMove.type\n                        easing.bezierCurve: Appearance.animation.elementMove.bezierCurve\n                    }\n                }\n\n                FadeLoader {\n                    shown: Config.options.background.widgets.weather.enable\n                    sourceComponent: WeatherWidget {\n                        screenWidth: bgRoot.screen.width\n                        screenHeight: bgRoot.screen.height\n                        scaledScreenWidth: bgRoot.screen.width / bgRoot.effectiveWallpaperScale\n                        scaledScreenHeight: bgRoot.screen.height / bgRoot.effectiveWallpaperScale\n                        wallpaperScale: bgRoot.effectiveWallpaperScale\n                    }\n                }\n\n                FadeLoader {\n                    shown: Config.options.background.widgets.clock.enable\n                    sourceComponent: ClockWidget {\n                        screenWidth: bgRoot.screen.width\n                        screenHeight: bgRoot.screen.height\n                        scaledScreenWidth: bgRoot.screen.width / bgRoot.effectiveWallpaperScale\n                        scaledScreenHeight: bgRoot.screen.height / bgRoot.effectiveWallpaperScale\n                        wallpaperScale: bgRoot.effectiveWallpaperScale\n                        wallpaperSafetyTriggered: bgRoot.wallpaperSafetyTriggered\n                    }\n                }\n\n                FadeLoader {\n                    shown: Config.options.background.widgets.wavevisualizer.enable\n                    sourceComponent: VisualizerWidget {\n                        screenWidth: bgRoot.screen.width\n                        screenHeight: bgRoot.screen.height\n                        scaledScreenWidth: bgRoot.screen.width / bgRoot.effectiveWallpaperScale\n                        scaledScreenHeight: bgRoot.screen.height / bgRoot.effectiveWallpaperScale\n                        wallpaperScale: bgRoot.effectiveWallpaperScale\n                    }\n                }\n            }\n        }\n    }\n}\n","epoch":10,"telemetryInfo":{}}],["file:///home/truonglangquan/.config/quickshell/ii/modules/ii/background/widgets/visualizer/VisualizerWidget.qml::request_cb2be037-f9b8-4207-97ab-431ca9a30b46",{"uri":{"$mid":1,"fsPath":"/home/truonglangquan/.config/quickshell/ii/modules/ii/background/widgets/visualizer/VisualizerWidget.qml","external":"file:///home/truonglangquan/.config/quickshell/ii/modules/ii/background/widgets/visualizer/VisualizerWidget.qml","path":"/home/truonglangquan/.config/quickshell/ii/modules/ii/background/widgets/visualizer/VisualizerWidget.qml","scheme":"file"},"requestId":"request_cb2be037-f9b8-4207-97ab-431ca9a30b46","content":"import qs.services\nimport qs.modules.common\nimport qs.modules.common.widgets\nimport QtQuick\nimport QtQuick.Effects\nimport qs.services\nimport qs.modules.common\nimport qs.modules.common.widgets\nimport qs.modules.ii.background.widgets\n\nAbstractBackgroundWidget {\n    property real maxVisualizerValue: 1000\n    configEntryName: \"wavevisualizer\"\n\n    property int smoothing: 2\n    property bool live: true\n    property color color: Appearance.m3colors.m3primary\n\n    onPointsChanged: () => {\n        root.requestPaint()\n    }\n\n        canvas.requestPaint()\n    onPaint: {\n        var ctx = getContext(\"2d\");\n    implicitHeight: 200\n    implicitWidth: 200\n        var points = root.points;\n    Canvas {\n        id: canvas\n        anchors.fill: parent\n        onPaint: {\n        var maxVal = root.maxVisualizerValue || 1;\n        var h = height;\n        var w = width;\n        var n = points.length;\n        if (n < 2) return;\n\n        // Smoothing: simple moving average (optional)\n        var smoothWindow = root.smoothing; // adjust for more/less smoothing\n        root.smoothPoints = [];\n        for (var i = 0; i < n; ++i) {\n            var sum = 0, count = 0;\n            for (var j = -smoothWindow; j <= smoothWindow; ++j) {\n                var idx = Math.max(0, Math.min(n - 1, i + j));\n                sum += points[idx];\n                count++;\n            }\n            root.smoothPoints.push(sum / count);\n        }\n        if (!root.live) root.smoothPoints.fill(0); // If not playing, show no points\n\n        ctx.beginPath();\n        ctx.moveTo(0, h);\n        for (var i = 0; i < n; ++i) {\n            var x = i * w / (n - 1);\n            var y = h - (root.smoothPoints[i] / maxVal) * h;\n            ctx.lineTo(x, y);\n        }\n        ctx.lineTo(w, h);\n        ctx.closePath();\n\n        ctx.fillStyle = Qt.rgba(\n            root.color.r,\n            root.color.g,\n            root.color.b,\n            0.15\n        );\n        ctx.fill();\n    }\n\n    layer.enabled: true\n    layer.effect: MultiEffect { // Blur a bit to obscure away the points\n        }\n        source: root\n        saturation: 0.2\n    layer.enabled: true\n    layer.effect: MultiEffect { // Blur a bit to obscure away the points\n        source: canvas\n        saturation: 0.2\n        blurEnabled: true\n        blurMax: 7\n        blur: 1","epoch":14,"telemetryInfo":{}}],["file:///home/truonglangquan/.config/quickshell/ii/modules/ii/background/widgets/visualizer/VisualizerWidget.qml::request_12acbd17-10e4-4453-b311-7bf9fa6fcc09",{"uri":{"$mid":1,"fsPath":"/home/truonglangquan/.config/quickshell/ii/modules/ii/background/widgets/visualizer/VisualizerWidget.qml","external":"file:///home/truonglangquan/.config/quickshell/ii/modules/ii/background/widgets/visualizer/VisualizerWidget.qml","path":"/home/truonglangquan/.config/quickshell/ii/modules/ii/background/widgets/visualizer/VisualizerWidget.qml","scheme":"file"},"requestId":"request_12acbd17-10e4-4453-b311-7bf9fa6fcc09","content":"pragma ComponentBehavior: Bound\n\nimport qs.components\nimport qs.services\nimport qs.config\nimport Caelestia.Services\nimport Quickshell\nimport Quickshell.Widgets\nimport QtQuick\nimport QtQuick.Effects\n\nItem {\n    id: root\n\n    required property ShellScreen screen\n    required property Wallpaper wallpaper\n\n    readonly property bool shouldBeActive: Config.background.visualiser.enabled && (!Config.background.visualiser.autoHide || Hypr.monitorFor(screen).activeWorkspace.toplevels.values.every(t => t.lastIpcObject.floating))\n    property real offset: shouldBeActive ? 0 : screen.height * 0.2\n\n    opacity: shouldBeActive ? 1 : 0\n\n    Loader {\n        anchors.fill: parent\n        active: root.opacity > 0 && Config.background.visualiser.blur\n\n        sourceComponent: MultiEffect {\n            source: root.wallpaper\n            maskSource: wrapper\n            maskEnabled: true\n            blurEnabled: true\n            blur: 1\n            blurMax: 32\n            autoPaddingEnabled: false\n        }\n    }\n\n    Item {\n        id: wrapper\n\n        anchors.fill: parent\n        layer.enabled: true\n\n        Loader {\n            anchors.fill: parent\n            anchors.topMargin: root.offset\n            anchors.bottomMargin: -root.offset\n\n            active: root.opacity > 0\n\n            sourceComponent: Item {\n                ServiceRef {\n                    service: Audio.cava\n                }\n\n                Item {\n                    id: content\n\n                    anchors.fill: parent\n                    anchors.margins: Config.border.thickness\n                    anchors.leftMargin: Visibilities.bars.get(root.screen).exclusiveZone + Appearance.spacing.small * Config.background.visualiser.spacing\n\n                    Side {\n                        content: content\n                    }\n                    Side {\n                        content: content\n                        isRight: true\n                    }\n\n                    Behavior on anchors.leftMargin {\n                        Anim {}\n                    }\n                }\n            }\n        }\n    }\n\n    Behavior on offset {\n        Anim {}\n    }\n\n    Behavior on opacity {\n        Anim {}\n    }\n\n    component Side: Repeater {\n        id: side\n\n        required property Item content\n        property bool isRight\n\n        model: Config.services.visualiserBars\n\n        ClippingRectangle {\n            id: bar\n\n            required property int modelData\n            property real value: Math.max(0, Math.min(1, Audio.cava.values[side.isRight ? modelData : side.count - modelData - 1]))\n\n            clip: true\n\n            x: modelData * ((side.content.width * 0.4) / Config.services.visualiserBars) + (side.isRight ? side.content.width * 0.6 : 0)\n            implicitWidth: (side.content.width * 0.4) / Config.services.visualiserBars - Appearance.spacing.small * Config.background.visualiser.spacing\n\n            y: side.content.height - height\n            implicitHeight: bar.value * side.content.height * 0.4\n\n            color: \"transparent\"\n            topLeftRadius: Appearance.rounding.small * Config.background.visualiser.rounding\n            topRightRadius: Appearance.rounding.small * Config.background.visualiser.rounding\n\n            Rectangle {\n                topLeftRadius: parent.topLeftRadius\n                topRightRadius: parent.topRightRadius\n\n                gradient: Gradient {\n                    orientation: Gradient.Vertical\n\n                    GradientStop {\n                        position: 0\n                        color: Qt.alpha(Colours.palette.m3primary, 0.7)\n\n                        Behavior on color {\n                            CAnim {}\n                        }\n                    }\n                    GradientStop {\n                        position: 1\n                        color: Qt.alpha(Colours.palette.m3inversePrimary, 0.7)\n\n                        Behavior on color {\n                            CAnim {}\n                        }\n                    }\n                }\n\n                anchors.left: parent.left\n                anchors.right: parent.right\n                y: parent.height - height\n                implicitHeight: side.content.height * 0.4\n            }\n\n            Behavior on value {\n                Anim {\n                    duration: Appearance.anim.durations.small\n                }\n            }\n        }\n    }\n}","epoch":18,"telemetryInfo":{}}],["file:///home/truonglangquan/.config/quickshell/ii/modules/ii/background/widgets/visualizer/VisualizerWidget.qml::request_2e7ef009-6f26-4986-a4c9-562bf3b5ca6e",{"uri":{"$mid":1,"fsPath":"/home/truonglangquan/.config/quickshell/ii/modules/ii/background/widgets/visualizer/VisualizerWidget.qml","external":"file:///home/truonglangquan/.config/quickshell/ii/modules/ii/background/widgets/visualizer/VisualizerWidget.qml","path":"/home/truonglangquan/.config/quickshell/ii/modules/ii/background/widgets/visualizer/VisualizerWidget.qml","scheme":"file"},"requestId":"request_2e7ef009-6f26-4986-a4c9-562bf3b5ca6e","content":"pragma ComponentBehavior: Bound\n\nimport qs.components\nimport qs.services\nimport qs.config\nimport Caelestia.Services\nimport QtQuick 2.15\nimport QtQuick.Effects 1.15\n\nItem {\n    id: root\n\n    // Properties expected by Background.qml when instantiating this widget\n    property int screenWidth: 0\n    property int screenHeight: 0\n    property int scaledScreenWidth: 0\n    property int scaledScreenHeight: 0\n    property real wallpaperScale: 1.0\n\n    // Visualizer-specific properties\n    property var points: []\n    property var smoothPoints: []\n    property real maxVisualizerValue: 1000\n    property int smoothing: 2\n    property bool live: true\n    property color color: \"white\"\n\n    implicitWidth: 300\n    implicitHeight: 200\n\n    onPointsChanged: canvas.requestPaint()\n\n    Canvas {\n        id: canvas\n        anchors.fill: parent\n        renderTarget: Canvas.Image\n        onPaint: {\n            var ctx = getContext(\"2d\");\n            ctx.clearRect(0, 0, width, height);\n\n            var pts = root.points || [];\n            var maxVal = root.maxVisualizerValue || 1;\n            var h = height;\n            var w = width;\n            var n = pts.length;\n            if (n < 2) return;\n\n            var smoothWindow = root.smoothing;\n            root.smoothPoints = [];\n            for (var i = 0; i < n; ++i) {\n                var sum = 0, count = 0;\n                for (var j = -smoothWindow; j <= smoothWindow; ++j) {\n                    var idx = Math.max(0, Math.min(n - 1, i + j));\n                    sum += pts[idx] || 0;\n                    count++;\n                }\n                root.smoothPoints.push(sum / count);\n            }\n            if (!root.live) {\n                for (var k = 0; k < root.smoothPoints.length; ++k) root.smoothPoints[k] = 0;\n            }\n\n            ctx.beginPath();\n            ctx.moveTo(0, h);\n            for (var i = 0; i < n; ++i) {\n                var x = (n === 1) ? w/2 : i * w / (n - 1);\n                var y = h - (root.smoothPoints[i] / maxVal) * h;\n                ctx.lineTo(x, y);\n            }\n            ctx.lineTo(w, h);\n            ctx.closePath();\n\n            // Draw fill\n            ctx.fillStyle = 'rgba(255,255,255,0.12)';\n            try { ctx.fillStyle = Qt.rgba(root.color.r, root.color.g, root.color.b, 0.12); } catch (e) {}\n            ctx.fill();\n        }\n    }\n\n    layer.enabled: true\n    layer.effect: MultiEffect {\n        source: canvas\n        saturation: 0.2\n        blurEnabled: true\n        blurMax: 7\n        blur: 1\n    }\n}\n        required property Item content\n        property bool isRight\n\n        model: Config.services.visualiserBars\n\n        ClippingRectangle {\n            id: bar\n\n            required property int modelData\n            property real value: Math.max(0, Math.min(1, Audio.cava.values[side.isRight ? modelData : side.count - modelData - 1]))\n\n            clip: true\n\n            x: modelData * ((side.content.width * 0.4) / Config.services.visualiserBars) + (side.isRight ? side.content.width * 0.6 : 0)\n            implicitWidth: (side.content.width * 0.4) / Config.services.visualiserBars - Appearance.spacing.small * Config.background.visualiser.spacing\n\n            y: side.content.height - height\n            implicitHeight: bar.value * side.content.height * 0.4\n\n            color: \"transparent\"\n            topLeftRadius: Appearance.rounding.small * Config.background.visualiser.rounding\n            topRightRadius: Appearance.rounding.small * Config.background.visualiser.rounding\n\n            Rectangle {\n                topLeftRadius: parent.topLeftRadius\n                topRightRadius: parent.topRightRadius\n\n                gradient: Gradient {\n                    orientation: Gradient.Vertical\n\n                    GradientStop {\n                        position: 0\n                        color: Qt.alpha(Colours.palette.m3primary, 0.7)\n\n                        Behavior on color {\n                            CAnim {}\n                        }\n                    }\n                    GradientStop {\n                        position: 1\n                        color: Qt.alpha(Colours.palette.m3inversePrimary, 0.7)\n\n                        Behavior on color {\n                            CAnim {}\n                        }\n                    }\n                }\n\n                anchors.left: parent.left\n                anchors.right: parent.right\n                y: parent.height - height\n                implicitHeight: side.content.height * 0.4\n            }\n\n            Behavior on value {\n                Anim {\n                    duration: Appearance.anim.durations.small\n                }\n            }\n        }\n    }\n}","epoch":22,"telemetryInfo":{}}],["file:///home/truonglangquan/.config/quickshell/ii/modules/ii/background/Background.qml::request_cb7a93be-25df-4726-8402-ccd1f79bce94",{"uri":{"$mid":1,"fsPath":"/home/truonglangquan/.config/quickshell/ii/modules/ii/background/Background.qml","external":"file:///home/truonglangquan/.config/quickshell/ii/modules/ii/background/Background.qml","path":"/home/truonglangquan/.config/quickshell/ii/modules/ii/background/Background.qml","scheme":"file"},"requestId":"request_cb7a93be-25df-4726-8402-ccd1f79bce94","content":"pragma ComponentBehavior: Bound\n\nimport qs\nimport qs.services\nimport qs.modules.common\nimport qs.modules.common.widgets\nimport qs.modules.common.widgets.widgetCanvas\nimport qs.modules.common.functions as CF\nimport QtQuick\nimport QtQuick.Layouts\nimport Qt5Compat.GraphicalEffects\nimport Quickshell\nimport Quickshell.Io\nimport Quickshell.Wayland\nimport Quickshell.Hyprland\n\nimport qs.modules.ii.background.widgets\nimport qs.modules.ii.background.widgets.clock\nimport qs.modules.ii.background.widgets.weather\nimport qs.modules.ii.background.widgets.visualizer\n\nVariants {\n    id: root\n    model: Quickshell.screens\n\n    PanelWindow {\n        id: bgRoot\n\n        required property var modelData\n\n        // Hide when fullscreen\n        property list<HyprlandWorkspace> workspacesForMonitor: Hyprland.workspaces.values.filter(workspace => workspace.monitor && workspace.monitor.name == monitor.name)\n        property var activeWorkspaceWithFullscreen: workspacesForMonitor.filter(workspace => ((workspace.toplevels.values.filter(window => window.wayland?.fullscreen)[0] != undefined) && workspace.active))[0]\n        visible: GlobalStates.screenLocked || (!(activeWorkspaceWithFullscreen != undefined)) || !Config?.options.background.hideWhenFullscreen\n\n        // Workspaces\n        property HyprlandMonitor monitor: Hyprland.monitorFor(modelData)\n        property list<var> relevantWindows: HyprlandData.windowList.filter(win => win.monitor == monitor?.id && win.workspace.id >= 0).sort((a, b) => a.workspace.id - b.workspace.id)\n        property int firstWorkspaceId: relevantWindows[0]?.workspace.id || 1\n        property int lastWorkspaceId: relevantWindows[relevantWindows.length - 1]?.workspace.id || 10\n        // Wallpaper\n        property bool wallpaperIsVideo: Config.options.background.wallpaperPath.endsWith(\".mp4\") || Config.options.background.wallpaperPath.endsWith(\".webm\") || Config.options.background.wallpaperPath.endsWith(\".mkv\") || Config.options.background.wallpaperPath.endsWith(\".avi\") || Config.options.background.wallpaperPath.endsWith(\".mov\")\n        property string wallpaperPath: wallpaperIsVideo ? Config.options.background.thumbnailPath : Config.options.background.wallpaperPath\n        property bool wallpaperSafetyTriggered: {\n            const enabled = Config.options.workSafety.enable.wallpaper;\n            const sensitiveWallpaper = (CF.StringUtils.stringListContainsSubstring(wallpaperPath.toLowerCase(), Config.options.workSafety.triggerCondition.fileKeywords));\n            const sensitiveNetwork = (CF.StringUtils.stringListContainsSubstring(Network.networkName.toLowerCase(), Config.options.workSafety.triggerCondition.networkNameKeywords));\n            return enabled && sensitiveWallpaper && sensitiveNetwork;\n        }\n        property real wallpaperToScreenRatio: Math.min(wallpaperWidth / screen.width, wallpaperHeight / screen.height)\n        property real preferredWallpaperScale: Config.options.background.parallax.workspaceZoom\n        property real effectiveWallpaperScale: 1 // Some reasonable init value, to be updated\n        property int wallpaperWidth: modelData.width // Some reasonable init value, to be updated\n        property int wallpaperHeight: modelData.height // Some reasonable init value, to be updated\n        property real movableXSpace: ((wallpaperWidth / wallpaperToScreenRatio * effectiveWallpaperScale) - screen.width) / 2\n        property real movableYSpace: ((wallpaperHeight / wallpaperToScreenRatio * effectiveWallpaperScale) - screen.height) / 2\n        readonly property bool verticalParallax: (Config.options.background.parallax.autoVertical && wallpaperHeight > wallpaperWidth) || Config.options.background.parallax.vertical\n        // Colors\n        property bool shouldBlur: (GlobalStates.screenLocked && Config.options.lock.blur.enable)\n        property color dominantColor: Appearance.colors.colPrimary // Default, to be changed\n        property bool dominantColorIsDark: dominantColor.hslLightness < 0.5\n        property color colText: {\n            if (wallpaperSafetyTriggered)\n                return CF.ColorUtils.mix(Appearance.colors.colOnLayer0, Appearance.colors.colPrimary, 0.75);\n            return (GlobalStates.screenLocked && shouldBlur) ? Appearance.colors.colOnLayer0 : CF.ColorUtils.colorWithLightness(Appearance.colors.colPrimary, (dominantColorIsDark ? 0.8 : 0.12));\n        }\n        Behavior on colText {\n            animation: Appearance.animation.elementMoveFast.colorAnimation.createObject(this)\n        }\n\n        // Layer props\n        screen: modelData\n        exclusionMode: ExclusionMode.Ignore\n        WlrLayershell.layer: (GlobalStates.screenLocked && !scaleAnim.running) ? WlrLayer.Overlay : WlrLayer.Bottom\n        // WlrLayershell.layer: WlrLayer.Bottom\n        WlrLayershell.namespace: \"quickshell:background\"\n        anchors {\n            top: true\n            bottom: true\n            left: true\n            right: true\n        }\n        color: {\n            if (!bgRoot.wallpaperSafetyTriggered || bgRoot.wallpaperIsVideo)\n                return \"transparent\";\n            return CF.ColorUtils.mix(Appearance.colors.colLayer0, Appearance.colors.colPrimary, 0.75);\n        }\n        Behavior on color {\n            animation: Appearance.animation.elementMoveFast.colorAnimation.createObject(this)\n        }\n\n        onWallpaperPathChanged: {\n            bgRoot.updateZoomScale();\n            // Clock position gets updated after zoom scale is updated\n        }\n\n        // Wallpaper zoom scale\n        function updateZoomScale() {\n            getWallpaperSizeProc.path = bgRoot.wallpaperPath;\n            getWallpaperSizeProc.running = true;\n        }\n        Process {\n            id: getWallpaperSizeProc\n            property string path: bgRoot.wallpaperPath\n            command: [\"magick\", \"identify\", \"-format\", \"%w %h\", path]\n            stdout: StdioCollector {\n                id: wallpaperSizeOutputCollector\n                onStreamFinished: {\n                    const output = wallpaperSizeOutputCollector.text;\n                    const [width, height] = output.split(\" \").map(Number);\n                    const [screenWidth, screenHeight] = [bgRoot.screen.width, bgRoot.screen.height];\n                    bgRoot.wallpaperWidth = width;\n                    bgRoot.wallpaperHeight = height;\n\n                    if (width <= screenWidth || height <= screenHeight) {\n                        // Undersized/perfectly sized wallpapers\n                        bgRoot.effectiveWallpaperScale = Math.max(screenWidth / width, screenHeight / height);\n                    } else {\n                        // Oversized = can be zoomed for parallax, yay\n                        bgRoot.effectiveWallpaperScale = Math.min(bgRoot.preferredWallpaperScale, width / screenWidth, height / screenHeight);\n                    }\n                }\n            }\n        }\n\n        Item {\n            anchors.fill: parent\n            clip: true\n\n            // Wallpaper\n            StyledImage {\n                id: wallpaper\n                visible: opacity > 0 && !blurLoader.active\n                opacity: (status === Image.Ready && !bgRoot.wallpaperIsVideo) ? 1 : 0\n                cache: false\n                smooth: false\n                // Range = groups that workspaces span on\n                property int chunkSize: Config?.options.bar.workspaces.shown ?? 10\n                property int lower: Math.floor(bgRoot.firstWorkspaceId / chunkSize) * chunkSize\n                property int upper: Math.ceil(bgRoot.lastWorkspaceId / chunkSize) * chunkSize\n                property int range: upper - lower\n                property real valueX: {\n                    let result = 0.5;\n                    if (Config.options.background.parallax.enableWorkspace && !bgRoot.verticalParallax) {\n                        result = ((bgRoot.monitor.activeWorkspace?.id - lower) / range);\n                    }\n                    if (Config.options.background.parallax.enableSidebar) {\n                        result += (0.15 * GlobalStates.sidebarRightOpen - 0.15 * GlobalStates.sidebarLeftOpen);\n                    }\n                    return result;\n                }\n                property real valueY: {\n                    let result = 0.5;\n                    if (Config.options.background.parallax.enableWorkspace && bgRoot.verticalParallax) {\n                        result = ((bgRoot.monitor.activeWorkspace?.id - lower) / range);\n                    }\n                    return result;\n                }\n                property real effectiveValueX: Math.max(0, Math.min(1, valueX))\n                property real effectiveValueY: Math.max(0, Math.min(1, valueY))\n                x: -(bgRoot.movableXSpace) - (effectiveValueX - 0.5) * 2 * bgRoot.movableXSpace\n                y: -(bgRoot.movableYSpace) - (effectiveValueY - 0.5) * 2 * bgRoot.movableYSpace\n                source: bgRoot.wallpaperSafetyTriggered ? \"\" : bgRoot.wallpaperPath\n                fillMode: Image.PreserveAspectCrop\n                Behavior on x {\n                    NumberAnimation {\n                        duration: 600\n                        easing.type: Easing.OutCubic\n                    }\n                }\n                Behavior on y {\n                    NumberAnimation {\n                        duration: 600\n                        easing.type: Easing.OutCubic\n                    }\n                }\n                sourceSize {\n                    width: bgRoot.screen.width * bgRoot.effectiveWallpaperScale * bgRoot.monitor.scale\n                    height: bgRoot.screen.height * bgRoot.effectiveWallpaperScale * bgRoot.monitor.scale\n                }\n                width: bgRoot.wallpaperWidth / bgRoot.wallpaperToScreenRatio * bgRoot.effectiveWallpaperScale\n                height: bgRoot.wallpaperHeight / bgRoot.wallpaperToScreenRatio * bgRoot.effectiveWallpaperScale\n            }\n\n            Loader {\n                id: blurLoader\n                active: Config.options.lock.blur.enable && (GlobalStates.screenLocked || scaleAnim.running)\n                anchors.fill: wallpaper\n                scale: GlobalStates.screenLocked ? Config.options.lock.blur.extraZoom : 1\n                Behavior on scale {\n                    NumberAnimation {\n                        id: scaleAnim\n                        duration: 400\n                        easing.type: Easing.BezierSpline\n                        easing.bezierCurve: Appearance.animationCurves.expressiveDefaultSpatial\n                    }\n                }\n                sourceComponent: GaussianBlur {\n                    source: wallpaper\n                    radius: GlobalStates.screenLocked ? Config.options.lock.blur.radius : 0\n                    samples: radius * 2 + 1\n\n                    Rectangle {\n                        opacity: GlobalStates.screenLocked ? 1 : 0\n                        anchors.fill: parent\n                        color: CF.ColorUtils.transparentize(Appearance.colors.colLayer0, 0.7)\n                    }\n                }\n            }\n\n            WidgetCanvas {\n                id: widgetCanvas\n                anchors {\n                    left: wallpaper.left\n                    right: wallpaper.right\n                    top: wallpaper.top\n                    bottom: wallpaper.bottom\n                    horizontalCenter: undefined\n                    verticalCenter: undefined\n                    readonly property real parallaxFactor: Config.options.background.parallax.widgetsFactor\n                    leftMargin: {\n                        const xOnWallpaper = bgRoot.movableXSpace;\n                        const extraMove = (wallpaper.effectiveValueX * 2 * bgRoot.movableXSpace) * (parallaxFactor - 1);\n                        return xOnWallpaper - extraMove;\n                    }\n                    topMargin: {\n                        const yOnWallpaper = bgRoot.movableYSpace;\n                        const extraMove = (wallpaper.effectiveValueY * 2 * bgRoot.movableYSpace) * (parallaxFactor - 1);\n                        return yOnWallpaper - extraMove;\n                    }\n                    Behavior on leftMargin {\n                        animation: Appearance.animation.elementMove.numberAnimation.createObject(this)\n                    }\n                    Behavior on topMargin {\n                        animation: Appearance.animation.elementMove.numberAnimation.createObject(this)\n                    }\n                }\n                width: wallpaper.width\n                height: wallpaper.height\n                states: State {\n                    name: \"centered\"\n                    when: GlobalStates.screenLocked || bgRoot.wallpaperSafetyTriggered\n                    PropertyChanges {\n                        target: widgetCanvas\n                        width: parent.width\n                        height: parent.height\n                    }\n                    AnchorChanges {\n                        target: widgetCanvas\n                        anchors {\n                            left: undefined\n                            right: undefined\n                            top: undefined\n                            bottom: undefined\n                            horizontalCenter: parent.horizontalCenter\n                            verticalCenter: parent.verticalCenter\n                        }\n                    }\n                }\n                transitions: Transition {\n                    PropertyAnimation {\n                        properties: \"width,height\"\n                        duration: Appearance.animation.elementMove.duration\n                        easing.type: Appearance.animation.elementMove.type\n                        easing.bezierCurve: Appearance.animation.elementMove.bezierCurve\n                    }\n                    AnchorAnimation {\n                        duration: Appearance.animation.elementMove.duration\n                        easing.type: Appearance.animation.elementMove.type\n                        easing.bezierCurve: Appearance.animation.elementMove.bezierCurve\n                    }\n                }\n\n                FadeLoader {\n                    shown: Config.options.background.widgets.weather.enable\n                    sourceComponent: WeatherWidget {\n                        screenWidth: bgRoot.screen.width\n                        screenHeight: bgRoot.screen.height\n                        scaledScreenWidth: bgRoot.screen.width / bgRoot.effectiveWallpaperScale\n                        scaledScreenHeight: bgRoot.screen.height / bgRoot.effectiveWallpaperScale\n                        wallpaperScale: bgRoot.effectiveWallpaperScale\n                    }\n                }\n\n                FadeLoader {\n                    shown: Config.options.background.widgets.clock.enable\n                    sourceComponent: ClockWidget {\n                        screenWidth: bgRoot.screen.width\n                        screenHeight: bgRoot.screen.height\n                        scaledScreenWidth: bgRoot.screen.width / bgRoot.effectiveWallpaperScale\n                        scaledScreenHeight: bgRoot.screen.height / bgRoot.effectiveWallpaperScale\n                        wallpaperScale: bgRoot.effectiveWallpaperScale\n                        wallpaperSafetyTriggered: bgRoot.wallpaperSafetyTriggered\n                    }\n                }\n\n                FadeLoader {\n                    shown: Config.options.background.widgets.wavevisualizer.enable\n                    sourceComponent: VisualizerWidget {\n                        screenWidth: bgRoot.screen.width\n                        screenHeight: bgRoot.screen.height\n                        scaledScreenWidth: bgRoot.screen.width / bgRoot.effectiveWallpaperScale\n                        scaledScreenHeight: bgRoot.screen.height / bgRoot.effectiveWallpaperScale\n                        wallpaperScale: bgRoot.effectiveWallpaperScale\n                    }\n                }\n            }\n        }\n    }\n}\n","epoch":26,"telemetryInfo":{}}],["file:///home/truonglangquan/.config/quickshell/ii/modules/common/Appearance.qml::request_c4e9b9e4-4790-4a9b-a584-a0746d3f8185",{"uri":{"$mid":1,"fsPath":"/home/truonglangquan/.config/quickshell/ii/modules/common/Appearance.qml","external":"file:///home/truonglangquan/.config/quickshell/ii/modules/common/Appearance.qml","path":"/home/truonglangquan/.config/quickshell/ii/modules/common/Appearance.qml","scheme":"file"},"requestId":"request_c4e9b9e4-4790-4a9b-a584-a0746d3f8185","content":"import QtQuick\nimport Quickshell\nimport qs.modules.common.functions\npragma Singleton\npragma ComponentBehavior: Bound\n\nSingleton {\n    id: root\n    property QtObject m3colors\n    property QtObject animation\n    property QtObject animationCurves\n    property QtObject colors\n    property QtObject rounding\n    property QtObject font\n    property QtObject sizes\n    property string syntaxHighlightingTheme\n\n    // Transparency. The quadratic functions were derived from analysis of hand-picked transparency values.\n    ColorQuantizer {\n        id: wallColorQuant\n        property string wallpaperPath: Config.options.background.wallpaperPath\n        property bool wallpaperIsVideo: wallpaperPath.endsWith(\".mp4\") || wallpaperPath.endsWith(\".webm\") || wallpaperPath.endsWith(\".mkv\") || wallpaperPath.endsWith(\".avi\") || wallpaperPath.endsWith(\".mov\")\n        source: Qt.resolvedUrl(wallpaperIsVideo ? Config.options.background.thumbnailPath : Config.options.background.wallpaperPath)\n        depth: 0 // 2^0 = 1 color\n        rescaleSize: 10\n    }\n    property real wallpaperVibrancy: (wallColorQuant.colors[0]?.hslSaturation + wallColorQuant.colors[0]?.hslLightness) / 2\n    property real autoBackgroundTransparency: { // y = 0.5768x^2 - 0.759x + 0.2896\n        let x = wallpaperVibrancy\n        let y = 0.5768 * (x * x) - 0.759 * (x) + 0.2896\n        return Math.max(0, Math.min(0.22, y))\n    }\n    property real autoContentTransparency: { // y = -10.1734x^2 + 3.4457x + 0.1872\n        let x = autoBackgroundTransparency\n        let y = -10.1734 * (x * x) + 3.4457 * (x) + 0.1872\n        return Math.max(0, Math.min(0.6, y))\n    }\n    property real backgroundTransparency: Config?.options.appearance.transparency.enable ? Config?.options.appearance.transparency.automatic ? autoBackgroundTransparency : Config?.options.appearance.transparency.backgroundTransparency : 0\n    property real contentTransparency: Config?.options.appearance.transparency.enable ? Config?.options.appearance.transparency.automatic ? autoContentTransparency : Config?.options.appearance.transparency.contentTransparency : 0\n\n    m3colors: QtObject {\n        property bool darkmode: false\n        property bool transparent: true\n        property color m3background: \"#141313\"\n        property color m3onBackground: \"#e6e1e1\"\n        property color m3surface: \"#141313\"\n        property color m3surfaceDim: \"#141313\"\n        property color m3surfaceBright: \"#3a3939\"\n        property color m3surfaceContainerLowest: \"#0f0e0e\"\n        property color m3surfaceContainerLow: \"#1c1b1c\"\n        property color m3surfaceContainer: \"#201f20\"\n        property color m3surfaceContainerHigh: \"#2b2a2a\"\n        property color m3surfaceContainerHighest: \"#363435\"\n        property color m3onSurface: \"#e6e1e1\"\n        property color m3surfaceVariant: \"#49464a\"\n        property color m3onSurfaceVariant: \"#cbc5ca\"\n        property color m3inverseSurface: \"#e6e1e1\"\n        property color m3inverseOnSurface: \"#313030\"\n        property color m3outline: \"#948f94\"\n        property color m3outlineVariant: \"#49464a\"\n        property color m3shadow: \"#000000\"\n        property color m3scrim: \"#000000\"\n        property color m3surfaceTint: \"#cbc4cb\"\n        property color m3primary: \"#cbc4cb\"\n        property color m3onPrimary: \"#322f34\"\n        property color m3primaryContainer: \"#2d2a2f\"\n        property color m3onPrimaryContainer: \"#bcb6bc\"\n        property color m3inversePrimary: \"#615d63\"\n        property color m3secondary: \"#cac5c8\"\n        property color m3onSecondary: \"#323032\"\n        property color m3secondaryContainer: \"#4d4b4d\"\n        property color m3onSecondaryContainer: \"#ece6e9\"\n        property color m3tertiary: \"#d1c3c6\"\n        property color m3onTertiary: \"#372e30\"\n        property color m3tertiaryContainer: \"#31292b\"\n        property color m3onTertiaryContainer: \"#c1b4b7\"\n        property color m3error: \"#ffb4ab\"\n        property color m3onError: \"#690005\"\n        property color m3errorContainer: \"#93000a\"\n        property color m3onErrorContainer: \"#ffdad6\"\n        property color m3primaryFixed: \"#e7e0e7\"\n        property color m3primaryFixedDim: \"#cbc4cb\"\n        property color m3onPrimaryFixed: \"#1d1b1f\"\n        property color m3onPrimaryFixedVariant: \"#49454b\"\n        property color m3secondaryFixed: \"#e6e1e4\"\n        property color m3secondaryFixedDim: \"#cac5c8\"\n        property color m3onSecondaryFixed: \"#1d1b1d\"\n        property color m3onSecondaryFixedVariant: \"#484648\"\n        property color m3tertiaryFixed: \"#eddfe1\"\n        property color m3tertiaryFixedDim: \"#d1c3c6\"\n        property color m3onTertiaryFixed: \"#211a1c\"\n        property color m3onTertiaryFixedVariant: \"#4e4447\"\n        property color m3success: \"#B5CCBA\"\n        property color m3onSuccess: \"#213528\"\n        property color m3successContainer: \"#374B3E\"\n        property color m3onSuccessContainer: \"#D1E9D6\"\n        property color term0: \"#EDE4E4\"\n        property color term1: \"#B52755\"\n        property color term2: \"#A97363\"\n        property color term3: \"#AF535D\"\n        property color term4: \"#A67F7C\"\n        property color term5: \"#B2416B\"\n        property color term6: \"#8D76AD\"\n        property color term7: \"#272022\"\n        property color term8: \"#0E0D0D\"\n        property color term9: \"#B52755\"\n        property color term10: \"#A97363\"\n        property color term11: \"#AF535D\"\n        property color term12: \"#A67F7C\"\n        property color term13: \"#B2416B\"\n        property color term14: \"#8D76AD\"\n        property color term15: \"#221A1A\"\n    }\n\n    colors: QtObject {\n        property color colSubtext: m3colors.m3outline\n        property color colLayer0: ColorUtils.mix(ColorUtils.transparentize(m3colors.m3background, root.backgroundTransparency), m3colors.m3primary, Config.options.appearance.extraBackgroundTint ? 0.99 : 1)\n        property color colOnLayer0: m3colors.m3onBackground\n        property color colLayer0Hover: ColorUtils.transparentize(ColorUtils.mix(colLayer0, colOnLayer0, 0.9, root.contentTransparency))\n        property color colLayer0Active: ColorUtils.transparentize(ColorUtils.mix(colLayer0, colOnLayer0, 0.8, root.contentTransparency))\n        property color colLayer0Border: ColorUtils.mix(root.m3colors.m3outlineVariant, colLayer0, 0.4)\n        property color colLayer1: ColorUtils.transparentize(m3colors.m3surfaceContainerLow, root.contentTransparency);\n        property color colOnLayer1: m3colors.m3onSurfaceVariant;\n        property color colOnLayer1Inactive: ColorUtils.mix(colOnLayer1, colLayer1, 0.45);\n        property color colLayer2: ColorUtils.transparentize(m3colors.m3surfaceContainer, root.contentTransparency)\n        property color colOnLayer2: m3colors.m3onSurface;\n        property color colOnLayer2Disabled: ColorUtils.mix(colOnLayer2, m3colors.m3background, 0.4);\n        property color colLayer1Hover: ColorUtils.transparentize(ColorUtils.mix(colLayer1, colOnLayer1, 0.92), root.contentTransparency)\n        property color colLayer1Active: ColorUtils.transparentize(ColorUtils.mix(colLayer1, colOnLayer1, 0.85), root.contentTransparency);\n        property color colLayer2Hover: ColorUtils.transparentize(ColorUtils.mix(colLayer2, colOnLayer2, 0.90), root.contentTransparency)\n        property color colLayer2Active: ColorUtils.transparentize(ColorUtils.mix(colLayer2, colOnLayer2, 0.80), root.contentTransparency);\n        property color colLayer2Disabled: ColorUtils.transparentize(ColorUtils.mix(colLayer2, m3colors.m3background, 0.8), root.contentTransparency);\n        property color colLayer3: ColorUtils.transparentize(m3colors.m3surfaceContainerHigh, root.contentTransparency)\n        property color colOnLayer3: m3colors.m3onSurface;\n        property color colLayer3Hover: ColorUtils.transparentize(ColorUtils.mix(colLayer3, colOnLayer3, 0.90), root.contentTransparency)\n        property color colLayer3Active: ColorUtils.transparentize(ColorUtils.mix(colLayer3, colOnLayer3, 0.80), root.contentTransparency);\n        property color colLayer4: ColorUtils.transparentize(m3colors.m3surfaceContainerHighest, root.contentTransparency)\n        property color colOnLayer4: m3colors.m3onSurface;\n        property color colLayer4Hover: ColorUtils.transparentize(ColorUtils.mix(colLayer4, colOnLayer4, 0.90), root.contentTransparency)\n        property color colLayer4Active: ColorUtils.transparentize(ColorUtils.mix(colLayer4, colOnLayer4, 0.80), root.contentTransparency);\n        property color colPrimary: m3colors.m3primary\n        property color colOnPrimary: m3colors.m3onPrimary\n        property color colPrimaryHover: ColorUtils.mix(colors.colPrimary, colLayer1Hover, 0.87)\n        property color colPrimaryActive: ColorUtils.mix(colors.colPrimary, colLayer1Active, 0.7)\n        property color colPrimaryContainer: m3colors.m3primaryContainer\n        property color colPrimaryContainerHover: ColorUtils.mix(colors.colPrimaryContainer, colors.colOnPrimaryContainer, 0.9)\n        property color colPrimaryContainerActive: ColorUtils.mix(colors.colPrimaryContainer, colors.colOnPrimaryContainer, 0.8)\n        property color colOnPrimaryContainer: m3colors.m3onPrimaryContainer\n        property color colSecondary: m3colors.m3secondary\n        property color colOnSecondary: m3colors.m3onSecondary\n        property color colSecondaryHover: ColorUtils.mix(m3colors.m3secondary, colLayer1Hover, 0.85)\n        property color colSecondaryActive: ColorUtils.mix(m3colors.m3secondary, colLayer1Active, 0.4)\n        property color colSecondaryContainer: m3colors.m3secondaryContainer\n        property color colSecondaryContainerHover: ColorUtils.mix(m3colors.m3secondaryContainer, m3colors.m3onSecondaryContainer, 0.90)\n        property color colSecondaryContainerActive: ColorUtils.mix(m3colors.m3secondaryContainer, m3colors.m3onSecondaryContainer, 0.54)\n        property color colTertiary: m3colors.m3tertiary\n        property color colTertiaryHover: ColorUtils.mix(m3colors.m3tertiary, colLayer1Hover, 0.85)\n        property color colTertiaryActive: ColorUtils.mix(m3colors.m3tertiary, colLayer1Active, 0.4)\n        property color colTertiaryContainer: m3colors.m3tertiaryContainer\n        property color colTertiaryContainerHover: ColorUtils.mix(m3colors.m3tertiaryContainer, m3colors.m3onTertiaryContainer, 0.90)\n        property color colTertiaryContainerActive: ColorUtils.mix(m3colors.m3tertiaryContainer, colLayer1Active, 0.54)\n        property color colOnTertiary: m3colors.m3onTertiary\n        property color colOnTertiaryContainer: m3colors.m3onTertiaryContainer\n        property color colOnSecondaryContainer: m3colors.m3onSecondaryContainer\n        property color colSurfaceContainerLow: ColorUtils.transparentize(m3colors.m3surfaceContainerLow, root.contentTransparency)\n        property color colSurfaceContainer: ColorUtils.transparentize(m3colors.m3surfaceContainer, root.contentTransparency)\n        property color colBackgroundSurfaceContainer: ColorUtils.transparentize(m3colors.m3surfaceContainer, root.backgroundTransparency)\n        property color colSurfaceContainerHigh: ColorUtils.transparentize(m3colors.m3surfaceContainerHigh, root.contentTransparency)\n        property color colSurfaceContainerHighest: ColorUtils.transparentize(m3colors.m3surfaceContainerHighest, root.contentTransparency)\n        property color colSurfaceContainerHighestHover: ColorUtils.mix(m3colors.m3surfaceContainerHighest, m3colors.m3onSurface, 0.95)\n        property color colSurfaceContainerHighestActive: ColorUtils.mix(m3colors.m3surfaceContainerHighest, m3colors.m3onSurface, 0.85)\n        property color colOnSurface: m3colors.m3onSurface\n        property color colOnSurfaceVariant: m3colors.m3onSurfaceVariant\n        property color colTooltip: m3colors.m3inverseSurface\n        property color colOnTooltip: m3colors.m3inverseOnSurface\n        property color colScrim: ColorUtils.transparentize(m3colors.m3scrim, 0.5)\n        property color colShadow: ColorUtils.transparentize(m3colors.m3shadow, 0.7)\n        property color colOutline: m3colors.m3outline\n        property color colOutlineVariant: m3colors.m3outlineVariant\n        property color colError: m3colors.m3error\n        property color colErrorHover: ColorUtils.mix(m3colors.m3error, colLayer1Hover, 0.85)\n        property color colErrorActive: ColorUtils.mix(m3colors.m3error, colLayer1Active, 0.7)\n        property color colOnError: m3colors.m3onError\n        property color colErrorContainer: m3colors.m3errorContainer\n        property color colErrorContainerHover: ColorUtils.mix(m3colors.m3errorContainer, m3colors.m3onErrorContainer, 0.90)\n        property color colErrorContainerActive: ColorUtils.mix(m3colors.m3errorContainer, m3colors.m3onErrorContainer, 0.70)\n        property color colOnErrorContainer: m3colors.m3onErrorContainer\n    }\n\n    rounding: QtObject {\n        property int unsharpen: 2\n        property int unsharpenmore: 6\n        property int verysmall: 8\n        property int small: 12\n        property int normal: 17\n        property int large: 23\n        property int verylarge: 30\n        property int full: 9999\n        property int screenRounding: large\n        property int windowRounding: 18\n    }\n\n    font: QtObject {\n        property QtObject family: QtObject {\n            property string main: Config.options.appearance.fonts.main\n            property string numbers: Config.options.appearance.fonts.numbers\n            property string title: Config.options.appearance.fonts.title\n            property string iconMaterial: \"Material Symbols Rounded\"\n            property string iconNerd: Config.options.appearance.fonts.iconNerd\n            property string monospace: Config.options.appearance.fonts.monospace\n            property string reading: Config.options.appearance.fonts.reading\n            property string expressive: Config.options.appearance.fonts.expressive\n        }\n        property QtObject variableAxes: QtObject {\n            property var main: ({\n                \"wght\": 450,\n                \"wdth\": 100,\n            })\n            property var numbers: ({\n                \"wght\": 450,\n            })\n            property var title: ({ // Slightly bold weight for title\n                \"wght\": 550, // Weight (Lowered to compensate for increased grade)\n            })\n        }\n        property QtObject pixelSize: QtObject {\n            property int smallest: 10\n            property int smaller: 12\n            property int smallie: 13\n            property int small: 15\n            property int normal: 16\n            property int large: 17\n            property int larger: 19\n            property int huge: 22\n            property int hugeass: 23\n            property int title: huge\n        }\n    }\n\n    animationCurves: QtObject {\n        readonly property list<real> expressiveFastSpatial: [0.42, 1.67, 0.21, 0.90, 1, 1] // Default, 350ms\n        readonly property list<real> expressiveDefaultSpatial: [0.38, 1.21, 0.22, 1.00, 1, 1] // Default, 500ms\n        readonly property list<real> expressiveSlowSpatial: [0.39, 1.29, 0.35, 0.98, 1, 1] // Default, 650ms\n        readonly property list<real> expressiveEffects: [0.34, 0.80, 0.34, 1.00, 1, 1] // Default, 200ms\n        readonly property list<real> emphasized: [0.05, 0, 2 / 15, 0.06, 1 / 6, 0.4, 5 / 24, 0.82, 0.25, 1, 1, 1]\n        readonly property list<real> emphasizedFirstHalf: [0.05, 0, 2 / 15, 0.06, 1 / 6, 0.4, 5 / 24, 0.82]\n        readonly property list<real> emphasizedLastHalf: [5 / 24, 0.82, 0.25, 1, 1, 1]\n        readonly property list<real> emphasizedAccel: [0.3, 0, 0.8, 0.15, 1, 1]\n        readonly property list<real> emphasizedDecel: [0.05, 0.7, 0.1, 1, 1, 1]\n        readonly property list<real> standard: [0.2, 0, 0, 1, 1, 1]\n        readonly property list<real> standardAccel: [0.3, 0, 1, 1, 1, 1]\n        readonly property list<real> standardDecel: [0, 0, 0, 1, 1, 1]\n        readonly property real expressiveFastSpatialDuration: 350\n        readonly property real expressiveDefaultSpatialDuration: 500\n        readonly property real expressiveSlowSpatialDuration: 650\n        readonly property real expressiveEffectsDuration: 200\n    }\n\n    animation: QtObject {\n        property QtObject elementMove: QtObject {\n            property int duration: animationCurves.expressiveDefaultSpatialDuration\n            property int type: Easing.BezierSpline\n            property list<real> bezierCurve: animationCurves.expressiveDefaultSpatial\n            property int velocity: 650\n            property Component numberAnimation: Component {\n                NumberAnimation {\n                    duration: root.animation.elementMove.duration\n                    easing.type: root.animation.elementMove.type\n                    easing.bezierCurve: root.animation.elementMove.bezierCurve\n                }\n            }\n        }\n\n        property QtObject elementMoveEnter: QtObject {\n            property int duration: 400\n            property int type: Easing.BezierSpline\n            property list<real> bezierCurve: animationCurves.emphasizedDecel\n            property int velocity: 650\n            property Component numberAnimation: Component {\n                NumberAnimation {\n                    alwaysRunToEnd: true\n                    duration: root.animation.elementMoveEnter.duration\n                    easing.type: root.animation.elementMoveEnter.type\n                    easing.bezierCurve: root.animation.elementMoveEnter.bezierCurve\n                }\n            }\n        }\n\n        property QtObject elementMoveExit: QtObject {\n            property int duration: 200\n            property int type: Easing.BezierSpline\n            property list<real> bezierCurve: animationCurves.emphasizedAccel\n            property int velocity: 650\n            property Component numberAnimation: Component {\n                NumberAnimation {\n                    alwaysRunToEnd: true\n                    duration: root.animation.elementMoveExit.duration\n                    easing.type: root.animation.elementMoveExit.type\n                    easing.bezierCurve: root.animation.elementMoveExit.bezierCurve\n                }\n            }\n        }\n\n        property QtObject elementMoveFast: QtObject {\n            property int duration: animationCurves.expressiveEffectsDuration\n            property int type: Easing.BezierSpline\n            property list<real> bezierCurve: animationCurves.expressiveEffects\n            property int velocity: 850\n            property Component colorAnimation: Component { ColorAnimation {\n                duration: root.animation.elementMoveFast.duration\n                easing.type: root.animation.elementMoveFast.type\n                easing.bezierCurve: root.animation.elementMoveFast.bezierCurve\n            }}\n            property Component numberAnimation: Component { NumberAnimation {\n                alwaysRunToEnd: true\n                duration: root.animation.elementMoveFast.duration\n                easing.type: root.animation.elementMoveFast.type\n                easing.bezierCurve: root.animation.elementMoveFast.bezierCurve\n            }}\n        }\n\n        property QtObject elementResize: QtObject {\n            property int duration: 300\n            property int type: Easing.BezierSpline\n            property list<real> bezierCurve: animationCurves.emphasized\n            property int velocity: 650\n            property Component numberAnimation: Component {\n                NumberAnimation {\n                    alwaysRunToEnd: true\n                    duration: root.animation.elementResize.duration\n                    easing.type: root.animation.elementResize.type\n                    easing.bezierCurve: root.animation.elementResize.bezierCurve\n                }\n            }\n        }\n\n        property QtObject clickBounce: QtObject {\n            property int duration: 400\n            property int type: Easing.BezierSpline\n            property list<real> bezierCurve: animationCurves.expressiveDefaultSpatial\n            property int velocity: 850\n            property Component numberAnimation: Component { NumberAnimation {\n                alwaysRunToEnd: true\n                duration: root.animation.clickBounce.duration\n                easing.type: root.animation.clickBounce.type\n                easing.bezierCurve: root.animation.clickBounce.bezierCurve\n            }}\n        }\n        \n        property QtObject scroll: QtObject {\n            property int duration: 200\n            property int type: Easing.BezierSpline\n            property list<real> bezierCurve: animationCurves.standardDecel\n        }\n\n        property QtObject menuDecel: QtObject {\n            property int duration: 350\n            property int type: Easing.OutExpo\n        }\n    }\n\n    sizes: QtObject {\n        property real baseBarHeight: 40t\n        property real barHeight: Config.options.bar.cornerStyle === 1 ? \n            (baseBarHeight + root.sizes.hyprlandGapsOut * 2) : baseBarHeight\n        property real barCenterSideModuleWidth: Config.options?.bar.verbose ? 360 : 140\n        property real barCenterSideModuleWidthShortened: 280\n        property real barCenterSideModuleWidthHellaShortened: 190\n        property real barShortenScreenWidthThreshold: 1200 // Shorten if screen width is at most this value\n        property real barHellaShortenScreenWidthThreshold: 1000 // Shorten even more...\n        property real elevationMargin: 10\n        property real fabShadowRadius: 5\n        property real fabHoveredShadowRadius: 7\n        property real hyprlandGapsOut: 5\n        property real mediaControlsWidth: 440\n        property real mediaControlsHeight: 160\n        property real notificationPopupWidth: 410\n        property real osdWidth: 180\n        property real searchWidthCollapsed: 210\n        property real searchWidth: 360\n        property real sidebarWidth: 460\n        property real sidebarWidthExtended: 750\n        property real baseVerticalBarWidth: 46\n        property real verticalBarWidth: Config.options.bar.cornerStyle === 1 ? \n            (baseVerticalBarWidth + root.sizes.hyprlandGapsOut * 2) : baseVerticalBarWidth\n        property real wallpaperSelectorWidth: 1200\n        property real wallpaperSelectorHeight: 690\n        property real wallpaperSelectorItemMargins: 8\n        property real wallpaperSelectorItemPadding: 6\n    }\n\n    syntaxHighlightingTheme: root.m3colors.darkmode ? \"Monokai\" : \"ayu Light\"\n}\n","epoch":30,"telemetryInfo":{}}],["file:///home/truonglangquan/.config/quickshell/ii/modules/common/Appearance.qml::request_6d3e858d-dd3c-4187-a2fd-5891ea8904c9",{"uri":{"$mid":1,"fsPath":"/home/truonglangquan/.config/quickshell/ii/modules/common/Appearance.qml","external":"file:///home/truonglangquan/.config/quickshell/ii/modules/common/Appearance.qml","path":"/home/truonglangquan/.config/quickshell/ii/modules/common/Appearance.qml","scheme":"file"},"requestId":"request_6d3e858d-dd3c-4187-a2fd-5891ea8904c9","content":"import QtQuick\nimport Quickshell\nimport qs.modules.common.functions\npragma Singleton\npragma ComponentBehavior: Bound\n\nSingleton {\n    id: root\n    property QtObject m3colors\n    property QtObject animation\n    property QtObject animationCurves\n    property QtObject colors\n    property QtObject rounding\n    property QtObject font\n    property QtObject sizes\n    property string syntaxHighlightingTheme\n\n    // Transparency. The quadratic functions were derived from analysis of hand-picked transparency values.\n    ColorQuantizer {\n        id: wallColorQuant\n        property string wallpaperPath: Config.options.background.wallpaperPath\n        property bool wallpaperIsVideo: wallpaperPath.endsWith(\".mp4\") || wallpaperPath.endsWith(\".webm\") || wallpaperPath.endsWith(\".mkv\") || wallpaperPath.endsWith(\".avi\") || wallpaperPath.endsWith(\".mov\")\n        source: Qt.resolvedUrl(wallpaperIsVideo ? Config.options.background.thumbnailPath : Config.options.background.wallpaperPath)\n        depth: 0 // 2^0 = 1 color\n        rescaleSize: 10\n    }\n    property real wallpaperVibrancy: (wallColorQuant.colors[0]?.hslSaturation + wallColorQuant.colors[0]?.hslLightness) / 2\n    property real autoBackgroundTransparency: { // y = 0.5768x^2 - 0.759x + 0.2896\n        let x = wallpaperVibrancy\n        let y = 0.5768 * (x * x) - 0.759 * (x) + 0.2896\n        return Math.max(0, Math.min(0.22, y))\n    }\n    property real autoContentTransparency: { // y = -10.1734x^2 + 3.4457x + 0.1872\n        let x = autoBackgroundTransparency\n        let y = -10.1734 * (x * x) + 3.4457 * (x) + 0.1872\n        return Math.max(0, Math.min(0.6, y))\n    }\n    property real backgroundTransparency: Config?.options.appearance.transparency.enable ? Config?.options.appearance.transparency.automatic ? autoBackgroundTransparency : Config?.options.appearance.transparency.backgroundTransparency : 0\n    property real contentTransparency: Config?.options.appearance.transparency.enable ? Config?.options.appearance.transparency.automatic ? autoContentTransparency : Config?.options.appearance.transparency.contentTransparency : 0\n\n    m3colors: QtObject {\n        property bool darkmode: false\n        property bool transparent: true\n        property color m3background: \"#141313\"\n        property color m3onBackground: \"#e6e1e1\"\n        property color m3surface: \"#141313\"\n        property color m3surfaceDim: \"#141313\"\n        property color m3surfaceBright: \"#3a3939\"\n        property color m3surfaceContainerLowest: \"#0f0e0e\"\n        property color m3surfaceContainerLow: \"#1c1b1c\"\n        property color m3surfaceContainer: \"#201f20\"\n        property color m3surfaceContainerHigh: \"#2b2a2a\"\n        property color m3surfaceContainerHighest: \"#363435\"\n        property color m3onSurface: \"#e6e1e1\"\n        property color m3surfaceVariant: \"#49464a\"\n        property color m3onSurfaceVariant: \"#cbc5ca\"\n        property color m3inverseSurface: \"#e6e1e1\"\n        property color m3inverseOnSurface: \"#313030\"\n        property color m3outline: \"#948f94\"\n        property color m3outlineVariant: \"#49464a\"\n        property color m3shadow: \"#000000\"\n        property color m3scrim: \"#000000\"\n        property color m3surfaceTint: \"#cbc4cb\"\n        property color m3primary: \"#cbc4cb\"\n        property color m3onPrimary: \"#322f34\"\n        property color m3primaryContainer: \"#2d2a2f\"\n        property color m3onPrimaryContainer: \"#bcb6bc\"\n        property color m3inversePrimary: \"#615d63\"\n        property color m3secondary: \"#cac5c8\"\n        property color m3onSecondary: \"#323032\"\n        property color m3secondaryContainer: \"#4d4b4d\"\n        property color m3onSecondaryContainer: \"#ece6e9\"\n        property color m3tertiary: \"#d1c3c6\"\n        property color m3onTertiary: \"#372e30\"\n        property color m3tertiaryContainer: \"#31292b\"\n        property color m3onTertiaryContainer: \"#c1b4b7\"\n        property color m3error: \"#ffb4ab\"\n        property color m3onError: \"#690005\"\n        property color m3errorContainer: \"#93000a\"\n        property color m3onErrorContainer: \"#ffdad6\"\n        property color m3primaryFixed: \"#e7e0e7\"\n        property color m3primaryFixedDim: \"#cbc4cb\"\n        property color m3onPrimaryFixed: \"#1d1b1f\"\n        property color m3onPrimaryFixedVariant: \"#49454b\"\n        property color m3secondaryFixed: \"#e6e1e4\"\n        property color m3secondaryFixedDim: \"#cac5c8\"\n        property color m3onSecondaryFixed: \"#1d1b1d\"\n        property color m3onSecondaryFixedVariant: \"#484648\"\n        property color m3tertiaryFixed: \"#eddfe1\"\n        property color m3tertiaryFixedDim: \"#d1c3c6\"\n        property color m3onTertiaryFixed: \"#211a1c\"\n        property color m3onTertiaryFixedVariant: \"#4e4447\"\n        property color m3success: \"#B5CCBA\"\n        property color m3onSuccess: \"#213528\"\n        property color m3successContainer: \"#374B3E\"\n        property color m3onSuccessContainer: \"#D1E9D6\"\n        property color term0: \"#EDE4E4\"\n        property color term1: \"#B52755\"\n        property color term2: \"#A97363\"\n        property color term3: \"#AF535D\"\n        property color term4: \"#A67F7C\"\n        property color term5: \"#B2416B\"\n        property color term6: \"#8D76AD\"\n        property color term7: \"#272022\"\n        property color term8: \"#0E0D0D\"\n        property color term9: \"#B52755\"\n        property color term10: \"#A97363\"\n        property color term11: \"#AF535D\"\n        property color term12: \"#A67F7C\"\n        property color term13: \"#B2416B\"\n        property color term14: \"#8D76AD\"\n        property color term15: \"#221A1A\"\n    }\n\n    colors: QtObject {\n        property color colSubtext: m3colors.m3outline\n        property color colLayer0: ColorUtils.mix(ColorUtils.transparentize(m3colors.m3background, root.backgroundTransparency), m3colors.m3primary, Config.options.appearance.extraBackgroundTint ? 0.99 : 1)\n        property color colOnLayer0: m3colors.m3onBackground\n        property color colLayer0Hover: ColorUtils.transparentize(ColorUtils.mix(colLayer0, colOnLayer0, 0.9, root.contentTransparency))\n        property color colLayer0Active: ColorUtils.transparentize(ColorUtils.mix(colLayer0, colOnLayer0, 0.8, root.contentTransparency))\n        property color colLayer0Border: ColorUtils.mix(root.m3colors.m3outlineVariant, colLayer0, 0.4)\n        property color colLayer1: ColorUtils.transparentize(m3colors.m3surfaceContainerLow, root.contentTransparency);\n        property color colOnLayer1: m3colors.m3onSurfaceVariant;\n        property color colOnLayer1Inactive: ColorUtils.mix(colOnLayer1, colLayer1, 0.45);\n        property color colLayer2: ColorUtils.transparentize(m3colors.m3surfaceContainer, root.contentTransparency)\n        property color colOnLayer2: m3colors.m3onSurface;\n        property color colOnLayer2Disabled: ColorUtils.mix(colOnLayer2, m3colors.m3background, 0.4);\n        property color colLayer1Hover: ColorUtils.transparentize(ColorUtils.mix(colLayer1, colOnLayer1, 0.92), root.contentTransparency)\n        property color colLayer1Active: ColorUtils.transparentize(ColorUtils.mix(colLayer1, colOnLayer1, 0.85), root.contentTransparency);\n        property color colLayer2Hover: ColorUtils.transparentize(ColorUtils.mix(colLayer2, colOnLayer2, 0.90), root.contentTransparency)\n        property color colLayer2Active: ColorUtils.transparentize(ColorUtils.mix(colLayer2, colOnLayer2, 0.80), root.contentTransparency);\n        property color colLayer2Disabled: ColorUtils.transparentize(ColorUtils.mix(colLayer2, m3colors.m3background, 0.8), root.contentTransparency);\n        property color colLayer3: ColorUtils.transparentize(m3colors.m3surfaceContainerHigh, root.contentTransparency)\n        property color colOnLayer3: m3colors.m3onSurface;\n        property color colLayer3Hover: ColorUtils.transparentize(ColorUtils.mix(colLayer3, colOnLayer3, 0.90), root.contentTransparency)\n        property color colLayer3Active: ColorUtils.transparentize(ColorUtils.mix(colLayer3, colOnLayer3, 0.80), root.contentTransparency);\n        property color colLayer4: ColorUtils.transparentize(m3colors.m3surfaceContainerHighest, root.contentTransparency)\n        property color colOnLayer4: m3colors.m3onSurface;\n        property color colLayer4Hover: ColorUtils.transparentize(ColorUtils.mix(colLayer4, colOnLayer4, 0.90), root.contentTransparency)\n        property color colLayer4Active: ColorUtils.transparentize(ColorUtils.mix(colLayer4, colOnLayer4, 0.80), root.contentTransparency);\n        property color colPrimary: m3colors.m3primary\n        property color colOnPrimary: m3colors.m3onPrimary\n        property color colPrimaryHover: ColorUtils.mix(colors.colPrimary, colLayer1Hover, 0.87)\n        property color colPrimaryActive: ColorUtils.mix(colors.colPrimary, colLayer1Active, 0.7)\n        property color colPrimaryContainer: m3colors.m3primaryContainer\n        property color colPrimaryContainerHover: ColorUtils.mix(colors.colPrimaryContainer, colors.colOnPrimaryContainer, 0.9)\n        property color colPrimaryContainerActive: ColorUtils.mix(colors.colPrimaryContainer, colors.colOnPrimaryContainer, 0.8)\n        property color colOnPrimaryContainer: m3colors.m3onPrimaryContainer\n        property color colSecondary: m3colors.m3secondary\n        property color colOnSecondary: m3colors.m3onSecondary\n        property color colSecondaryHover: ColorUtils.mix(m3colors.m3secondary, colLayer1Hover, 0.85)\n        property color colSecondaryActive: ColorUtils.mix(m3colors.m3secondary, colLayer1Active, 0.4)\n        property color colSecondaryContainer: m3colors.m3secondaryContainer\n        property color colSecondaryContainerHover: ColorUtils.mix(m3colors.m3secondaryContainer, m3colors.m3onSecondaryContainer, 0.90)\n        property color colSecondaryContainerActive: ColorUtils.mix(m3colors.m3secondaryContainer, m3colors.m3onSecondaryContainer, 0.54)\n        property color colTertiary: m3colors.m3tertiary\n        property color colTertiaryHover: ColorUtils.mix(m3colors.m3tertiary, colLayer1Hover, 0.85)\n        property color colTertiaryActive: ColorUtils.mix(m3colors.m3tertiary, colLayer1Active, 0.4)\n        property color colTertiaryContainer: m3colors.m3tertiaryContainer\n        property color colTertiaryContainerHover: ColorUtils.mix(m3colors.m3tertiaryContainer, m3colors.m3onTertiaryContainer, 0.90)\n        property color colTertiaryContainerActive: ColorUtils.mix(m3colors.m3tertiaryContainer, colLayer1Active, 0.54)\n        property color colOnTertiary: m3colors.m3onTertiary\n        property color colOnTertiaryContainer: m3colors.m3onTertiaryContainer\n        property color colOnSecondaryContainer: m3colors.m3onSecondaryContainer\n        property color colSurfaceContainerLow: ColorUtils.transparentize(m3colors.m3surfaceContainerLow, root.contentTransparency)\n        property color colSurfaceContainer: ColorUtils.transparentize(m3colors.m3surfaceContainer, root.contentTransparency)\n        property color colBackgroundSurfaceContainer: ColorUtils.transparentize(m3colors.m3surfaceContainer, root.backgroundTransparency)\n        property color colSurfaceContainerHigh: ColorUtils.transparentize(m3colors.m3surfaceContainerHigh, root.contentTransparency)\n        property color colSurfaceContainerHighest: ColorUtils.transparentize(m3colors.m3surfaceContainerHighest, root.contentTransparency)\n        property color colSurfaceContainerHighestHover: ColorUtils.mix(m3colors.m3surfaceContainerHighest, m3colors.m3onSurface, 0.95)\n        property color colSurfaceContainerHighestActive: ColorUtils.mix(m3colors.m3surfaceContainerHighest, m3colors.m3onSurface, 0.85)\n        property color colOnSurface: m3colors.m3onSurface\n        property color colOnSurfaceVariant: m3colors.m3onSurfaceVariant\n        property color colTooltip: m3colors.m3inverseSurface\n        property color colOnTooltip: m3colors.m3inverseOnSurface\n        property color colScrim: ColorUtils.transparentize(m3colors.m3scrim, 0.5)\n        property color colShadow: ColorUtils.transparentize(m3colors.m3shadow, 0.7)\n        property color colOutline: m3colors.m3outline\n        property color colOutlineVariant: m3colors.m3outlineVariant\n        property color colError: m3colors.m3error\n        property color colErrorHover: ColorUtils.mix(m3colors.m3error, colLayer1Hover, 0.85)\n        property color colErrorActive: ColorUtils.mix(m3colors.m3error, colLayer1Active, 0.7)\n        property color colOnError: m3colors.m3onError\n        property color colErrorContainer: m3colors.m3errorContainer\n        property color colErrorContainerHover: ColorUtils.mix(m3colors.m3errorContainer, m3colors.m3onErrorContainer, 0.90)\n        property color colErrorContainerActive: ColorUtils.mix(m3colors.m3errorContainer, m3colors.m3onErrorContainer, 0.70)\n        property color colOnErrorContainer: m3colors.m3onErrorContainer\n    }\n\n    rounding: QtObject {\n        property int unsharpen: 2\n        property int unsharpenmore: 6\n        property int verysmall: 8\n        property int small: 12\n        property int normal: 17\n        property int large: 23\n        property int verylarge: 30\n        property int full: 9999\n        property int screenRounding: large\n        property int windowRounding: 18\n    }\n\n    font: QtObject {\n        property QtObject family: QtObject {\n            property string main: Config.options.appearance.fonts.main\n            property string numbers: Config.options.appearance.fonts.numbers\n            property string title: Config.options.appearance.fonts.title\n            property string iconMaterial: \"Material Symbols Rounded\"\n            property string iconNerd: Config.options.appearance.fonts.iconNerd\n            property string monospace: Config.options.appearance.fonts.monospace\n            property string reading: Config.options.appearance.fonts.reading\n            property string expressive: Config.options.appearance.fonts.expressive\n        }\n        property QtObject variableAxes: QtObject {\n            property var main: ({\n                \"wght\": 450,\n                \"wdth\": 100,\n            })\n            property var numbers: ({\n                \"wght\": 450,\n            })\n            property var title: ({ // Slightly bold weight for title\n                \"wght\": 550, // Weight (Lowered to compensate for increased grade)\n            })\n        }\n        property QtObject pixelSize: QtObject {\n            property int smallest: 10\n            property int smaller: 12\n            property int smallie: 13\n            property int small: 15\n            property int normal: 16\n            property int large: 17\n            property int larger: 19\n            property int huge: 22\n            property int hugeass: 23\n            property int title: huge\n        }\n    }\n\n    animationCurves: QtObject {\n        readonly property list<real> expressiveFastSpatial: [0.42, 1.67, 0.21, 0.90, 1, 1] // Default, 350ms\n        readonly property list<real> expressiveDefaultSpatial: [0.38, 1.21, 0.22, 1.00, 1, 1] // Default, 500ms\n        readonly property list<real> expressiveSlowSpatial: [0.39, 1.29, 0.35, 0.98, 1, 1] // Default, 650ms\n        readonly property list<real> expressiveEffects: [0.34, 0.80, 0.34, 1.00, 1, 1] // Default, 200ms\n        readonly property list<real> emphasized: [0.05, 0, 2 / 15, 0.06, 1 / 6, 0.4, 5 / 24, 0.82, 0.25, 1, 1, 1]\n        readonly property list<real> emphasizedFirstHalf: [0.05, 0, 2 / 15, 0.06, 1 / 6, 0.4, 5 / 24, 0.82]\n        readonly property list<real> emphasizedLastHalf: [5 / 24, 0.82, 0.25, 1, 1, 1]\n        readonly property list<real> emphasizedAccel: [0.3, 0, 0.8, 0.15, 1, 1]\n        readonly property list<real> emphasizedDecel: [0.05, 0.7, 0.1, 1, 1, 1]\n        readonly property list<real> standard: [0.2, 0, 0, 1, 1, 1]\n        readonly property list<real> standardAccel: [0.3, 0, 1, 1, 1, 1]\n        readonly property list<real> standardDecel: [0, 0, 0, 1, 1, 1]\n        readonly property real expressiveFastSpatialDuration: 350\n        readonly property real expressiveDefaultSpatialDuration: 500\n        readonly property real expressiveSlowSpatialDuration: 650\n        readonly property real expressiveEffectsDuration: 200\n    }\n\n    animation: QtObject {\n        property QtObject elementMove: QtObject {\n            property int duration: animationCurves.expressiveDefaultSpatialDuration\n            property int type: Easing.BezierSpline\n            property list<real> bezierCurve: animationCurves.expressiveDefaultSpatial\n            property int velocity: 650\n            property Component numberAnimation: Component {\n                NumberAnimation {\n                    duration: root.animation.elementMove.duration\n                    easing.type: root.animation.elementMove.type\n                    easing.bezierCurve: root.animation.elementMove.bezierCurve\n                }\n            }\n        }\n\n        property QtObject elementMoveEnter: QtObject {\n            property int duration: 400\n            property int type: Easing.BezierSpline\n            property list<real> bezierCurve: animationCurves.emphasizedDecel\n            property int velocity: 650\n            property Component numberAnimation: Component {\n                NumberAnimation {\n                    alwaysRunToEnd: true\n                    duration: root.animation.elementMoveEnter.duration\n                    easing.type: root.animation.elementMoveEnter.type\n                    easing.bezierCurve: root.animation.elementMoveEnter.bezierCurve\n                }\n            }\n        }\n\n        property QtObject elementMoveExit: QtObject {\n            property int duration: 200\n            property int type: Easing.BezierSpline\n            property list<real> bezierCurve: animationCurves.emphasizedAccel\n            property int velocity: 650\n            property Component numberAnimation: Component {\n                NumberAnimation {\n                    alwaysRunToEnd: true\n                    duration: root.animation.elementMoveExit.duration\n                    easing.type: root.animation.elementMoveExit.type\n                    easing.bezierCurve: root.animation.elementMoveExit.bezierCurve\n                }\n            }\n        }\n\n        property QtObject elementMoveFast: QtObject {\n            property int duration: animationCurves.expressiveEffectsDuration\n            property int type: Easing.BezierSpline\n            property list<real> bezierCurve: animationCurves.expressiveEffects\n            property int velocity: 850\n            property Component colorAnimation: Component { ColorAnimation {\n                duration: root.animation.elementMoveFast.duration\n                easing.type: root.animation.elementMoveFast.type\n                easing.bezierCurve: root.animation.elementMoveFast.bezierCurve\n            }}\n            property Component numberAnimation: Component { NumberAnimation {\n                alwaysRunToEnd: true\n                duration: root.animation.elementMoveFast.duration\n                easing.type: root.animation.elementMoveFast.type\n                easing.bezierCurve: root.animation.elementMoveFast.bezierCurve\n            }}\n        }\n\n        property QtObject elementResize: QtObject {\n            property int duration: 300\n            property int type: Easing.BezierSpline\n            property list<real> bezierCurve: animationCurves.emphasized\n            property int velocity: 650\n            property Component numberAnimation: Component {\n                NumberAnimation {\n                    alwaysRunToEnd: true\n                    duration: root.animation.elementResize.duration\n                    easing.type: root.animation.elementResize.type\n                    easing.bezierCurve: root.animation.elementResize.bezierCurve\n                }\n            }\n        }\n\n        property QtObject clickBounce: QtObject {\n            property int duration: 400\n            property int type: Easing.BezierSpline\n            property list<real> bezierCurve: animationCurves.expressiveDefaultSpatial\n            property int velocity: 850\n            property Component numberAnimation: Component { NumberAnimation {\n                alwaysRunToEnd: true\n                duration: root.animation.clickBounce.duration\n                easing.type: root.animation.clickBounce.type\n                easing.bezierCurve: root.animation.clickBounce.bezierCurve\n            }}\n        }\n        \n        property QtObject scroll: QtObject {\n            property int duration: 200\n            property int type: Easing.BezierSpline\n            property list<real> bezierCurve: animationCurves.standardDecel\n        }\n\n        property QtObject menuDecel: QtObject {\n            property int duration: 350\n            property int type: Easing.OutExpo\n        }\n    }\n\n    sizes: QtObject {\n        property real baseBarHeight: 40\n        property real baseBarHeight: 40t\n        property real barHeight: Config.options.bar.cornerStyle === 1 ? \n            (baseBarHeight + root.sizes.hyprlandGapsOut * 2) : baseBarHeight\n        property real barCenterSideModuleWidth: Config.options?.bar.verbose ? 360 : 140\n        property real barCenterSideModuleWidthShortened: 280\n        property real barCenterSideModuleWidthHellaShortened: 190\n        property real barShortenScreenWidthThreshold: 1200 // Shorten if screen width is at most this value\n        property real barHellaShortenScreenWidthThreshold: 1000 // Shorten even more...\n        property real elevationMargin: 10\n        property real fabShadowRadius: 5\n        property real fabHoveredShadowRadius: 7\n        property real hyprlandGapsOut: 5\n        property real mediaControlsWidth: 440\n        property real mediaControlsHeight: 160\n        property real notificationPopupWidth: 410\n        property real osdWidth: 180\n        property real searchWidthCollapsed: 210\n        property real searchWidth: 360\n        property real sidebarWidth: 460\n        property real sidebarWidthExtended: 750\n        property real baseVerticalBarWidth: 46\n        property real verticalBarWidth: Config.options.bar.cornerStyle === 1 ? \n            (baseVerticalBarWidth + root.sizes.hyprlandGapsOut * 2) : baseVerticalBarWidth\n        property real wallpaperSelectorWidth: 1200\n        property real wallpaperSelectorHeight: 690\n        property real wallpaperSelectorItemMargins: 8\n        property real wallpaperSelectorItemPadding: 6\n    }\n\n    syntaxHighlightingTheme: root.m3colors.darkmode ? \"Monokai\" : \"ayu Light\"\n}\n","epoch":34,"telemetryInfo":{}}]],"operations":[{"type":"textEdit","uri":{"$mid":1,"fsPath":"/home/truonglangquan/.config/quickshell/ii/modules/ii/background/widgets/visualizer/VisualizerWidget.qml","external":"file:///home/truonglangquan/.config/quickshell/ii/modules/ii/background/widgets/visualizer/VisualizerWidget.qml","path":"/home/truonglangquan/.config/quickshell/ii/modules/ii/background/widgets/visualizer/VisualizerWidget.qml","scheme":"file"},"requestId":"request_36652861-fd15-443a-acb2-c77bf9c609e4","epoch":8,"edits":[{"text":"import qs.services\nimport qs.modules.common\nimport qs.modules.common.widgets\nimport QtQuick\nimport QtQuick.Effects\nimport qs.services\nimport qs.modules.common\nimport qs.modules.common.widgets\nimport qs.modules.ii.background.widgets\n\nAbstractBackgroundWidget {\n    property real maxVisualizerValue: 1000\n    configEntryName: \"wavevisualizer\"\n\n    property int smoothing: 2\n    property bool live: true\n    property color color: Appearance.m3colors.m3primary\n\n    onPointsChanged: () => {\n        root.requestPaint()\n    }\n\n        canvas.requestPaint()\n    onPaint: {\n        var ctx = getContext(\"2d\");\n    implicitHeight: 200\n    implicitWidth: 200\n        var points = root.points;\n    Canvas {\n        id: canvas\n        anchors.fill: parent\n        onPaint: {\n        var maxVal = root.maxVisualizerValue || 1;\n        var h = height;\n        var w = width;\n        var n = points.length;\n        if (n < 2) return;\n\n        // Smoothing: simple moving average (optional)\n        var smoothWindow = root.smoothing; // adjust for more/less smoothing\n        root.smoothPoints = [];\n        for (var i = 0; i < n; ++i) {\n            var sum = 0, count = 0;\n            for (var j = -smoothWindow; j <= smoothWindow; ++j) {\n                var idx = Math.max(0, Math.min(n - 1, i + j));\n                sum += points[idx];\n                count++;\n            }\n            root.smoothPoints.push(sum / count);\n        }\n        if (!root.live) root.smoothPoints.fill(0); // If not playing, show no points\n\n        ctx.beginPath();\n        ctx.moveTo(0, h);\n        for (var i = 0; i < n; ++i) {\n            var x = i * w / (n - 1);\n            var y = h - (root.smoothPoints[i] / maxVal) * h;\n            ctx.lineTo(x, y);\n        }\n        ctx.lineTo(w, h);\n        ctx.closePath();\n\n        ctx.fillStyle = Qt.rgba(\n            root.color.r,\n            root.color.g,\n            root.color.b,\n            0.15\n        );\n        ctx.fill();\n    }\n\n    layer.enabled: true\n    layer.effect: MultiEffect { // Blur a bit to obscure away the points\n        }\n        source: root\n        saturation: 0.2\n    layer.enabled: true\n    layer.effect: MultiEffect { // Blur a bit to obscure away the points\n        source: canvas\n        saturation: 0.2\n        blurEnabled: true\n        blurMax: 7\n        blur: 1","range":{"startLineNumber":1,"startColumn":1,"endLineNumber":84,"endColumn":1}}]},{"type":"textEdit","uri":{"$mid":1,"fsPath":"/home/truonglangquan/.config/quickshell/ii/modules/ii/background/Background.qml","external":"file:///home/truonglangquan/.config/quickshell/ii/modules/ii/background/Background.qml","path":"/home/truonglangquan/.config/quickshell/ii/modules/ii/background/Background.qml","scheme":"file"},"requestId":"request_36652861-fd15-443a-acb2-c77bf9c609e4","epoch":11,"edits":[{"text":"pragma ComponentBehavior: Bound\n\nimport qs\nimport qs.services\nimport qs.modules.common\nimport qs.modules.common.widgets\nimport qs.modules.common.widgets.widgetCanvas\nimport qs.modules.common.functions as CF\nimport QtQuick\nimport QtQuick.Layouts\nimport Qt5Compat.GraphicalEffects\nimport Quickshell\nimport Quickshell.Io\nimport Quickshell.Wayland\nimport Quickshell.Hyprland\n\nimport qs.modules.ii.background.widgets\nimport qs.modules.ii.background.widgets.clock\nimport qs.modules.ii.background.widgets.weather\nimport qs.modules.ii.background.widgets.visualizer\n\nVariants {\n    id: root\n    model: Quickshell.screens\n\n    PanelWindow {\n        id: bgRoot\n\n        required property var modelData\n\n        // Hide when fullscreen\n        property list<HyprlandWorkspace> workspacesForMonitor: Hyprland.workspaces.values.filter(workspace => workspace.monitor && workspace.monitor.name == monitor.name)\n        property var activeWorkspaceWithFullscreen: workspacesForMonitor.filter(workspace => ((workspace.toplevels.values.filter(window => window.wayland?.fullscreen)[0] != undefined) && workspace.active))[0]\n        visible: GlobalStates.screenLocked || (!(activeWorkspaceWithFullscreen != undefined)) || !Config?.options.background.hideWhenFullscreen\n\n        // Workspaces\n        property HyprlandMonitor monitor: Hyprland.monitorFor(modelData)\n        property list<var> relevantWindows: HyprlandData.windowList.filter(win => win.monitor == monitor?.id && win.workspace.id >= 0).sort((a, b) => a.workspace.id - b.workspace.id)\n        property int firstWorkspaceId: relevantWindows[0]?.workspace.id || 1\n        property int lastWorkspaceId: relevantWindows[relevantWindows.length - 1]?.workspace.id || 10\n        // Wallpaper\n        property bool wallpaperIsVideo: Config.options.background.wallpaperPath.endsWith(\".mp4\") || Config.options.background.wallpaperPath.endsWith(\".webm\") || Config.options.background.wallpaperPath.endsWith(\".mkv\") || Config.options.background.wallpaperPath.endsWith(\".avi\") || Config.options.background.wallpaperPath.endsWith(\".mov\")\n        property string wallpaperPath: wallpaperIsVideo ? Config.options.background.thumbnailPath : Config.options.background.wallpaperPath\n        property bool wallpaperSafetyTriggered: {\n            const enabled = Config.options.workSafety.enable.wallpaper;\n            const sensitiveWallpaper = (CF.StringUtils.stringListContainsSubstring(wallpaperPath.toLowerCase(), Config.options.workSafety.triggerCondition.fileKeywords));\n            const sensitiveNetwork = (CF.StringUtils.stringListContainsSubstring(Network.networkName.toLowerCase(), Config.options.workSafety.triggerCondition.networkNameKeywords));\n            return enabled && sensitiveWallpaper && sensitiveNetwork;\n        }\n        property real wallpaperToScreenRatio: Math.min(wallpaperWidth / screen.width, wallpaperHeight / screen.height)\n        property real preferredWallpaperScale: Config.options.background.parallax.workspaceZoom\n        property real effectiveWallpaperScale: 1 // Some reasonable init value, to be updated\n        property int wallpaperWidth: modelData.width // Some reasonable init value, to be updated\n        property int wallpaperHeight: modelData.height // Some reasonable init value, to be updated\n        property real movableXSpace: ((wallpaperWidth / wallpaperToScreenRatio * effectiveWallpaperScale) - screen.width) / 2\n        property real movableYSpace: ((wallpaperHeight / wallpaperToScreenRatio * effectiveWallpaperScale) - screen.height) / 2\n        readonly property bool verticalParallax: (Config.options.background.parallax.autoVertical && wallpaperHeight > wallpaperWidth) || Config.options.background.parallax.vertical\n        // Colors\n        property bool shouldBlur: (GlobalStates.screenLocked && Config.options.lock.blur.enable)\n        property color dominantColor: Appearance.colors.colPrimary // Default, to be changed\n        property bool dominantColorIsDark: dominantColor.hslLightness < 0.5\n        property color colText: {\n            if (wallpaperSafetyTriggered)\n                return CF.ColorUtils.mix(Appearance.colors.colOnLayer0, Appearance.colors.colPrimary, 0.75);\n            return (GlobalStates.screenLocked && shouldBlur) ? Appearance.colors.colOnLayer0 : CF.ColorUtils.colorWithLightness(Appearance.colors.colPrimary, (dominantColorIsDark ? 0.8 : 0.12));\n        }\n        Behavior on colText {\n            animation: Appearance.animation.elementMoveFast.colorAnimation.createObject(this)\n        }\n\n        // Layer props\n        screen: modelData\n        exclusionMode: ExclusionMode.Ignore\n        WlrLayershell.layer: (GlobalStates.screenLocked && !scaleAnim.running) ? WlrLayer.Overlay : WlrLayer.Bottom\n        // WlrLayershell.layer: WlrLayer.Bottom\n        WlrLayershell.namespace: \"quickshell:background\"\n        anchors {\n            top: true\n            bottom: true\n            left: true\n            right: true\n        }\n        color: {\n            if (!bgRoot.wallpaperSafetyTriggered || bgRoot.wallpaperIsVideo)\n                return \"transparent\";\n            return CF.ColorUtils.mix(Appearance.colors.colLayer0, Appearance.colors.colPrimary, 0.75);\n        }\n        Behavior on color {\n            animation: Appearance.animation.elementMoveFast.colorAnimation.createObject(this)\n        }\n\n        onWallpaperPathChanged: {\n            bgRoot.updateZoomScale();\n            // Clock position gets updated after zoom scale is updated\n        }\n\n        // Wallpaper zoom scale\n        function updateZoomScale() {\n        import qs.modules.ii.background.widgets.visualizer\n            getWallpaperSizeProc.path = bgRoot.wallpaperPath;\n            getWallpaperSizeProc.running = true;\n        }\n        Process {\n            id: getWallpaperSizeProc\n            property string path: bgRoot.wallpaperPath\n            command: [\"magick\", \"identify\", \"-format\", \"%w %h\", path]\n            stdout: StdioCollector {\n                id: wallpaperSizeOutputCollector\n                onStreamFinished: {\n                    const output = wallpaperSizeOutputCollector.text;\n                    const [width, height] = output.split(\" \").map(Number);\n                    const [screenWidth, screenHeight] = [bgRoot.screen.width, bgRoot.screen.height];\n                    bgRoot.wallpaperWidth = width;\n                    bgRoot.wallpaperHeight = height;\n\n                    if (width <= screenWidth || height <= screenHeight) {\n                        // Undersized/perfectly sized wallpapers\n                        bgRoot.effectiveWallpaperScale = Math.max(screenWidth / width, screenHeight / height);\n                    } else {\n                        // Oversized = can be zoomed for parallax, yay\n                        bgRoot.effectiveWallpaperScale = Math.min(bgRoot.preferredWallpaperScale, width / screenWidth, height / screenHeight);\n                    }\n                }\n            }\n        }\n\n        Item {\n            anchors.fill: parent\n            clip: true\n\n            // Wallpaper\n            StyledImage {\n                id: wallpaper\n                visible: opacity > 0 && !blurLoader.active\n                opacity: (status === Image.Ready && !bgRoot.wallpaperIsVideo) ? 1 : 0\n                cache: false\n                smooth: false\n                // Range = groups that workspaces span on\n                property int chunkSize: Config?.options.bar.workspaces.shown ?? 10\n                property int lower: Math.floor(bgRoot.firstWorkspaceId / chunkSize) * chunkSize\n                property int upper: Math.ceil(bgRoot.lastWorkspaceId / chunkSize) * chunkSize\n                property int range: upper - lower\n                property real valueX: {\n                    let result = 0.5;\n                    if (Config.options.background.parallax.enableWorkspace && !bgRoot.verticalParallax) {\n                        result = ((bgRoot.monitor.activeWorkspace?.id - lower) / range);\n                    }\n                    if (Config.options.background.parallax.enableSidebar) {\n                        result += (0.15 * GlobalStates.sidebarRightOpen - 0.15 * GlobalStates.sidebarLeftOpen);\n                    }\n                    return result;\n                }\n                property real valueY: {\n                    let result = 0.5;\n                    if (Config.options.background.parallax.enableWorkspace && bgRoot.verticalParallax) {\n                        result = ((bgRoot.monitor.activeWorkspace?.id - lower) / range);\n                    }\n                    return result;\n                }\n                property real effectiveValueX: Math.max(0, Math.min(1, valueX))\n                property real effectiveValueY: Math.max(0, Math.min(1, valueY))\n                x: -(bgRoot.movableXSpace) - (effectiveValueX - 0.5) * 2 * bgRoot.movableXSpace\n                y: -(bgRoot.movableYSpace) - (effectiveValueY - 0.5) * 2 * bgRoot.movableYSpace\n                source: bgRoot.wallpaperSafetyTriggered ? \"\" : bgRoot.wallpaperPath\n                fillMode: Image.PreserveAspectCrop\n                Behavior on x {\n                    NumberAnimation {\n                        duration: 600\n                        easing.type: Easing.OutCubic\n                    }\n                }\n                Behavior on y {\n                    NumberAnimation {\n                        duration: 600\n                        easing.type: Easing.OutCubic\n                    }\n                }\n                sourceSize {\n                    width: bgRoot.screen.width * bgRoot.effectiveWallpaperScale * bgRoot.monitor.scale\n                    height: bgRoot.screen.height * bgRoot.effectiveWallpaperScale * bgRoot.monitor.scale\n                }\n                width: bgRoot.wallpaperWidth / bgRoot.wallpaperToScreenRatio * bgRoot.effectiveWallpaperScale\n                height: bgRoot.wallpaperHeight / bgRoot.wallpaperToScreenRatio * bgRoot.effectiveWallpaperScale\n            }\n\n            Loader {\n                id: blurLoader\n                active: Config.options.lock.blur.enable && (GlobalStates.screenLocked || scaleAnim.running)\n                anchors.fill: wallpaper\n                scale: GlobalStates.screenLocked ? Config.options.lock.blur.extraZoom : 1\n                Behavior on scale {\n                    NumberAnimation {\n                        id: scaleAnim\n                        duration: 400\n                        easing.type: Easing.BezierSpline\n                        easing.bezierCurve: Appearance.animationCurves.expressiveDefaultSpatial\n                    }\n                }\n                sourceComponent: GaussianBlur {\n                    source: wallpaper\n                    radius: GlobalStates.screenLocked ? Config.options.lock.blur.radius : 0\n                    samples: radius * 2 + 1\n\n                    Rectangle {\n                        opacity: GlobalStates.screenLocked ? 1 : 0\n                        anchors.fill: parent\n                        color: CF.ColorUtils.transparentize(Appearance.colors.colLayer0, 0.7)\n                    }\n                }\n            }\n\n            WidgetCanvas {\n                id: widgetCanvas\n                anchors {\n                    left: wallpaper.left\n                    right: wallpaper.right\n                    top: wallpaper.top\n                    bottom: wallpaper.bottom\n                    horizontalCenter: undefined\n                    verticalCenter: undefined\n                    readonly property real parallaxFactor: Config.options.background.parallax.widgetsFactor\n                    leftMargin: {\n                        const xOnWallpaper = bgRoot.movableXSpace;\n                        const extraMove = (wallpaper.effectiveValueX * 2 * bgRoot.movableXSpace) * (parallaxFactor - 1);\n                        return xOnWallpaper - extraMove;\n                    }\n                    topMargin: {\n                        const yOnWallpaper = bgRoot.movableYSpace;\n                        const extraMove = (wallpaper.effectiveValueY * 2 * bgRoot.movableYSpace) * (parallaxFactor - 1);\n                        return yOnWallpaper - extraMove;\n                    }\n                    Behavior on leftMargin {\n                        animation: Appearance.animation.elementMove.numberAnimation.createObject(this)\n                    }\n                    Behavior on topMargin {\n                        animation: Appearance.animation.elementMove.numberAnimation.createObject(this)\n                    }\n                }\n                width: wallpaper.width\n                height: wallpaper.height\n                states: State {\n                    name: \"centered\"\n                    when: GlobalStates.screenLocked || bgRoot.wallpaperSafetyTriggered\n                    PropertyChanges {\n                        target: widgetCanvas\n                        width: parent.width\n                        height: parent.height\n                    }\n                    AnchorChanges {\n                        target: widgetCanvas\n                        anchors {\n                            left: undefined\n                            right: undefined\n                            top: undefined\n                            bottom: undefined\n                            horizontalCenter: parent.horizontalCenter\n                            verticalCenter: parent.verticalCenter\n                        }\n                    }\n                }\n                transitions: Transition {\n                    PropertyAnimation {\n                        properties: \"width,height\"\n                        duration: Appearance.animation.elementMove.duration\n                        easing.type: Appearance.animation.elementMove.type\n                        easing.bezierCurve: Appearance.animation.elementMove.bezierCurve\n                    }\n                    AnchorAnimation {\n                        duration: Appearance.animation.elementMove.duration\n                        easing.type: Appearance.animation.elementMove.type\n                        easing.bezierCurve: Appearance.animation.elementMove.bezierCurve\n                    }\n                }\n\n                FadeLoader {\n                    shown: Config.options.background.widgets.weather.enable\n                    sourceComponent: WeatherWidget {\n                        screenWidth: bgRoot.screen.width\n                        screenHeight: bgRoot.screen.height\n                        scaledScreenWidth: bgRoot.screen.width / bgRoot.effectiveWallpaperScale\n                        scaledScreenHeight: bgRoot.screen.height / bgRoot.effectiveWallpaperScale\n                        wallpaperScale: bgRoot.effectiveWallpaperScale\n                    }\n                }\n\n                FadeLoader {\n                    shown: Config.options.background.widgets.clock.enable\n                    sourceComponent: ClockWidget {\n                        screenWidth: bgRoot.screen.width\n                        screenHeight: bgRoot.screen.height\n                        scaledScreenWidth: bgRoot.screen.width / bgRoot.effectiveWallpaperScale\n                        scaledScreenHeight: bgRoot.screen.height / bgRoot.effectiveWallpaperScale\n                        wallpaperScale: bgRoot.effectiveWallpaperScale\n                        wallpaperSafetyTriggered: bgRoot.wallpaperSafetyTriggered\n                    }\n                }\n\n                FadeLoader {\n                    shown: Config.options.background.widgets.wavevisualizer.enable\n                    sourceComponent: VisualizerWidget {\n                        screenWidth: bgRoot.screen.width\n                        screenHeight: bgRoot.screen.height\n                        scaledScreenWidth: bgRoot.screen.width / bgRoot.effectiveWallpaperScale\n                        scaledScreenHeight: bgRoot.screen.height / bgRoot.effectiveWallpaperScale\n                        wallpaperScale: bgRoot.effectiveWallpaperScale\n                    }\n                }\n            }\n        }\n    }\n}\n","range":{"startLineNumber":1,"startColumn":1,"endLineNumber":313,"endColumn":1}}]},{"type":"textEdit","uri":{"$mid":1,"fsPath":"/home/truonglangquan/.config/quickshell/ii/modules/ii/background/widgets/visualizer/VisualizerWidget.qml","external":"file:///home/truonglangquan/.config/quickshell/ii/modules/ii/background/widgets/visualizer/VisualizerWidget.qml","path":"/home/truonglangquan/.config/quickshell/ii/modules/ii/background/widgets/visualizer/VisualizerWidget.qml","scheme":"file"},"requestId":"request_cb2be037-f9b8-4207-97ab-431ca9a30b46","epoch":15,"edits":[{"text":"import QtQuick\nimport QtQuick.Effects\nimport qs.services\nimport qs.modules.common\nimport qs.modules.common.widgets\nimport qs.modules.ii.background.widgets\n\nAbstractBackgroundWidget {\n    id: root\n    configEntryName: \"wavevisualizer\"\n\n    property list<var> points: []\n    property list<var> smoothPoints: []\n    property real maxVisualizerValue: 1000\n    property int smoothing: 2\n    property bool live: true\n    property color color: Appearance.m3colors.m3primary\n\n    implicitHeight: 200\n    implicitWidth: 300\n\n    onPointsChanged: {\n        canvas.requestPaint()\n    }\n\n    Canvas {\n        id: canvas\n        anchors.fill: parent\n        onPaint: {\n            var ctx = getContext(\"2d\");\n            ctx.clearRect(0, 0, width, height);\n\n            var points = root.points || [];\n            var maxVal = root.maxVisualizerValue || 1;\n            var h = height;\n            var w = width;\n            var n = points.length;\n            if (n < 2) return;\n\n            // Smoothing: simple moving average (optional)\n            var smoothWindow = root.smoothing; // adjust for more/less smoothing\n            root.smoothPoints = [];\n            for (var i = 0; i < n; ++i) {\n                var sum = 0, count = 0;\n                for (var j = -smoothWindow; j <= smoothWindow; ++j) {\n                    var idx = Math.max(0, Math.min(n - 1, i + j));\n                    sum += points[idx];\n                    count++;\n                }\n                root.smoothPoints.push(sum / count);\n            }\n            if (!root.live) {\n                for (var k = 0; k < root.smoothPoints.length; ++k) root.smoothPoints[k] = 0;\n            }\n\n            ctx.beginPath();\n            ctx.moveTo(0, h);\n            for (var i = 0; i < n; ++i) {\n                var x = i * w / (n - 1);\n                var y = h - (root.smoothPoints[i] / maxVal) * h;\n                ctx.lineTo(x, y);\n            }\n            ctx.lineTo(w, h);\n            ctx.closePath();\n\n            ctx.fillStyle = Qt.rgba(0, 0, 0, 0.15);\n            // If QColor provided, try to extract rgba components safely\n            try {\n                ctx.fillStyle = Qt.rgba(root.color.r, root.color.g, root.color.b, 0.15);\n            } catch (e) {}\n            ctx.fill();\n        }\n    }\n\n    layer.enabled: true\n    layer.effect: MultiEffect {\n        source: canvas\n        saturation: 0.2\n        blurEnabled: true\n        blurMax: 7\n        blur: 1\n    }\n}","range":{"startLineNumber":1,"startColumn":1,"endLineNumber":84,"endColumn":1}}]},{"type":"textEdit","uri":{"$mid":1,"fsPath":"/home/truonglangquan/.config/quickshell/ii/modules/ii/background/widgets/visualizer/VisualizerWidget.qml","external":"file:///home/truonglangquan/.config/quickshell/ii/modules/ii/background/widgets/visualizer/VisualizerWidget.qml","path":"/home/truonglangquan/.config/quickshell/ii/modules/ii/background/widgets/visualizer/VisualizerWidget.qml","scheme":"file"},"requestId":"request_12acbd17-10e4-4453-b311-7bf9fa6fcc09","epoch":19,"edits":[{"text":"pragma ComponentBehavior: Bound\n\nimport qs.components\nimport qs.services\nimport qs.config\nimport Caelestia.Services\nimport QtQuick 2.15\nimport QtQuick.Effects 1.15\n\nItem {\n    id: root\n\n    // Properties expected by Background.qml when instantiating this widget\n    property int screenWidth: 0\n    property int screenHeight: 0\n    property int scaledScreenWidth: 0\n    property int scaledScreenHeight: 0\n    property real wallpaperScale: 1.0\n\n    // Visualizer-specific properties\n    property var points: []\n    property var smoothPoints: []\n    property real maxVisualizerValue: 1000\n    property int smoothing: 2\n    property bool live: true\n    property color color: \"white\"\n\n    implicitWidth: 300\n    implicitHeight: 200\n\n    onPointsChanged: canvas.requestPaint()\n\n    Canvas {\n        id: canvas\n        anchors.fill: parent\n        renderTarget: Canvas.Image\n        onPaint: {\n            var ctx = getContext(\"2d\");\n            ctx.clearRect(0, 0, width, height);\n\n            var pts = root.points || [];\n            var maxVal = root.maxVisualizerValue || 1;\n            var h = height;\n            var w = width;\n            var n = pts.length;\n            if (n < 2) return;\n\n            var smoothWindow = root.smoothing;\n            root.smoothPoints = [];\n            for (var i = 0; i < n; ++i) {\n                var sum = 0, count = 0;\n                for (var j = -smoothWindow; j <= smoothWindow; ++j) {\n                    var idx = Math.max(0, Math.min(n - 1, i + j));\n                    sum += pts[idx] || 0;\n                    count++;\n                }\n                root.smoothPoints.push(sum / count);\n            }\n            if (!root.live) {\n                for (var k = 0; k < root.smoothPoints.length; ++k) root.smoothPoints[k] = 0;\n            }\n\n            ctx.beginPath();\n            ctx.moveTo(0, h);\n            for (var i = 0; i < n; ++i) {\n                var x = (n === 1) ? w/2 : i * w / (n - 1);\n                var y = h - (root.smoothPoints[i] / maxVal) * h;\n                ctx.lineTo(x, y);\n            }\n            ctx.lineTo(w, h);\n            ctx.closePath();\n\n            // Draw fill\n            ctx.fillStyle = 'rgba(255,255,255,0.12)';\n            try { ctx.fillStyle = Qt.rgba(root.color.r, root.color.g, root.color.b, 0.12); } catch (e) {}\n            ctx.fill();\n        }\n    }\n\n    layer.enabled: true\n    layer.effect: MultiEffect {\n        source: canvas\n        saturation: 0.2\n        blurEnabled: true\n        blurMax: 7\n        blur: 1\n    }\n}\n        required property Item content\n        property bool isRight\n\n        model: Config.services.visualiserBars\n\n        ClippingRectangle {\n            id: bar\n\n            required property int modelData\n            property real value: Math.max(0, Math.min(1, Audio.cava.values[side.isRight ? modelData : side.count - modelData - 1]))\n\n            clip: true\n\n            x: modelData * ((side.content.width * 0.4) / Config.services.visualiserBars) + (side.isRight ? side.content.width * 0.6 : 0)\n            implicitWidth: (side.content.width * 0.4) / Config.services.visualiserBars - Appearance.spacing.small * Config.background.visualiser.spacing\n\n            y: side.content.height - height\n            implicitHeight: bar.value * side.content.height * 0.4\n\n            color: \"transparent\"\n            topLeftRadius: Appearance.rounding.small * Config.background.visualiser.rounding\n            topRightRadius: Appearance.rounding.small * Config.background.visualiser.rounding\n\n            Rectangle {\n                topLeftRadius: parent.topLeftRadius\n                topRightRadius: parent.topRightRadius\n\n                gradient: Gradient {\n                    orientation: Gradient.Vertical\n\n                    GradientStop {\n                        position: 0\n                        color: Qt.alpha(Colours.palette.m3primary, 0.7)\n\n                        Behavior on color {\n                            CAnim {}\n                        }\n                    }\n                    GradientStop {\n                        position: 1\n                        color: Qt.alpha(Colours.palette.m3inversePrimary, 0.7)\n\n                        Behavior on color {\n                            CAnim {}\n                        }\n                    }\n                }\n\n                anchors.left: parent.left\n                anchors.right: parent.right\n                y: parent.height - height\n                implicitHeight: side.content.height * 0.4\n            }\n\n            Behavior on value {\n                Anim {\n                    duration: Appearance.anim.durations.small\n                }\n            }\n        }\n    }\n}","range":{"startLineNumber":1,"startColumn":1,"endLineNumber":151,"endColumn":1}},{"text":"","range":{"startLineNumber":151,"startColumn":1,"endLineNumber":152,"endColumn":1}}]},{"type":"textEdit","uri":{"$mid":1,"fsPath":"/home/truonglangquan/.config/quickshell/ii/modules/ii/background/widgets/visualizer/VisualizerWidget.qml","external":"file:///home/truonglangquan/.config/quickshell/ii/modules/ii/background/widgets/visualizer/VisualizerWidget.qml","path":"/home/truonglangquan/.config/quickshell/ii/modules/ii/background/widgets/visualizer/VisualizerWidget.qml","scheme":"file"},"requestId":"request_2e7ef009-6f26-4986-a4c9-562bf3b5ca6e","epoch":23,"edits":[{"text":"pragma ComponentBehavior: Bound\n\nimport qs.components\nimport qs.services\nimport qs.config\nimport Caelestia.Services\nimport QtQuick 2.15\nimport QtQuick.Effects 1.15\n\nItem {\n    id: root\n\n    // Properties expected by Background.qml when instantiating this widget\n    property int screenWidth: 0\n    property int screenHeight: 0\n    property int scaledScreenWidth: 0\n    property int scaledScreenHeight: 0\n    property real wallpaperScale: 1.0\n\n    // Visualizer-specific properties\n    property var points: []\n    property var smoothPoints: []\n    property real maxVisualizerValue: 1000\n    property int smoothing: 2\n    property bool live: true\n    property color color: \"white\"\n\n    implicitWidth: 300\n    implicitHeight: 200\n\n    onPointsChanged: canvas.requestPaint()\n\n    Canvas {\n        id: canvas\n        anchors.fill: parent\n        renderTarget: Canvas.Image\n        onPaint: {\n            var ctx = getContext(\"2d\");\n            ctx.clearRect(0, 0, width, height);\n\n            var pts = root.points || [];\n            var maxVal = root.maxVisualizerValue || 1;\n            var h = height;\n            var w = width;\n            var n = pts.length;\n            if (n < 2) return;\n\n            var smoothWindow = root.smoothing;\n            root.smoothPoints = [];\n            for (var i = 0; i < n; ++i) {\n                var sum = 0, count = 0;\n                for (var j = -smoothWindow; j <= smoothWindow; ++j) {\n                    var idx = Math.max(0, Math.min(n - 1, i + j));\n                    sum += pts[idx] || 0;\n                    count++;\n                }\n                root.smoothPoints.push(sum / count);\n            }\n            if (!root.live) {\n                for (var k = 0; k < root.smoothPoints.length; ++k) root.smoothPoints[k] = 0;\n            }\n\n            ctx.beginPath();\n            ctx.moveTo(0, h);\n            for (var i = 0; i < n; ++i) {\n                var x = (n === 1) ? w/2 : i * w / (n - 1);\n                var y = h - (root.smoothPoints[i] / maxVal) * h;\n                ctx.lineTo(x, y);\n            }\n            ctx.lineTo(w, h);\n            ctx.closePath();\n\n            // Draw fill\n            ctx.fillStyle = 'rgba(255,255,255,0.12)';\n            try { ctx.fillStyle = Qt.rgba(root.color.r, root.color.g, root.color.b, 0.12); } catch (e) {}\n            ctx.fill();\n        }\n    }\n\n    layer.enabled: true\n    layer.effect: MultiEffect {\n        source: canvas\n        saturation: 0.2\n        blurEnabled: true\n        blurMax: 7\n        blur: 1\n    }\n}\n","range":{"startLineNumber":1,"startColumn":1,"endLineNumber":90,"endColumn":1}},{"text":"","range":{"startLineNumber":90,"startColumn":1,"endLineNumber":151,"endColumn":1}}]},{"type":"textEdit","uri":{"$mid":1,"fsPath":"/home/truonglangquan/.config/quickshell/ii/modules/ii/background/Background.qml","external":"file:///home/truonglangquan/.config/quickshell/ii/modules/ii/background/Background.qml","path":"/home/truonglangquan/.config/quickshell/ii/modules/ii/background/Background.qml","scheme":"file"},"requestId":"request_cb7a93be-25df-4726-8402-ccd1f79bce94","epoch":27,"edits":[{"text":"pragma ComponentBehavior: Bound\n\nimport qs\nimport qs.services\nimport qs.modules.common\nimport qs.modules.common.widgets\nimport qs.modules.common.widgets.widgetCanvas\nimport qs.modules.common.functions as CF\nimport QtQuick\nimport QtQuick.Layouts\nimport Qt5Compat.GraphicalEffects\nimport Quickshell\nimport Quickshell.Io\nimport Quickshell.Wayland\nimport Quickshell.Hyprland\n\nimport qs.modules.ii.background.widgets\nimport qs.modules.ii.background.widgets.clock\nimport qs.modules.ii.background.widgets.weather\nimport qs.modules.ii.background.widgets.visualizer\n\nVariants {\n    id: root\n    model: Quickshell.screens\n\n    PanelWindow {\n        id: bgRoot\n\n        required property var modelData\n\n        // Hide when fullscreen\n        property list<HyprlandWorkspace> workspacesForMonitor: Hyprland.workspaces.values.filter(workspace => workspace.monitor && workspace.monitor.name == monitor.name)\n        property var activeWorkspaceWithFullscreen: workspacesForMonitor.filter(workspace => ((workspace.toplevels.values.filter(window => window.wayland?.fullscreen)[0] != undefined) && workspace.active))[0]\n        visible: GlobalStates.screenLocked || (!(activeWorkspaceWithFullscreen != undefined)) || !Config?.options.background.hideWhenFullscreen\n\n        // Workspaces\n        property HyprlandMonitor monitor: Hyprland.monitorFor(modelData)\n        property list<var> relevantWindows: HyprlandData.windowList.filter(win => win.monitor == monitor?.id && win.workspace.id >= 0).sort((a, b) => a.workspace.id - b.workspace.id)\n        property int firstWorkspaceId: relevantWindows[0]?.workspace.id || 1\n        property int lastWorkspaceId: relevantWindows[relevantWindows.length - 1]?.workspace.id || 10\n        // Wallpaper\n        property bool wallpaperIsVideo: Config.options.background.wallpaperPath.endsWith(\".mp4\") || Config.options.background.wallpaperPath.endsWith(\".webm\") || Config.options.background.wallpaperPath.endsWith(\".mkv\") || Config.options.background.wallpaperPath.endsWith(\".avi\") || Config.options.background.wallpaperPath.endsWith(\".mov\")\n        property string wallpaperPath: wallpaperIsVideo ? Config.options.background.thumbnailPath : Config.options.background.wallpaperPath\n        property bool wallpaperSafetyTriggered: {\n            const enabled = Config.options.workSafety.enable.wallpaper;\n            const sensitiveWallpaper = (CF.StringUtils.stringListContainsSubstring(wallpaperPath.toLowerCase(), Config.options.workSafety.triggerCondition.fileKeywords));\n            const sensitiveNetwork = (CF.StringUtils.stringListContainsSubstring(Network.networkName.toLowerCase(), Config.options.workSafety.triggerCondition.networkNameKeywords));\n            return enabled && sensitiveWallpaper && sensitiveNetwork;\n        }\n        property real wallpaperToScreenRatio: Math.min(wallpaperWidth / screen.width, wallpaperHeight / screen.height)\n        property real preferredWallpaperScale: Config.options.background.parallax.workspaceZoom\n        property real effectiveWallpaperScale: 1 // Some reasonable init value, to be updated\n        property int wallpaperWidth: modelData.width // Some reasonable init value, to be updated\n        property int wallpaperHeight: modelData.height // Some reasonable init value, to be updated\n        property real movableXSpace: ((wallpaperWidth / wallpaperToScreenRatio * effectiveWallpaperScale) - screen.width) / 2\n        property real movableYSpace: ((wallpaperHeight / wallpaperToScreenRatio * effectiveWallpaperScale) - screen.height) / 2\n        readonly property bool verticalParallax: (Config.options.background.parallax.autoVertical && wallpaperHeight > wallpaperWidth) || Config.options.background.parallax.vertical\n        // Colors\n        property bool shouldBlur: (GlobalStates.screenLocked && Config.options.lock.blur.enable)\n        property color dominantColor: Appearance.colors.colPrimary // Default, to be changed\n        property bool dominantColorIsDark: dominantColor.hslLightness < 0.5\n        property color colText: {\n            if (wallpaperSafetyTriggered)\n                return CF.ColorUtils.mix(Appearance.colors.colOnLayer0, Appearance.colors.colPrimary, 0.75);\n            return (GlobalStates.screenLocked && shouldBlur) ? Appearance.colors.colOnLayer0 : CF.ColorUtils.colorWithLightness(Appearance.colors.colPrimary, (dominantColorIsDark ? 0.8 : 0.12));\n        }\n        Behavior on colText {\n            animation: Appearance.animation.elementMoveFast.colorAnimation.createObject(this)\n        }\n\n        // Layer props\n        screen: modelData\n        exclusionMode: ExclusionMode.Ignore\n        WlrLayershell.layer: (GlobalStates.screenLocked && !scaleAnim.running) ? WlrLayer.Overlay : WlrLayer.Bottom\n        // WlrLayershell.layer: WlrLayer.Bottom\n        WlrLayershell.namespace: \"quickshell:background\"\n        anchors {\n            top: true\n            bottom: true\n            left: true\n            right: true\n        }\n        color: {\n            if (!bgRoot.wallpaperSafetyTriggered || bgRoot.wallpaperIsVideo)\n                return \"transparent\";\n            return CF.ColorUtils.mix(Appearance.colors.colLayer0, Appearance.colors.colPrimary, 0.75);\n        }\n        Behavior on color {\n            animation: Appearance.animation.elementMoveFast.colorAnimation.createObject(this)\n        }\n\n        onWallpaperPathChanged: {\n            bgRoot.updateZoomScale();\n            // Clock position gets updated after zoom scale is updated\n        }\n\n        // Wallpaper zoom scale\n        function updateZoomScale() {\n            getWallpaperSizeProc.path = bgRoot.wallpaperPath;\n            getWallpaperSizeProc.running = true;\n        }\n        Process {\n            id: getWallpaperSizeProc\n            property string path: bgRoot.wallpaperPath\n            command: [\"magick\", \"identify\", \"-format\", \"%w %h\", path]\n            stdout: StdioCollector {\n                id: wallpaperSizeOutputCollector\n                onStreamFinished: {\n                    const output = wallpaperSizeOutputCollector.text;\n                    const [width, height] = output.split(\" \").map(Number);\n                    const [screenWidth, screenHeight] = [bgRoot.screen.width, bgRoot.screen.height];\n                    bgRoot.wallpaperWidth = width;\n                    bgRoot.wallpaperHeight = height;\n\n                    if (width <= screenWidth || height <= screenHeight) {\n                        // Undersized/perfectly sized wallpapers\n                        bgRoot.effectiveWallpaperScale = Math.max(screenWidth / width, screenHeight / height);\n                    } else {\n                        // Oversized = can be zoomed for parallax, yay\n                        bgRoot.effectiveWallpaperScale = Math.min(bgRoot.preferredWallpaperScale, width / screenWidth, height / screenHeight);\n                    }\n                }\n            }\n        }\n\n        Item {\n            anchors.fill: parent\n            clip: true\n\n            // Wallpaper\n            StyledImage {\n                id: wallpaper\n                visible: opacity > 0 && !blurLoader.active\n                opacity: (status === Image.Ready && !bgRoot.wallpaperIsVideo) ? 1 : 0\n                cache: false\n                smooth: false\n                // Range = groups that workspaces span on\n                property int chunkSize: Config?.options.bar.workspaces.shown ?? 10\n                property int lower: Math.floor(bgRoot.firstWorkspaceId / chunkSize) * chunkSize\n                property int upper: Math.ceil(bgRoot.lastWorkspaceId / chunkSize) * chunkSize\n                property int range: upper - lower\n                property real valueX: {\n                    let result = 0.5;\n                    if (Config.options.background.parallax.enableWorkspace && !bgRoot.verticalParallax) {\n                        result = ((bgRoot.monitor.activeWorkspace?.id - lower) / range);\n                    }\n                    if (Config.options.background.parallax.enableSidebar) {\n                        result += (0.15 * GlobalStates.sidebarRightOpen - 0.15 * GlobalStates.sidebarLeftOpen);\n                    }\n                    return result;\n                }\n                property real valueY: {\n                    let result = 0.5;\n                    if (Config.options.background.parallax.enableWorkspace && bgRoot.verticalParallax) {\n                        result = ((bgRoot.monitor.activeWorkspace?.id - lower) / range);\n                    }\n                    return result;\n                }\n                property real effectiveValueX: Math.max(0, Math.min(1, valueX))\n                property real effectiveValueY: Math.max(0, Math.min(1, valueY))\n                x: -(bgRoot.movableXSpace) - (effectiveValueX - 0.5) * 2 * bgRoot.movableXSpace\n                y: -(bgRoot.movableYSpace) - (effectiveValueY - 0.5) * 2 * bgRoot.movableYSpace\n                source: bgRoot.wallpaperSafetyTriggered ? \"\" : bgRoot.wallpaperPath\n                fillMode: Image.PreserveAspectCrop\n                Behavior on x {\n                    NumberAnimation {\n                        duration: 600\n                        easing.type: Easing.OutCubic\n                    }\n                }\n                Behavior on y {\n                    NumberAnimation {\n                        duration: 600\n                        easing.type: Easing.OutCubic\n                    }\n                }\n                sourceSize {\n                    width: bgRoot.screen.width * bgRoot.effectiveWallpaperScale * bgRoot.monitor.scale\n                    height: bgRoot.screen.height * bgRoot.effectiveWallpaperScale * bgRoot.monitor.scale\n                }\n                width: bgRoot.wallpaperWidth / bgRoot.wallpaperToScreenRatio * bgRoot.effectiveWallpaperScale\n                height: bgRoot.wallpaperHeight / bgRoot.wallpaperToScreenRatio * bgRoot.effectiveWallpaperScale\n            }\n\n            Loader {\n                id: blurLoader\n                active: Config.options.lock.blur.enable && (GlobalStates.screenLocked || scaleAnim.running)\n                anchors.fill: wallpaper\n                scale: GlobalStates.screenLocked ? Config.options.lock.blur.extraZoom : 1\n                Behavior on scale {\n                    NumberAnimation {\n                        id: scaleAnim\n                        duration: 400\n                        easing.type: Easing.BezierSpline\n                        easing.bezierCurve: Appearance.animationCurves.expressiveDefaultSpatial\n                    }\n                }\n                sourceComponent: GaussianBlur {\n                    source: wallpaper\n                    radius: GlobalStates.screenLocked ? Config.options.lock.blur.radius : 0\n                    samples: radius * 2 + 1\n\n                    Rectangle {\n                        opacity: GlobalStates.screenLocked ? 1 : 0\n                        anchors.fill: parent\n                        color: CF.ColorUtils.transparentize(Appearance.colors.colLayer0, 0.7)\n                    }\n                }\n            }\n\n            WidgetCanvas {\n                id: widgetCanvas\n                anchors {\n                    left: wallpaper.left\n                    right: wallpaper.right\n                    top: wallpaper.top\n                    bottom: wallpaper.bottom\n                    horizontalCenter: undefined\n                    verticalCenter: undefined\n                    readonly property real parallaxFactor: Config.options.background.parallax.widgetsFactor\n                    leftMargin: {\n                        const xOnWallpaper = bgRoot.movableXSpace;\n                        const extraMove = (wallpaper.effectiveValueX * 2 * bgRoot.movableXSpace) * (parallaxFactor - 1);\n                        return xOnWallpaper - extraMove;\n                    }\n                    topMargin: {\n                        const yOnWallpaper = bgRoot.movableYSpace;\n                        const extraMove = (wallpaper.effectiveValueY * 2 * bgRoot.movableYSpace) * (parallaxFactor - 1);\n                        return yOnWallpaper - extraMove;\n                    }\n                    Behavior on leftMargin {\n                        animation: Appearance.animation.elementMove.numberAnimation.createObject(this)\n                    }\n                    Behavior on topMargin {\n                        animation: Appearance.animation.elementMove.numberAnimation.createObject(this)\n                    }\n                }\n                width: wallpaper.width\n                height: wallpaper.height\n                states: State {\n                    name: \"centered\"\n                    when: GlobalStates.screenLocked || bgRoot.wallpaperSafetyTriggered\n                    PropertyChanges {\n                        target: widgetCanvas\n                        width: parent.width\n                        height: parent.height\n                    }\n                    AnchorChanges {\n                        target: widgetCanvas\n                        anchors {\n                            left: undefined\n                            right: undefined\n                            top: undefined\n                            bottom: undefined\n                            horizontalCenter: parent.horizontalCenter\n                            verticalCenter: parent.verticalCenter\n                        }\n                    }\n                }\n                transitions: Transition {\n                    PropertyAnimation {\n                        properties: \"width,height\"\n                        duration: Appearance.animation.elementMove.duration\n                        easing.type: Appearance.animation.elementMove.type\n                        easing.bezierCurve: Appearance.animation.elementMove.bezierCurve\n                    }\n                    AnchorAnimation {\n                        duration: Appearance.animation.elementMove.duration\n                        easing.type: Appearance.animation.elementMove.type\n                        easing.bezierCurve: Appearance.animation.elementMove.bezierCurve\n                    }\n                }\n\n                FadeLoader {\n                    shown: Config.options.background.widgets.weather.enable\n                    sourceComponent: WeatherWidget {\n                        screenWidth: bgRoot.screen.width\n                        screenHeight: bgRoot.screen.height\n                        scaledScreenWidth: bgRoot.screen.width / bgRoot.effectiveWallpaperScale\n                        scaledScreenHeight: bgRoot.screen.height / bgRoot.effectiveWallpaperScale\n                        wallpaperScale: bgRoot.effectiveWallpaperScale\n                    }\n                }\n\n                FadeLoader {\n                    shown: Config.options.background.widgets.clock.enable\n                    sourceComponent: ClockWidget {\n                        screenWidth: bgRoot.screen.width\n                        screenHeight: bgRoot.screen.height\n                        scaledScreenWidth: bgRoot.screen.width / bgRoot.effectiveWallpaperScale\n                        scaledScreenHeight: bgRoot.screen.height / bgRoot.effectiveWallpaperScale\n                        wallpaperScale: bgRoot.effectiveWallpaperScale\n                        wallpaperSafetyTriggered: bgRoot.wallpaperSafetyTriggered\n                    }\n                }\n\n                FadeLoader {\n                    // Always show the visualizer and make it full-screen\n                    shown: true\n                    sourceComponent: VisualizerWidget {\n                        // keep the original properties for compatibility\n                        screenWidth: bgRoot.screen.width\n                        screenHeight: bgRoot.screen.height\n                        scaledScreenWidth: bgRoot.screen.width / bgRoot.effectiveWallpaperScale\n                        scaledScreenHeight: bgRoot.screen.height / bgRoot.effectiveWallpaperScale\n                        wallpaperScale: bgRoot.effectiveWallpaperScale\n\n                        // Force full-screen sizing and placement inside the widget canvas\n                        width: bgRoot.screen.width\n                        height: bgRoot.screen.height\n                        x: 0\n                        y: 0\n                        anchors.fill: parent\n                        z: 9999\n                        visible: true\n                    }\n                }\n            }\n        }\n    }\n}\n","range":{"startLineNumber":1,"startColumn":1,"endLineNumber":323,"endColumn":1}}]},{"type":"textEdit","uri":{"$mid":1,"fsPath":"/home/truonglangquan/.config/quickshell/ii/modules/common/Appearance.qml","external":"file:///home/truonglangquan/.config/quickshell/ii/modules/common/Appearance.qml","path":"/home/truonglangquan/.config/quickshell/ii/modules/common/Appearance.qml","scheme":"file"},"requestId":"request_c4e9b9e4-4790-4a9b-a584-a0746d3f8185","epoch":31,"edits":[{"text":"import QtQuick\nimport Quickshell\nimport qs.modules.common.functions\npragma Singleton\npragma ComponentBehavior: Bound\n\nSingleton {\n    id: root\n    property QtObject m3colors\n    property QtObject animation\n    property QtObject animationCurves\n    property QtObject colors\n    property QtObject rounding\n    property QtObject font\n    property QtObject sizes\n    property string syntaxHighlightingTheme\n\n    // Transparency. The quadratic functions were derived from analysis of hand-picked transparency values.\n    ColorQuantizer {\n        id: wallColorQuant\n        property string wallpaperPath: Config.options.background.wallpaperPath\n        property bool wallpaperIsVideo: wallpaperPath.endsWith(\".mp4\") || wallpaperPath.endsWith(\".webm\") || wallpaperPath.endsWith(\".mkv\") || wallpaperPath.endsWith(\".avi\") || wallpaperPath.endsWith(\".mov\")\n        source: Qt.resolvedUrl(wallpaperIsVideo ? Config.options.background.thumbnailPath : Config.options.background.wallpaperPath)\n        depth: 0 // 2^0 = 1 color\n        rescaleSize: 10\n    }\n    property real wallpaperVibrancy: (wallColorQuant.colors[0]?.hslSaturation + wallColorQuant.colors[0]?.hslLightness) / 2\n    property real autoBackgroundTransparency: { // y = 0.5768x^2 - 0.759x + 0.2896\n        let x = wallpaperVibrancy\n        let y = 0.5768 * (x * x) - 0.759 * (x) + 0.2896\n        return Math.max(0, Math.min(0.22, y))\n    }\n    property real autoContentTransparency: { // y = -10.1734x^2 + 3.4457x + 0.1872\n        let x = autoBackgroundTransparency\n        let y = -10.1734 * (x * x) + 3.4457 * (x) + 0.1872\n        return Math.max(0, Math.min(0.6, y))\n    }\n    property real backgroundTransparency: Config?.options.appearance.transparency.enable ? Config?.options.appearance.transparency.automatic ? autoBackgroundTransparency : Config?.options.appearance.transparency.backgroundTransparency : 0\n    property real contentTransparency: Config?.options.appearance.transparency.enable ? Config?.options.appearance.transparency.automatic ? autoContentTransparency : Config?.options.appearance.transparency.contentTransparency : 0\n\n    m3colors: QtObject {\n        property bool darkmode: false\n        property bool transparent: true\n        property color m3background: \"#141313\"\n        property color m3onBackground: \"#e6e1e1\"\n        property color m3surface: \"#141313\"\n        property color m3surfaceDim: \"#141313\"\n        property color m3surfaceBright: \"#3a3939\"\n        property color m3surfaceContainerLowest: \"#0f0e0e\"\n        property color m3surfaceContainerLow: \"#1c1b1c\"\n        property color m3surfaceContainer: \"#201f20\"\n        property color m3surfaceContainerHigh: \"#2b2a2a\"\n        property color m3surfaceContainerHighest: \"#363435\"\n        property color m3onSurface: \"#e6e1e1\"\n        property color m3surfaceVariant: \"#49464a\"\n        property color m3onSurfaceVariant: \"#cbc5ca\"\n        property color m3inverseSurface: \"#e6e1e1\"\n        property color m3inverseOnSurface: \"#313030\"\n        property color m3outline: \"#948f94\"\n        property color m3outlineVariant: \"#49464a\"\n        property color m3shadow: \"#000000\"\n        property color m3scrim: \"#000000\"\n        property color m3surfaceTint: \"#cbc4cb\"\n        property color m3primary: \"#cbc4cb\"\n        property color m3onPrimary: \"#322f34\"\n        property color m3primaryContainer: \"#2d2a2f\"\n        property color m3onPrimaryContainer: \"#bcb6bc\"\n        property color m3inversePrimary: \"#615d63\"\n        property color m3secondary: \"#cac5c8\"\n        property color m3onSecondary: \"#323032\"\n        property color m3secondaryContainer: \"#4d4b4d\"\n        property color m3onSecondaryContainer: \"#ece6e9\"\n        property color m3tertiary: \"#d1c3c6\"\n        property color m3onTertiary: \"#372e30\"\n        property color m3tertiaryContainer: \"#31292b\"\n        property color m3onTertiaryContainer: \"#c1b4b7\"\n        property color m3error: \"#ffb4ab\"\n        property color m3onError: \"#690005\"\n        property color m3errorContainer: \"#93000a\"\n        property color m3onErrorContainer: \"#ffdad6\"\n        property color m3primaryFixed: \"#e7e0e7\"\n        property color m3primaryFixedDim: \"#cbc4cb\"\n        property color m3onPrimaryFixed: \"#1d1b1f\"\n        property color m3onPrimaryFixedVariant: \"#49454b\"\n        property color m3secondaryFixed: \"#e6e1e4\"\n        property color m3secondaryFixedDim: \"#cac5c8\"\n        property color m3onSecondaryFixed: \"#1d1b1d\"\n        property color m3onSecondaryFixedVariant: \"#484648\"\n        property color m3tertiaryFixed: \"#eddfe1\"\n        property color m3tertiaryFixedDim: \"#d1c3c6\"\n        property color m3onTertiaryFixed: \"#211a1c\"\n        property color m3onTertiaryFixedVariant: \"#4e4447\"\n        property color m3success: \"#B5CCBA\"\n        property color m3onSuccess: \"#213528\"\n        property color m3successContainer: \"#374B3E\"\n        property color m3onSuccessContainer: \"#D1E9D6\"\n        property color term0: \"#EDE4E4\"\n        property color term1: \"#B52755\"\n        property color term2: \"#A97363\"\n        property color term3: \"#AF535D\"\n        property color term4: \"#A67F7C\"\n        property color term5: \"#B2416B\"\n        property color term6: \"#8D76AD\"\n        property color term7: \"#272022\"\n        property color term8: \"#0E0D0D\"\n        property color term9: \"#B52755\"\n        property color term10: \"#A97363\"\n        property color term11: \"#AF535D\"\n        property color term12: \"#A67F7C\"\n        property color term13: \"#B2416B\"\n        property color term14: \"#8D76AD\"\n        property color term15: \"#221A1A\"\n    }\n\n    colors: QtObject {\n        property color colSubtext: m3colors.m3outline\n        property color colLayer0: ColorUtils.mix(ColorUtils.transparentize(m3colors.m3background, root.backgroundTransparency), m3colors.m3primary, Config.options.appearance.extraBackgroundTint ? 0.99 : 1)\n        property color colOnLayer0: m3colors.m3onBackground\n        property color colLayer0Hover: ColorUtils.transparentize(ColorUtils.mix(colLayer0, colOnLayer0, 0.9, root.contentTransparency))\n        property color colLayer0Active: ColorUtils.transparentize(ColorUtils.mix(colLayer0, colOnLayer0, 0.8, root.contentTransparency))\n        property color colLayer0Border: ColorUtils.mix(root.m3colors.m3outlineVariant, colLayer0, 0.4)\n        property color colLayer1: ColorUtils.transparentize(m3colors.m3surfaceContainerLow, root.contentTransparency);\n        property color colOnLayer1: m3colors.m3onSurfaceVariant;\n        property color colOnLayer1Inactive: ColorUtils.mix(colOnLayer1, colLayer1, 0.45);\n        property color colLayer2: ColorUtils.transparentize(m3colors.m3surfaceContainer, root.contentTransparency)\n        property color colOnLayer2: m3colors.m3onSurface;\n        property color colOnLayer2Disabled: ColorUtils.mix(colOnLayer2, m3colors.m3background, 0.4);\n        property color colLayer1Hover: ColorUtils.transparentize(ColorUtils.mix(colLayer1, colOnLayer1, 0.92), root.contentTransparency)\n        property color colLayer1Active: ColorUtils.transparentize(ColorUtils.mix(colLayer1, colOnLayer1, 0.85), root.contentTransparency);\n        property color colLayer2Hover: ColorUtils.transparentize(ColorUtils.mix(colLayer2, colOnLayer2, 0.90), root.contentTransparency)\n        property color colLayer2Active: ColorUtils.transparentize(ColorUtils.mix(colLayer2, colOnLayer2, 0.80), root.contentTransparency);\n        property color colLayer2Disabled: ColorUtils.transparentize(ColorUtils.mix(colLayer2, m3colors.m3background, 0.8), root.contentTransparency);\n        property color colLayer3: ColorUtils.transparentize(m3colors.m3surfaceContainerHigh, root.contentTransparency)\n        property color colOnLayer3: m3colors.m3onSurface;\n        property color colLayer3Hover: ColorUtils.transparentize(ColorUtils.mix(colLayer3, colOnLayer3, 0.90), root.contentTransparency)\n        property color colLayer3Active: ColorUtils.transparentize(ColorUtils.mix(colLayer3, colOnLayer3, 0.80), root.contentTransparency);\n        property color colLayer4: ColorUtils.transparentize(m3colors.m3surfaceContainerHighest, root.contentTransparency)\n        property color colOnLayer4: m3colors.m3onSurface;\n        property color colLayer4Hover: ColorUtils.transparentize(ColorUtils.mix(colLayer4, colOnLayer4, 0.90), root.contentTransparency)\n        property color colLayer4Active: ColorUtils.transparentize(ColorUtils.mix(colLayer4, colOnLayer4, 0.80), root.contentTransparency);\n        property color colPrimary: m3colors.m3primary\n        property color colOnPrimary: m3colors.m3onPrimary\n        property color colPrimaryHover: ColorUtils.mix(colors.colPrimary, colLayer1Hover, 0.87)\n        property color colPrimaryActive: ColorUtils.mix(colors.colPrimary, colLayer1Active, 0.7)\n        property color colPrimaryContainer: m3colors.m3primaryContainer\n        property color colPrimaryContainerHover: ColorUtils.mix(colors.colPrimaryContainer, colors.colOnPrimaryContainer, 0.9)\n        property color colPrimaryContainerActive: ColorUtils.mix(colors.colPrimaryContainer, colors.colOnPrimaryContainer, 0.8)\n        property color colOnPrimaryContainer: m3colors.m3onPrimaryContainer\n        property color colSecondary: m3colors.m3secondary\n        property color colOnSecondary: m3colors.m3onSecondary\n        property color colSecondaryHover: ColorUtils.mix(m3colors.m3secondary, colLayer1Hover, 0.85)\n        property color colSecondaryActive: ColorUtils.mix(m3colors.m3secondary, colLayer1Active, 0.4)\n        property color colSecondaryContainer: m3colors.m3secondaryContainer\n        property color colSecondaryContainerHover: ColorUtils.mix(m3colors.m3secondaryContainer, m3colors.m3onSecondaryContainer, 0.90)\n        property color colSecondaryContainerActive: ColorUtils.mix(m3colors.m3secondaryContainer, m3colors.m3onSecondaryContainer, 0.54)\n        property color colTertiary: m3colors.m3tertiary\n        property color colTertiaryHover: ColorUtils.mix(m3colors.m3tertiary, colLayer1Hover, 0.85)\n        property color colTertiaryActive: ColorUtils.mix(m3colors.m3tertiary, colLayer1Active, 0.4)\n        property color colTertiaryContainer: m3colors.m3tertiaryContainer\n        property color colTertiaryContainerHover: ColorUtils.mix(m3colors.m3tertiaryContainer, m3colors.m3onTertiaryContainer, 0.90)\n        property color colTertiaryContainerActive: ColorUtils.mix(m3colors.m3tertiaryContainer, colLayer1Active, 0.54)\n        property color colOnTertiary: m3colors.m3onTertiary\n        property color colOnTertiaryContainer: m3colors.m3onTertiaryContainer\n        property color colOnSecondaryContainer: m3colors.m3onSecondaryContainer\n        property color colSurfaceContainerLow: ColorUtils.transparentize(m3colors.m3surfaceContainerLow, root.contentTransparency)\n        property color colSurfaceContainer: ColorUtils.transparentize(m3colors.m3surfaceContainer, root.contentTransparency)\n        property color colBackgroundSurfaceContainer: ColorUtils.transparentize(m3colors.m3surfaceContainer, root.backgroundTransparency)\n        property color colSurfaceContainerHigh: ColorUtils.transparentize(m3colors.m3surfaceContainerHigh, root.contentTransparency)\n        property color colSurfaceContainerHighest: ColorUtils.transparentize(m3colors.m3surfaceContainerHighest, root.contentTransparency)\n        property color colSurfaceContainerHighestHover: ColorUtils.mix(m3colors.m3surfaceContainerHighest, m3colors.m3onSurface, 0.95)\n        property color colSurfaceContainerHighestActive: ColorUtils.mix(m3colors.m3surfaceContainerHighest, m3colors.m3onSurface, 0.85)\n        property color colOnSurface: m3colors.m3onSurface\n        property color colOnSurfaceVariant: m3colors.m3onSurfaceVariant\n        property color colTooltip: m3colors.m3inverseSurface\n        property color colOnTooltip: m3colors.m3inverseOnSurface\n        property color colScrim: ColorUtils.transparentize(m3colors.m3scrim, 0.5)\n        property color colShadow: ColorUtils.transparentize(m3colors.m3shadow, 0.7)\n        property color colOutline: m3colors.m3outline\n        property color colOutlineVariant: m3colors.m3outlineVariant\n        property color colError: m3colors.m3error\n        property color colErrorHover: ColorUtils.mix(m3colors.m3error, colLayer1Hover, 0.85)\n        property color colErrorActive: ColorUtils.mix(m3colors.m3error, colLayer1Active, 0.7)\n        property color colOnError: m3colors.m3onError\n        property color colErrorContainer: m3colors.m3errorContainer\n        property color colErrorContainerHover: ColorUtils.mix(m3colors.m3errorContainer, m3colors.m3onErrorContainer, 0.90)\n        property color colErrorContainerActive: ColorUtils.mix(m3colors.m3errorContainer, m3colors.m3onErrorContainer, 0.70)\n        property color colOnErrorContainer: m3colors.m3onErrorContainer\n    }\n\n    rounding: QtObject {\n        property int unsharpen: 2\n        property int unsharpenmore: 6\n        property int verysmall: 8\n        property int small: 12\n        property int normal: 17\n        property int large: 23\n        property int verylarge: 30\n        property int full: 9999\n        property int screenRounding: large\n        property int windowRounding: 18\n    }\n\n    font: QtObject {\n        property QtObject family: QtObject {\n            property string main: Config.options.appearance.fonts.main\n            property string numbers: Config.options.appearance.fonts.numbers\n            property string title: Config.options.appearance.fonts.title\n            property string iconMaterial: \"Material Symbols Rounded\"\n            property string iconNerd: Config.options.appearance.fonts.iconNerd\n            property string monospace: Config.options.appearance.fonts.monospace\n            property string reading: Config.options.appearance.fonts.reading\n            property string expressive: Config.options.appearance.fonts.expressive\n        }\n        property QtObject variableAxes: QtObject {\n            property var main: ({\n                \"wght\": 450,\n                \"wdth\": 100,\n            })\n            property var numbers: ({\n                \"wght\": 450,\n            })\n            property var title: ({ // Slightly bold weight for title\n                \"wght\": 550, // Weight (Lowered to compensate for increased grade)\n            })\n        }\n        property QtObject pixelSize: QtObject {\n            property int smallest: 10\n            property int smaller: 12\n            property int smallie: 13\n            property int small: 15\n            property int normal: 16\n            property int large: 17\n            property int larger: 19\n            property int huge: 22\n            property int hugeass: 23\n            property int title: huge\n        }\n    }\n\n    animationCurves: QtObject {\n        readonly property list<real> expressiveFastSpatial: [0.42, 1.67, 0.21, 0.90, 1, 1] // Default, 350ms\n        readonly property list<real> expressiveDefaultSpatial: [0.38, 1.21, 0.22, 1.00, 1, 1] // Default, 500ms\n        readonly property list<real> expressiveSlowSpatial: [0.39, 1.29, 0.35, 0.98, 1, 1] // Default, 650ms\n        readonly property list<real> expressiveEffects: [0.34, 0.80, 0.34, 1.00, 1, 1] // Default, 200ms\n        readonly property list<real> emphasized: [0.05, 0, 2 / 15, 0.06, 1 / 6, 0.4, 5 / 24, 0.82, 0.25, 1, 1, 1]\n        readonly property list<real> emphasizedFirstHalf: [0.05, 0, 2 / 15, 0.06, 1 / 6, 0.4, 5 / 24, 0.82]\n        readonly property list<real> emphasizedLastHalf: [5 / 24, 0.82, 0.25, 1, 1, 1]\n        readonly property list<real> emphasizedAccel: [0.3, 0, 0.8, 0.15, 1, 1]\n        readonly property list<real> emphasizedDecel: [0.05, 0.7, 0.1, 1, 1, 1]\n        readonly property list<real> standard: [0.2, 0, 0, 1, 1, 1]\n        readonly property list<real> standardAccel: [0.3, 0, 1, 1, 1, 1]\n        readonly property list<real> standardDecel: [0, 0, 0, 1, 1, 1]\n        readonly property real expressiveFastSpatialDuration: 350\n        readonly property real expressiveDefaultSpatialDuration: 500\n        readonly property real expressiveSlowSpatialDuration: 650\n        readonly property real expressiveEffectsDuration: 200\n    }\n\n    animation: QtObject {\n        property QtObject elementMove: QtObject {\n            property int duration: animationCurves.expressiveDefaultSpatialDuration\n            property int type: Easing.BezierSpline\n            property list<real> bezierCurve: animationCurves.expressiveDefaultSpatial\n            property int velocity: 650\n            property Component numberAnimation: Component {\n                NumberAnimation {\n                    duration: root.animation.elementMove.duration\n                    easing.type: root.animation.elementMove.type\n                    easing.bezierCurve: root.animation.elementMove.bezierCurve\n                }\n            }\n        }\n\n        property QtObject elementMoveEnter: QtObject {\n            property int duration: 400\n            property int type: Easing.BezierSpline\n            property list<real> bezierCurve: animationCurves.emphasizedDecel\n            property int velocity: 650\n            property Component numberAnimation: Component {\n                NumberAnimation {\n                    alwaysRunToEnd: true\n                    duration: root.animation.elementMoveEnter.duration\n                    easing.type: root.animation.elementMoveEnter.type\n                    easing.bezierCurve: root.animation.elementMoveEnter.bezierCurve\n                }\n            }\n        }\n\n        property QtObject elementMoveExit: QtObject {\n            property int duration: 200\n            property int type: Easing.BezierSpline\n            property list<real> bezierCurve: animationCurves.emphasizedAccel\n            property int velocity: 650\n            property Component numberAnimation: Component {\n                NumberAnimation {\n                    alwaysRunToEnd: true\n                    duration: root.animation.elementMoveExit.duration\n                    easing.type: root.animation.elementMoveExit.type\n                    easing.bezierCurve: root.animation.elementMoveExit.bezierCurve\n                }\n            }\n        }\n\n        property QtObject elementMoveFast: QtObject {\n            property int duration: animationCurves.expressiveEffectsDuration\n            property int type: Easing.BezierSpline\n            property list<real> bezierCurve: animationCurves.expressiveEffects\n            property int velocity: 850\n            property Component colorAnimation: Component { ColorAnimation {\n                duration: root.animation.elementMoveFast.duration\n                easing.type: root.animation.elementMoveFast.type\n                easing.bezierCurve: root.animation.elementMoveFast.bezierCurve\n            }}\n            property Component numberAnimation: Component { NumberAnimation {\n                alwaysRunToEnd: true\n                duration: root.animation.elementMoveFast.duration\n                easing.type: root.animation.elementMoveFast.type\n                easing.bezierCurve: root.animation.elementMoveFast.bezierCurve\n            }}\n        }\n\n        property QtObject elementResize: QtObject {\n            property int duration: 300\n            property int type: Easing.BezierSpline\n            property list<real> bezierCurve: animationCurves.emphasized\n            property int velocity: 650\n            property Component numberAnimation: Component {\n                NumberAnimation {\n                    alwaysRunToEnd: true\n                    duration: root.animation.elementResize.duration\n                    easing.type: root.animation.elementResize.type\n                    easing.bezierCurve: root.animation.elementResize.bezierCurve\n                }\n            }\n        }\n\n        property QtObject clickBounce: QtObject {\n            property int duration: 400\n            property int type: Easing.BezierSpline\n            property list<real> bezierCurve: animationCurves.expressiveDefaultSpatial\n            property int velocity: 850\n            property Component numberAnimation: Component { NumberAnimation {\n                alwaysRunToEnd: true\n                duration: root.animation.clickBounce.duration\n                easing.type: root.animation.clickBounce.type\n                easing.bezierCurve: root.animation.clickBounce.bezierCurve\n            }}\n        }\n        \n        property QtObject scroll: QtObject {\n            property int duration: 200\n            property int type: Easing.BezierSpline\n            property list<real> bezierCurve: animationCurves.standardDecel\n        }\n\n        property QtObject menuDecel: QtObject {\n            property int duration: 350\n            property int type: Easing.OutExpo\n        }\n    }\n\n    sizes: QtObject {\n        property real baseBarHeight: 40\n        property real barHeight: Config.options.bar.cornerStyle === 1 ? \n            (baseBarHeight + root.sizes.hyprlandGapsOut * 2) : baseBarHeight\n        property real barCenterSideModuleWidth: Config.options?.bar.verbose ? 360 : 140\n        property real barCenterSideModuleWidthShortened: 280\n        property real barCenterSideModuleWidthHellaShortened: 190\n        property real barShortenScreenWidthThreshold: 1200 // Shorten if screen width is at most this value\n        property real barHellaShortenScreenWidthThreshold: 1000 // Shorten even more...\n        property real elevationMargin: 10\n        property real fabShadowRadius: 5\n        property real fabHoveredShadowRadius: 7\n        property real hyprlandGapsOut: 5\n        property real mediaControlsWidth: 440\n        property real mediaControlsHeight: 160\n        property real notificationPopupWidth: 410\n        property real osdWidth: 180\n        property real searchWidthCollapsed: 210\n        property real searchWidth: 360\n        property real sidebarWidth: 460\n        property real sidebarWidthExtended: 750\n        property real baseVerticalBarWidth: 46\n        property real verticalBarWidth: Config.options.bar.cornerStyle === 1 ? \n            (baseVerticalBarWidth + root.sizes.hyprlandGapsOut * 2) : baseVerticalBarWidth\n        property real wallpaperSelectorWidth: 1200\n        property real wallpaperSelectorHeight: 690\n        property real wallpaperSelectorItemMargins: 8\n        property real wallpaperSelectorItemPadding: 6\n    }\n\n    syntaxHighlightingTheme: root.m3colors.darkmode ? \"Monokai\" : \"ayu Light\"\n}\n","range":{"startLineNumber":1,"startColumn":1,"endLineNumber":395,"endColumn":1}}]},{"type":"textEdit","uri":{"$mid":1,"fsPath":"/home/truonglangquan/.config/quickshell/ii/modules/common/Appearance.qml","external":"file:///home/truonglangquan/.config/quickshell/ii/modules/common/Appearance.qml","path":"/home/truonglangquan/.config/quickshell/ii/modules/common/Appearance.qml","scheme":"file"},"requestId":"request_6d3e858d-dd3c-4187-a2fd-5891ea8904c9","epoch":35,"edits":[{"text":"import QtQuick\nimport Quickshell\nimport qs.modules.common.functions\npragma Singleton\npragma ComponentBehavior: Bound\n\nSingleton {\n    id: root\n    property QtObject m3colors\n    property QtObject animation\n    property QtObject animationCurves\n    property QtObject colors\n    property QtObject rounding\n    property QtObject font\n    property QtObject sizes\n    property string syntaxHighlightingTheme\n\n    // Transparency. The quadratic functions were derived from analysis of hand-picked transparency values.\n    ColorQuantizer {\n        id: wallColorQuant\n        property string wallpaperPath: Config.options.background.wallpaperPath\n        property bool wallpaperIsVideo: wallpaperPath.endsWith(\".mp4\") || wallpaperPath.endsWith(\".webm\") || wallpaperPath.endsWith(\".mkv\") || wallpaperPath.endsWith(\".avi\") || wallpaperPath.endsWith(\".mov\")\n        source: Qt.resolvedUrl(wallpaperIsVideo ? Config.options.background.thumbnailPath : Config.options.background.wallpaperPath)\n        depth: 0 // 2^0 = 1 color\n        rescaleSize: 10\n    }\n    property real wallpaperVibrancy: (wallColorQuant.colors[0]?.hslSaturation + wallColorQuant.colors[0]?.hslLightness) / 2\n    property real autoBackgroundTransparency: { // y = 0.5768x^2 - 0.759x + 0.2896\n        let x = wallpaperVibrancy\n        let y = 0.5768 * (x * x) - 0.759 * (x) + 0.2896\n        return Math.max(0, Math.min(0.22, y))\n    }\n    property real autoContentTransparency: { // y = -10.1734x^2 + 3.4457x + 0.1872\n        let x = autoBackgroundTransparency\n        let y = -10.1734 * (x * x) + 3.4457 * (x) + 0.1872\n        return Math.max(0, Math.min(0.6, y))\n    }\n    property real backgroundTransparency: Config?.options.appearance.transparency.enable ? Config?.options.appearance.transparency.automatic ? autoBackgroundTransparency : Config?.options.appearance.transparency.backgroundTransparency : 0\n    property real contentTransparency: Config?.options.appearance.transparency.enable ? Config?.options.appearance.transparency.automatic ? autoContentTransparency : Config?.options.appearance.transparency.contentTransparency : 0\n\n    m3colors: QtObject {\n        property bool darkmode: false\n        property bool transparent: true\n        property color m3background: \"#141313\"\n        property color m3onBackground: \"#e6e1e1\"\n        property color m3surface: \"#141313\"\n        property color m3surfaceDim: \"#141313\"\n        property color m3surfaceBright: \"#3a3939\"\n        property color m3surfaceContainerLowest: \"#0f0e0e\"\n        property color m3surfaceContainerLow: \"#1c1b1c\"\n        property color m3surfaceContainer: \"#201f20\"\n        property color m3surfaceContainerHigh: \"#2b2a2a\"\n        property color m3surfaceContainerHighest: \"#363435\"\n        property color m3onSurface: \"#e6e1e1\"\n        property color m3surfaceVariant: \"#49464a\"\n        property color m3onSurfaceVariant: \"#cbc5ca\"\n        property color m3inverseSurface: \"#e6e1e1\"\n        property color m3inverseOnSurface: \"#313030\"\n        property color m3outline: \"#948f94\"\n        property color m3outlineVariant: \"#49464a\"\n        property color m3shadow: \"#000000\"\n        property color m3scrim: \"#000000\"\n        property color m3surfaceTint: \"#cbc4cb\"\n        property color m3primary: \"#cbc4cb\"\n        property color m3onPrimary: \"#322f34\"\n        property color m3primaryContainer: \"#2d2a2f\"\n        property color m3onPrimaryContainer: \"#bcb6bc\"\n        property color m3inversePrimary: \"#615d63\"\n        property color m3secondary: \"#cac5c8\"\n        property color m3onSecondary: \"#323032\"\n        property color m3secondaryContainer: \"#4d4b4d\"\n        property color m3onSecondaryContainer: \"#ece6e9\"\n        property color m3tertiary: \"#d1c3c6\"\n        property color m3onTertiary: \"#372e30\"\n        property color m3tertiaryContainer: \"#31292b\"\n        property color m3onTertiaryContainer: \"#c1b4b7\"\n        property color m3error: \"#ffb4ab\"\n        property color m3onError: \"#690005\"\n        property color m3errorContainer: \"#93000a\"\n        property color m3onErrorContainer: \"#ffdad6\"\n        property color m3primaryFixed: \"#e7e0e7\"\n        property color m3primaryFixedDim: \"#cbc4cb\"\n        property color m3onPrimaryFixed: \"#1d1b1f\"\n        property color m3onPrimaryFixedVariant: \"#49454b\"\n        property color m3secondaryFixed: \"#e6e1e4\"\n        property color m3secondaryFixedDim: \"#cac5c8\"\n        property color m3onSecondaryFixed: \"#1d1b1d\"\n        property color m3onSecondaryFixedVariant: \"#484648\"\n        property color m3tertiaryFixed: \"#eddfe1\"\n        property color m3tertiaryFixedDim: \"#d1c3c6\"\n        property color m3onTertiaryFixed: \"#211a1c\"\n        property color m3onTertiaryFixedVariant: \"#4e4447\"\n        property color m3success: \"#B5CCBA\"\n        property color m3onSuccess: \"#213528\"\n        property color m3successContainer: \"#374B3E\"\n        property color m3onSuccessContainer: \"#D1E9D6\"\n        property color term0: \"#EDE4E4\"\n        property color term1: \"#B52755\"\n        property color term2: \"#A97363\"\n        property color term3: \"#AF535D\"\n        property color term4: \"#A67F7C\"\n        property color term5: \"#B2416B\"\n        property color term6: \"#8D76AD\"\n        property color term7: \"#272022\"\n        property color term8: \"#0E0D0D\"\n        property color term9: \"#B52755\"\n        property color term10: \"#A97363\"\n        property color term11: \"#AF535D\"\n        property color term12: \"#A67F7C\"\n        property color term13: \"#B2416B\"\n        property color term14: \"#8D76AD\"\n        property color term15: \"#221A1A\"\n    }\n\n    colors: QtObject {\n        property color colSubtext: m3colors.m3outline\n        property color colLayer0: ColorUtils.mix(ColorUtils.transparentize(m3colors.m3background, root.backgroundTransparency), m3colors.m3primary, Config.options.appearance.extraBackgroundTint ? 0.99 : 1)\n        property color colOnLayer0: m3colors.m3onBackground\n        property color colLayer0Hover: ColorUtils.transparentize(ColorUtils.mix(colLayer0, colOnLayer0, 0.9, root.contentTransparency))\n        property color colLayer0Active: ColorUtils.transparentize(ColorUtils.mix(colLayer0, colOnLayer0, 0.8, root.contentTransparency))\n        property color colLayer0Border: ColorUtils.mix(root.m3colors.m3outlineVariant, colLayer0, 0.4)\n        property color colLayer1: ColorUtils.transparentize(m3colors.m3surfaceContainerLow, root.contentTransparency);\n        property color colOnLayer1: m3colors.m3onSurfaceVariant;\n        property color colOnLayer1Inactive: ColorUtils.mix(colOnLayer1, colLayer1, 0.45);\n        property color colLayer2: ColorUtils.transparentize(m3colors.m3surfaceContainer, root.contentTransparency)\n        property color colOnLayer2: m3colors.m3onSurface;\n        property color colOnLayer2Disabled: ColorUtils.mix(colOnLayer2, m3colors.m3background, 0.4);\n        property color colLayer1Hover: ColorUtils.transparentize(ColorUtils.mix(colLayer1, colOnLayer1, 0.92), root.contentTransparency)\n        property color colLayer1Active: ColorUtils.transparentize(ColorUtils.mix(colLayer1, colOnLayer1, 0.85), root.contentTransparency);\n        property color colLayer2Hover: ColorUtils.transparentize(ColorUtils.mix(colLayer2, colOnLayer2, 0.90), root.contentTransparency)\n        property color colLayer2Active: ColorUtils.transparentize(ColorUtils.mix(colLayer2, colOnLayer2, 0.80), root.contentTransparency);\n        property color colLayer2Disabled: ColorUtils.transparentize(ColorUtils.mix(colLayer2, m3colors.m3background, 0.8), root.contentTransparency);\n        property color colLayer3: ColorUtils.transparentize(m3colors.m3surfaceContainerHigh, root.contentTransparency)\n        property color colOnLayer3: m3colors.m3onSurface;\n        property color colLayer3Hover: ColorUtils.transparentize(ColorUtils.mix(colLayer3, colOnLayer3, 0.90), root.contentTransparency)\n        property color colLayer3Active: ColorUtils.transparentize(ColorUtils.mix(colLayer3, colOnLayer3, 0.80), root.contentTransparency);\n        property color colLayer4: ColorUtils.transparentize(m3colors.m3surfaceContainerHighest, root.contentTransparency)\n        property color colOnLayer4: m3colors.m3onSurface;\n        property color colLayer4Hover: ColorUtils.transparentize(ColorUtils.mix(colLayer4, colOnLayer4, 0.90), root.contentTransparency)\n        property color colLayer4Active: ColorUtils.transparentize(ColorUtils.mix(colLayer4, colOnLayer4, 0.80), root.contentTransparency);\n        property color colPrimary: m3colors.m3primary\n        property color colOnPrimary: m3colors.m3onPrimary\n        property color colPrimaryHover: ColorUtils.mix(colors.colPrimary, colLayer1Hover, 0.87)\n        property color colPrimaryActive: ColorUtils.mix(colors.colPrimary, colLayer1Active, 0.7)\n        property color colPrimaryContainer: m3colors.m3primaryContainer\n        property color colPrimaryContainerHover: ColorUtils.mix(colors.colPrimaryContainer, colors.colOnPrimaryContainer, 0.9)\n        property color colPrimaryContainerActive: ColorUtils.mix(colors.colPrimaryContainer, colors.colOnPrimaryContainer, 0.8)\n        property color colOnPrimaryContainer: m3colors.m3onPrimaryContainer\n        property color colSecondary: m3colors.m3secondary\n        property color colOnSecondary: m3colors.m3onSecondary\n        property color colSecondaryHover: ColorUtils.mix(m3colors.m3secondary, colLayer1Hover, 0.85)\n        property color colSecondaryActive: ColorUtils.mix(m3colors.m3secondary, colLayer1Active, 0.4)\n        property color colSecondaryContainer: m3colors.m3secondaryContainer\n        property color colSecondaryContainerHover: ColorUtils.mix(m3colors.m3secondaryContainer, m3colors.m3onSecondaryContainer, 0.90)\n        property color colSecondaryContainerActive: ColorUtils.mix(m3colors.m3secondaryContainer, m3colors.m3onSecondaryContainer, 0.54)\n        property color colTertiary: m3colors.m3tertiary\n        property color colTertiaryHover: ColorUtils.mix(m3colors.m3tertiary, colLayer1Hover, 0.85)\n        property color colTertiaryActive: ColorUtils.mix(m3colors.m3tertiary, colLayer1Active, 0.4)\n        property color colTertiaryContainer: m3colors.m3tertiaryContainer\n        property color colTertiaryContainerHover: ColorUtils.mix(m3colors.m3tertiaryContainer, m3colors.m3onTertiaryContainer, 0.90)\n        property color colTertiaryContainerActive: ColorUtils.mix(m3colors.m3tertiaryContainer, colLayer1Active, 0.54)\n        property color colOnTertiary: m3colors.m3onTertiary\n        property color colOnTertiaryContainer: m3colors.m3onTertiaryContainer\n        property color colOnSecondaryContainer: m3colors.m3onSecondaryContainer\n        property color colSurfaceContainerLow: ColorUtils.transparentize(m3colors.m3surfaceContainerLow, root.contentTransparency)\n        property color colSurfaceContainer: ColorUtils.transparentize(m3colors.m3surfaceContainer, root.contentTransparency)\n        property color colBackgroundSurfaceContainer: ColorUtils.transparentize(m3colors.m3surfaceContainer, root.backgroundTransparency)\n        property color colSurfaceContainerHigh: ColorUtils.transparentize(m3colors.m3surfaceContainerHigh, root.contentTransparency)\n        property color colSurfaceContainerHighest: ColorUtils.transparentize(m3colors.m3surfaceContainerHighest, root.contentTransparency)\n        property color colSurfaceContainerHighestHover: ColorUtils.mix(m3colors.m3surfaceContainerHighest, m3colors.m3onSurface, 0.95)\n        property color colSurfaceContainerHighestActive: ColorUtils.mix(m3colors.m3surfaceContainerHighest, m3colors.m3onSurface, 0.85)\n        property color colOnSurface: m3colors.m3onSurface\n        property color colOnSurfaceVariant: m3colors.m3onSurfaceVariant\n        property color colTooltip: m3colors.m3inverseSurface\n        property color colOnTooltip: m3colors.m3inverseOnSurface\n        property color colScrim: ColorUtils.transparentize(m3colors.m3scrim, 0.5)\n        property color colShadow: ColorUtils.transparentize(m3colors.m3shadow, 0.7)\n        property color colOutline: m3colors.m3outline\n        property color colOutlineVariant: m3colors.m3outlineVariant\n        property color colError: m3colors.m3error\n        property color colErrorHover: ColorUtils.mix(m3colors.m3error, colLayer1Hover, 0.85)\n        property color colErrorActive: ColorUtils.mix(m3colors.m3error, colLayer1Active, 0.7)\n        property color colOnError: m3colors.m3onError\n        property color colErrorContainer: m3colors.m3errorContainer\n        property color colErrorContainerHover: ColorUtils.mix(m3colors.m3errorContainer, m3colors.m3onErrorContainer, 0.90)\n        property color colErrorContainerActive: ColorUtils.mix(m3colors.m3errorContainer, m3colors.m3onErrorContainer, 0.70)\n        property color colOnErrorContainer: m3colors.m3onErrorContainer\n    }\n\n    rounding: QtObject {\n        property int unsharpen: 2\n        property int unsharpenmore: 6\n        property int verysmall: 8\n        property int small: 12\n        property int normal: 17\n        property int large: 23\n        property int verylarge: 30\n        property int full: 9999\n        property int screenRounding: large\n        property int windowRounding: 18\n    }\n\n    font: QtObject {\n        property QtObject family: QtObject {\n            property string main: Config.options.appearance.fonts.main\n            property string numbers: Config.options.appearance.fonts.numbers\n            property string title: Config.options.appearance.fonts.title\n            property string iconMaterial: \"Material Symbols Rounded\"\n            property string iconNerd: Config.options.appearance.fonts.iconNerd\n            property string monospace: Config.options.appearance.fonts.monospace\n            property string reading: Config.options.appearance.fonts.reading\n            property string expressive: Config.options.appearance.fonts.expressive\n        }\n        property QtObject variableAxes: QtObject {\n            property var main: ({\n                \"wght\": 450,\n                \"wdth\": 100,\n            })\n            property var numbers: ({\n                \"wght\": 450,\n            })\n            property var title: ({ // Slightly bold weight for title\n                \"wght\": 550, // Weight (Lowered to compensate for increased grade)\n            })\n        }\n        property QtObject pixelSize: QtObject {\n            property int smallest: 10\n            property int smaller: 12\n            property int smallie: 13\n            property int small: 15\n            property int normal: 16\n            property int large: 17\n            property int larger: 19\n            property int huge: 22\n            property int hugeass: 23\n            property int title: huge\n        }\n    }\n\n    animationCurves: QtObject {\n        readonly property list<real> expressiveFastSpatial: [0.42, 1.67, 0.21, 0.90, 1, 1] // Default, 350ms\n        readonly property list<real> expressiveDefaultSpatial: [0.38, 1.21, 0.22, 1.00, 1, 1] // Default, 500ms\n        readonly property list<real> expressiveSlowSpatial: [0.39, 1.29, 0.35, 0.98, 1, 1] // Default, 650ms\n        readonly property list<real> expressiveEffects: [0.34, 0.80, 0.34, 1.00, 1, 1] // Default, 200ms\n        readonly property list<real> emphasized: [0.05, 0, 2 / 15, 0.06, 1 / 6, 0.4, 5 / 24, 0.82, 0.25, 1, 1, 1]\n        readonly property list<real> emphasizedFirstHalf: [0.05, 0, 2 / 15, 0.06, 1 / 6, 0.4, 5 / 24, 0.82]\n        readonly property list<real> emphasizedLastHalf: [5 / 24, 0.82, 0.25, 1, 1, 1]\n        readonly property list<real> emphasizedAccel: [0.3, 0, 0.8, 0.15, 1, 1]\n        readonly property list<real> emphasizedDecel: [0.05, 0.7, 0.1, 1, 1, 1]\n        readonly property list<real> standard: [0.2, 0, 0, 1, 1, 1]\n        readonly property list<real> standardAccel: [0.3, 0, 1, 1, 1, 1]\n        readonly property list<real> standardDecel: [0, 0, 0, 1, 1, 1]\n        readonly property real expressiveFastSpatialDuration: 350\n        readonly property real expressiveDefaultSpatialDuration: 500\n        readonly property real expressiveSlowSpatialDuration: 650\n        readonly property real expressiveEffectsDuration: 200\n    }\n\n    animation: QtObject {\n        property QtObject elementMove: QtObject {\n            property int duration: animationCurves.expressiveDefaultSpatialDuration\n            property int type: Easing.BezierSpline\n            property list<real> bezierCurve: animationCurves.expressiveDefaultSpatial\n            property int velocity: 650\n            property Component numberAnimation: Component {\n                NumberAnimation {\n                    duration: root.animation.elementMove.duration\n                    easing.type: root.animation.elementMove.type\n                    easing.bezierCurve: root.animation.elementMove.bezierCurve\n                }\n            }\n        }\n\n        property QtObject elementMoveEnter: QtObject {\n            property int duration: 400\n            property int type: Easing.BezierSpline\n            property list<real> bezierCurve: animationCurves.emphasizedDecel\n            property int velocity: 650\n            property Component numberAnimation: Component {\n                NumberAnimation {\n                    alwaysRunToEnd: true\n                    duration: root.animation.elementMoveEnter.duration\n                    easing.type: root.animation.elementMoveEnter.type\n                    easing.bezierCurve: root.animation.elementMoveEnter.bezierCurve\n                }\n            }\n        }\n\n        property QtObject elementMoveExit: QtObject {\n            property int duration: 200\n            property int type: Easing.BezierSpline\n            property list<real> bezierCurve: animationCurves.emphasizedAccel\n            property int velocity: 650\n            property Component numberAnimation: Component {\n                NumberAnimation {\n                    alwaysRunToEnd: true\n                    duration: root.animation.elementMoveExit.duration\n                    easing.type: root.animation.elementMoveExit.type\n                    easing.bezierCurve: root.animation.elementMoveExit.bezierCurve\n                }\n            }\n        }\n\n        property QtObject elementMoveFast: QtObject {\n            property int duration: animationCurves.expressiveEffectsDuration\n            property int type: Easing.BezierSpline\n            property list<real> bezierCurve: animationCurves.expressiveEffects\n            property int velocity: 850\n            property Component colorAnimation: Component { ColorAnimation {\n                duration: root.animation.elementMoveFast.duration\n                easing.type: root.animation.elementMoveFast.type\n                easing.bezierCurve: root.animation.elementMoveFast.bezierCurve\n            }}\n            property Component numberAnimation: Component { NumberAnimation {\n                alwaysRunToEnd: true\n                duration: root.animation.elementMoveFast.duration\n                easing.type: root.animation.elementMoveFast.type\n                easing.bezierCurve: root.animation.elementMoveFast.bezierCurve\n            }}\n        }\n\n        property QtObject elementResize: QtObject {\n            property int duration: 300\n            property int type: Easing.BezierSpline\n            property list<real> bezierCurve: animationCurves.emphasized\n            property int velocity: 650\n            property Component numberAnimation: Component {\n                NumberAnimation {\n                    alwaysRunToEnd: true\n                    duration: root.animation.elementResize.duration\n                    easing.type: root.animation.elementResize.type\n                    easing.bezierCurve: root.animation.elementResize.bezierCurve\n                }\n            }\n        }\n\n        property QtObject clickBounce: QtObject {\n            property int duration: 400\n            property int type: Easing.BezierSpline\n            property list<real> bezierCurve: animationCurves.expressiveDefaultSpatial\n            property int velocity: 850\n            property Component numberAnimation: Component { NumberAnimation {\n                alwaysRunToEnd: true\n                duration: root.animation.clickBounce.duration\n                easing.type: root.animation.clickBounce.type\n                easing.bezierCurve: root.animation.clickBounce.bezierCurve\n            }}\n        }\n        \n        property QtObject scroll: QtObject {\n            property int duration: 200\n            property int type: Easing.BezierSpline\n            property list<real> bezierCurve: animationCurves.standardDecel\n        }\n\n        property QtObject menuDecel: QtObject {\n            property int duration: 350\n            property int type: Easing.OutExpo\n        }\n    }\n\n    sizes: QtObject {\n        property real baseBarHeight: 40\n        property real barHeight: Config.options.bar.cornerStyle === 1 ? \n            (baseBarHeight + root.sizes.hyprlandGapsOut * 2) : baseBarHeight\n        property real barCenterSideModuleWidth: Config.options?.bar.verbose ? 360 : 140\n        property real barCenterSideModuleWidthShortened: 280\n        property real barCenterSideModuleWidthHellaShortened: 190\n        property real barShortenScreenWidthThreshold: 1200 // Shorten if screen width is at most this value\n        property real barHellaShortenScreenWidthThreshold: 1000 // Shorten even more...\n        property real elevationMargin: 10\n        property real fabShadowRadius: 5\n        property real fabHoveredShadowRadius: 7\n        property real hyprlandGapsOut: 5\n        property real mediaControlsWidth: 440\n        property real mediaControlsHeight: 160\n        property real notificationPopupWidth: 410\n        property real osdWidth: 180\n        property real searchWidthCollapsed: 210\n        property real searchWidth: 360\n        property real sidebarWidth: 460\n        property real sidebarWidthExtended: 750\n        property real baseVerticalBarWidth: 46\n        property real verticalBarWidth: Config.options.bar.cornerStyle === 1 ? \n            (baseVerticalBarWidth + root.sizes.hyprlandGapsOut * 2) : baseVerticalBarWidth\n        property real wallpaperSelectorWidth: 1200\n        property real wallpaperSelectorHeight: 690\n        property real wallpaperSelectorItemMargins: 8\n        property real wallpaperSelectorItemPadding: 6\n    }\n\n    syntaxHighlightingTheme: root.m3colors.darkmode ? \"Monokai\" : \"ayu Light\"\n}\n","range":{"startLineNumber":1,"startColumn":1,"endLineNumber":395,"endColumn":1}},{"text":"","range":{"startLineNumber":395,"startColumn":1,"endLineNumber":396,"endColumn":1}}]}],"epochCounter":36},"recentSnapshot":{"entries":[{"resource":"file:///home/truonglangquan/.config/quickshell/ii/modules/ii/background/widgets/visualizer/VisualizerWidget.qml","languageId":"qml","originalHash":"68fbf21","currentHash":"68fbf21","state":1,"snapshotUri":"chat-editing-snapshot-text-model:/home/truonglangquan/.config/quickshell/ii/modules/ii/background/widgets/visualizer/VisualizerWidget.qml?%7B%22session%22%3A%7B%22%24mid%22%3A1%2C%22external%22%3A%22vscode-chat-session%3A%2F%2Flocal%2FOGI2ZjJlZmUtZGEwNS00NmI5LTgwMTUtNDA5NmJjMWRiNTdj%22%2C%22path%22%3A%22%2FOGI2ZjJlZmUtZGEwNS00NmI5LTgwMTUtNDA5NmJjMWRiNTdj%22%2C%22scheme%22%3A%22vscode-chat-session%22%2C%22authority%22%3A%22local%22%7D%2C%22requestId%22%3A%22%22%2C%22undoStop%22%3A%22%22%7D","telemetryInfo":{"requestId":"request_2e7ef009-6f26-4986-a4c9-562bf3b5ca6e","agentId":"github.copilot.editsAgent","modelId":"copilot/auto","modeId":"agent"}},{"resource":"file:///home/truonglangquan/.config/quickshell/ii/modules/ii/background/Background.qml","languageId":"qml","originalHash":"db87960","currentHash":"db87960","state":1,"snapshotUri":"chat-editing-snapshot-text-model:/home/truonglangquan/.config/quickshell/ii/modules/ii/background/Background.qml?%7B%22session%22%3A%7B%22%24mid%22%3A1%2C%22external%22%3A%22vscode-chat-session%3A%2F%2Flocal%2FOGI2ZjJlZmUtZGEwNS00NmI5LTgwMTUtNDA5NmJjMWRiNTdj%22%2C%22path%22%3A%22%2FOGI2ZjJlZmUtZGEwNS00NmI5LTgwMTUtNDA5NmJjMWRiNTdj%22%2C%22scheme%22%3A%22vscode-chat-session%22%2C%22authority%22%3A%22local%22%7D%2C%22requestId%22%3A%22%22%2C%22undoStop%22%3A%22%22%7D","telemetryInfo":{"requestId":"request_cb7a93be-25df-4726-8402-ccd1f79bce94","agentId":"github.copilot.editsAgent","modelId":"copilot/auto","modeId":"agent"}},{"resource":"file:///home/truonglangquan/.config/quickshell/ii/modules/common/Appearance.qml","languageId":"qml","originalHash":"8a78ed0","currentHash":"8a78ed0","state":1,"snapshotUri":"chat-editing-snapshot-text-model:/home/truonglangquan/.config/quickshell/ii/modules/common/Appearance.qml?%7B%22session%22%3A%7B%22%24mid%22%3A1%2C%22external%22%3A%22vscode-chat-session%3A%2F%2Flocal%2FOGI2ZjJlZmUtZGEwNS00NmI5LTgwMTUtNDA5NmJjMWRiNTdj%22%2C%22path%22%3A%22%2FOGI2ZjJlZmUtZGEwNS00NmI5LTgwMTUtNDA5NmJjMWRiNTdj%22%2C%22scheme%22%3A%22vscode-chat-session%22%2C%22authority%22%3A%22local%22%7D%2C%22requestId%22%3A%22%22%2C%22undoStop%22%3A%22%22%7D","telemetryInfo":{"requestId":"request_6d3e858d-dd3c-4187-a2fd-5891ea8904c9","agentId":"github.copilot.editsAgent","modelId":"copilot/auto","modeId":"agent"}}]}}